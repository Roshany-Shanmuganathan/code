<!DOCTYPE html>
<!-- saved from url=(3222)https://as.jivox.com/unit/layout_renderer.php?dspId=996f2104-601b-4eda-b1f2-2d6660bf451e&campaignId=181754&showAdChoices=0&jvxVer=2&isDynamic=1&siteId=674dd6df7af248b&es_pId=3d372812&ts_pId=3d372812&creativeUnitType=19&bDim=160x600&bUnitId=1900&us_privacy=%24%7BUS_PRIVACY%7D&gdpr=0&gdpr_consent=&ap_DataSignal1=22194047228&c_Auctionid=ABAjH0i1VZJ1q96Rb_J6YQzuX5n4&ap_DataSignal3=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w&ap_DataSignal2=GBL-DV360&r=1751006552849734&cMacro=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6-%2DsQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3D&c_dv360_source_url=https%3A%2F%2Fwww.w3schools.com%2Fcss%2Fcss_boxmodel.asp&objectName=jvx_685e3d5a15742&adUnitId=1900&jvxSessionId=1751006554.7785&base=1&creativeResolveBeginTime=1751006549000&omid=1&localTimeOffset=-330&pageURL=https%3A%2F%2F9c9616ddc64049079f426fb3b4733aae.safeframe.googlesyndication.com%2Fsafeframe%2F1-0-45%2Fhtml%2Fcontainer.html&allowExp=0 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Jivox Interactivity Ad Framework Jivox</title>
<style>
		*{margin:0;padding:0;border:0px;}
		body.portrait160x600{width:160px;height:600px;padding:0px;margin:0px;}
		.portrait160x600 #scene-1{width:160px;height:600px;background:undefined; position:absolute;top:5000px;left:0;visibility:hidden;}
						.portrait160x600 #scene-1 #asset103{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset108{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset116{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset123{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset126{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset134{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset137{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset145{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset147{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset152{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset157{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset166{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
								.portrait160x600 #scene-1 #asset167{position:absolute;left:0px;top:0px;width:160px;height:600px;z-index:1;opacity:1;}
				object, embed { 
 outline: 0; 
}
.zoomToAnim{backface-visibility:hidden; filter:blur(0);}
#mask{position: absolute;top: 0;left: 0;width: 100%;height: 100%;background: #FFFFFF repeat scroll 0 0;display: none;z-index: 499;filter:alpha(opacity=60); -moz-opacity:0.6; -khtml-opacity: 0.6; opacity: 0.6;}
#loader{position:absolute;z-index:99999999999;left:50%;top:50%;display:none;}
#closeBtnModel{position:absolute;top:0px;left:0px;cursor:pointer;display:none;filter:alpha(opacity=80); -moz-opacity:0.8; -khtml-opacity: 0.8; opacity: 0.8; font-family:arial, tahoma; letter-spacing:0px; line-height:1; text-transform:none;right:0px;height:24px; width:24px;background: url('https://playercdn.jivox.com/1700114009/player/images/close_24x24.png');}
</style>
<script type="text/javascript" src="./jquery-2.1.0.min.js.download"></script>
<script type="text/javascript" src="./velocity-raf-disabled.min.js.download"></script>
<script>
var dyn__serviceList = {"geo":{"name":"Geography","optGroup":"Standard Services","city":{"name":"City"},"state":{"name":"State"},"postalCode":{"name":"Postal Code"},"dma":{"name":"DMA"},"country":{"name":"Country"},"ip":{"name":"IP Address"},"location":{"name":"Geo Location"}},"device":{"name":"Device","optGroup":"Standard Services","model":{"name":"Model"},"browserType":{"name":"Browser Type"},"osType":{"name":"Operating System"},"language":{"name":"Language"}},"holidays":{"name":"Holidays","optGroup":"Standard Services","holidayName":{"name":"Holiday Name"},"isHappening":{"name":"Is Happening"}},"time":{"name":"Time","optGroup":"Standard Services","local-time":{"name":"Local Time"},"local-date":{"name":"Local Date"},"local-date-time":{"name":"Local Date and Time"},"local-day-of-week":{"name":"Local Day of Week"},"time":{"name":"Time"},"date":{"name":"Date"},"date-time":{"name":"Date and Time"},"day-of-week":{"name":"Day of Week"}},"weather":{"name":"Weather","optGroup":"Standard Services","temp":{"name":"Temperature"},"wind":{"name":"Wind"},"weather":{"name":"Condition"},"pollen":{"name":"Pollen","disabled":true},"forecast":{"name":"Forecast","disabled":true},"UV":{"name":"UV","disabled":true},"historical":{"name":"Historical","disabled":true},"internationalWeather":{"name":"International Weather","disabled":true}},"casn":{"name":"Carrier & ASN details","optGroup":"Standard Services","carrier":{"name":"Carrier Name"},"mnc":{"name":"MNC"},"mcc":{"name":"MCC"},"asn":{"name":"ASN"},"as_name":{"name":"AS_Name"}},"adobe":{"name":"Adobe Audience Manager","optGroup":"DMP Services","segmentId":{"name":"Segment ID"}},"adsquare":{"name":"Adsquare","optGroup":"DMP Services","segmentId":{"name":"Segment ID"}},"bluekai":{"name":"BlueKai","optGroup":"DMP Services","segmentId":{"name":"Category ID"}},"krux":{"name":"Salesforce Marketing Cloud DMP (Krux)","optGroup":"DMP Services","segmentId":{"name":"Segment ID"}},"liveramp":{"name":"Liveramp","optGroup":"DMP Services","segmentId":{"name":"Segment ID"}},"lotame":{"name":"Lotame","optGroup":"DMP Services","segmentId":{"name":"Segment ID"}},"acxiom":{"name":"Acxiom","optGroup":"DMP Services","disabled":true,"segmentId":{"name":"Segment ID"}},"neustar":{"name":"Neustar","optGroup":"DMP Services","disabled":true,"segmentId":{"name":"Segment ID"}},"signal":{"name":"Signal","optGroup":"DMP Services","disabled":true,"segmentId":{"name":"Segment ID"}},"v12Group":{"name":"V12 Group","optGroup":"DMP Services","disabled":true,"segmentId":{"name":"Segment ID"}},"wfxtg":{"name":"Watson Advertising(IBM) WEATHERfx","optGroup":"Premium Services","current":{"name":"Current Forecast"},"tomorrow":{"name":"Tomorrow's Forecast"},"dayAfter":{"name":"Day After Forecast"},"twoWeeksForecast":{"name":"Two Weeks Forecast"}},"cookieData":{"name":"Sequential and Retargeting - Generic","optGroup":"Jivox Data Services","jvxdynsq-isSet":{"name":"Is creative viewed","optGroup":"Sequential Messaging"},"jvxdynsq":{"name":"Last viewed creative","optGroup":"Sequential Messaging"},"jvxdynsqseg":{"name":"Last viewed segment","optGroup":"Sequential Messaging"},"jvxdynsq_frequency":{"name":"Creative view count","optGroup":"Sequential Messaging"},"jvxdynsqseg_frequency":{"name":"Segment view count","optGroup":"Sequential Messaging"},"jvxdynsl":{"name":"Retargeting Cookie","optGroup":"Retargeting"},"jvxdynsl-isSet":{"name":"Retargeting Cookie Present","optGroup":"Retargeting"},"jvxdynsl-isSet_groups":{"name":"Retargeting Group Present","optGroup":"Retargeting"},"jvxdynsl_group1":{"name":"Retargeting Group 1","optGroup":"Retargeting"},"jvxdynsl_group2":{"name":"Retargeting Group 2","optGroup":"Retargeting"},"jvxdynsl_group3":{"name":"Retargeting Group 3","optGroup":"Retargeting"},"jvxdynsl_group4":{"name":"Retargeting Group 4","optGroup":"Retargeting"},"jvxdynsl_group5":{"name":"Retargeting Group 5","optGroup":"Retargeting"},"jvxdynsl_group6":{"name":"Retargeting Group 6","optGroup":"Retargeting"},"jvxdynsl_group7":{"name":"Retargeting Group 7","optGroup":"Retargeting"},"jvxdynsl_group8":{"name":"Retargeting Group 8","optGroup":"Retargeting"},"jvxdynsl_group9":{"name":"Retargeting Group 9","optGroup":"Retargeting"},"jvxdynsl_group10":{"name":"Retargeting Group 10","optGroup":"Retargeting"},"jvxdynsl_group11":{"name":"Retargeting Group 11","optGroup":"Retargeting"},"jvxdynsl_group12":{"name":"Retargeting Group 12","optGroup":"Retargeting"},"jvxdynsl_group13":{"name":"Retargeting Group 13","optGroup":"Retargeting"},"jvxdynsl_group14":{"name":"Retargeting Group 14","optGroup":"Retargeting"},"jvxdynsl_group15":{"name":"Retargeting Group 15","optGroup":"Retargeting"},"jvxdynsl_group16":{"name":"Retargeting Group 16","optGroup":"Retargeting"}},"cookieDataEcom":{"name":"Sequential and Retargeting - eCommerce","optGroup":"Jivox Data Services","add_to_cart":{"name":"Add To Cart","name_":{"name":"Content Name"},"id":{"name":"Content Id"},"category":{"name":"Content Category"},"sub_category1":{"name":"Content Sub Category 1"},"sub_category2":{"name":"Content Sub Category 2"},"currency":{"name":"Currency"},"price":{"name":"Price"},"quantity":{"name":"Quantity"},"order_value":{"name":"Total Order Value"},"num_items":{"name":"Number Of Items"},"brand":{"name":"Brand"}},"view_page":{"name":"Page\/ContentView","name_":{"name":"Content Name"},"id":{"name":"Content Id"},"category":{"name":"Content Category"},"sub_category1":{"name":"Content Sub Category 1"},"sub_category2":{"name":"Content Sub Category 2"},"currency":{"name":"Currency"},"brand":{"name":"Brand"}},"select_product":{"name":"Select Product","name_":{"name":"Content Name"},"id":{"name":"Content Id"},"category":{"name":"Content Category"},"quantity":{"name":"Quantity"},"currency":{"name":"Currency"},"price":{"name":"Price"},"brand":{"name":"Brand"}}},"pdhService":{"name":"Personalization Hub","optGroup":"Jivox Data Services","userViewed":{"name":"User Viewed Ad"},"userClicked":{"name":"User Clicked Ad"},"userConverted":{"name":"User Converted"},"viewedCreatives":{"name":"User Viewed Creative"},"clickedCreatives":{"name":"User Clicked Creative"},"convertedCreatives":{"name":"User Converted Creative"},"impressions":{"name":"Total Impressions"},"clicks":{"name":"Total Clicks"},"conversions":{"name":"Total Conversions"}},"aylien":{"name":"Aylien","optGroup":"Contextual Data Services","disabled":true,"pageCategory":{"name":"Page Category"}},"dataSift":{"name":"DataSift","optGroup":"Contextual Data Services","disabled":true,"anonymizedAndAggregatedFacebookNewsfeeddata":{"name":"Anonymized and aggregated Facebook newsfeed data"}},"evite":{"name":"Evite","optGroup":"Contextual Data Services","disabled":true,"events":{"name":"Events"},"attendee":{"name":"Attendee"},"host":{"name":"Host"},"accepted":{"name":"Accepted"},"date":{"name":"Date"},"time":{"name":"Time"},"dateAndTime":{"name":"Date and Time"},"location":{"name":"Location"}},"factual":{"name":"Factual","optGroup":"Contextual Data Services","disabled":true,"POI":{"name":"POI"},"segmentID":{"name":"Segment ID"}},"graceNote":{"name":"GraceNote","optGroup":"Contextual Data Services","disabled":true,"TVSchedule":{"name":"TV Schedule"},"TVShows":{"name":"TV Shows"},"movies":{"name":"Movies"},"movieShowtimes":{"name":"Movie Showtimes"},"TVSportsEvents":{"name":"TV Sports Events"},"TVMovies":{"name":"TV Movies"}},"grapeshot":{"name":"Grapeshot","optGroup":"Contextual Data Services","disabled":true,"pagecategory":{"name":"Page Category"}},"hubSpot":{"name":"HubSpot","optGroup":"Contextual Data Services","disabled":true,"pagecategory":{"name":"Page Category"}},"meetUp":{"name":"MeetUp","optGroup":"Contextual Data Services","disabled":true,"events":{"name":"Events"}},"pollenDotcom":{"name":"Pollen.com","optGroup":"Contextual Data Services","disabled":true,"pollenCount":{"name":"Pollen Count"},"pollenLevel":{"name":"Pollen Level"}},"retailigence":{"name":"Retailigence","optGroup":"Contextual Data Services","disabled":true,"retailerLocation":{"name":"Retailer Location"}},"rottenTomatoes":{"name":"Rotten Tomatoes","optGroup":"Contextual Data Services","disabled":true,"moviesDatabase":{"name":"Movies Database"}},"shopLocal":{"name":"ShopLocal","optGroup":"Contextual Data Services","disabled":true,"productCircular":{"name":"Product Circular"}},"sportRadar":{"name":"SportRadar","optGroup":"Contextual Data Services","disabled":true,"football":{"name":"Football"},"basketball":{"name":"Basketball"},"hockey":{"name":"Hockey"},"soccer":{"name":"Soccer"},"eSports":{"name":"eSports"},"racing":{"name":"Racing"},"golf":{"name":"Golf"},"olympics":{"name":"Olympics"},"cricket":{"name":"Cricket"},"tennis":{"name":"Tennis"},"rugby":{"name":"Rugby"},"MMA":{"name":"MMA"},"badminton":{"name":"Badminton"},"bandy":{"name":"Bandy"},"cycling":{"name":"Cycling"},"volleyball":{"name":"Volleyball"},"curling":{"name":"Curling"},"darts":{"name":"Darts"},"floorball":{"name":"Floorball"},"futsal":{"name":"Futsal"},"handball":{"name":"Handball"},"pesapallo":{"name":"Pesapallo"},"snooker":{"name":"Snooker"},"squash":{"name":"Squash"},"waterpolo":{"name":"Waterpolo"}},"taggstar":{"name":"Taggstar","optGroup":"Contextual Data Services","disabled":true,"purchasesLast24Hours":{"name":"Purchases Last 24 Hours"},"countOfPeopleLooking":{"name":"Count of People Looking"}},"xignite":{"name":"Xignite","optGroup":"Contextual Data Services","disabled":true,"globalHistorical":{"name":"Global Historical"},"globalIndicesHistorical":{"name":"Global Indices Historical"},"globalQuotes":{"name":"Global Quotes"},"globalCurrencies":{"name":"Global Currencies"},"globalMetals":{"name":"Global Metals"},"rates":{"name":"Rates"},"factSetEstimates":{"name":"Fact Set Estimates"},"factSetFundamentals":{"name":"Fact Set Fundamentals"},"analysts":{"name":"Analysts"},"globalNews":{"name":"Global News"},"IPOs":{"name":"IPOs"}},"campaignProperties":{"name":"Campaign Properties","optGroup":"Campaign Services","creativeDim":{"name":"Creative Dimension","optGroup":"Creative Properties"},"isBase":{"name":"Is Base Unit","optGroup":"Creative Properties"},"placementId":{"name":"Placement Id","optGroup":"Trafficking"},"siteId":{"name":"Site Id","optGroup":"Trafficking"},"campaignId":{"name":"Campaign ID","optGroup":"Trafficking"}},"tagVarService":{"name":"DSP Data Signal","optGroup":"Campaign Services","DataSignal1":{"name":"Data Signal 1"},"DataSignal2":{"name":"Data Signal 2"},"DataSignal3":{"name":"Data Signal 3"},"DataSignal4":{"name":"Data Signal 4"},"DataSignal5":{"name":"Data Signal 5"},"DataSignal6":{"name":"Data Signal 6"},"DataSignal7":{"name":"Data Signal 7"},"DataSignal8":{"name":"Data Signal 8"},"DataSignal9":{"name":"Data Signal 9"},"DataSignal10":{"name":"Data Signal 10"},"DataSignal11":{"name":"Data Signal 11"},"DataSignal12":{"name":"Data Signal 12"},"DataSignal13":{"name":"Data Signal 13"},"DataSignal14":{"name":"Data Signal 14"},"DataSignal15":{"name":"Data Signal 15"},"DataSignal16":{"name":"Data Signal 16"}}};
</script>
<script>
window.addEventListener("load", layoutLoaded, false);
function layoutLoaded(){
				}
</script>
<!-- saveFBPixel param should be set as true to check this flow -->

<style type="text/css">.jvx_685e3d5a15742loadingSpinner { position: absolute; border-top-color: transparent; height: 20px; vertical-align: middle; width: 20px; border: 3px solid #444; border-top-color: transparent; border-radius: 50%; -webkit-animation: spin 1s infinite linear; -moz-animation: spin 1s infinite linear; -ms-animation: spin 1s infinite linear; animation: spin 1s infinite linear; } @-webkit-keyframes spin { 100% { -webkit-transform: rotate(360deg); } } @-ms-keyframes spin { 100% { -ms-transform: rotate(360deg); } } @-moz-keyframes spin { 100% { -moz-transform: rotate(360deg); } } @-keyframes spin { 100% { transform: rotate(360deg); } }</style></head>
<body class="portrait160x600" style="">
<script id="jvxWidget" src="./jivoxWidgetApiV2.min.js.download" data-is-in-layout="1"></script>


<script>

/* viewability event related code block */
var adInVPForOneSec = false;
var timeoutHandle;
var timerRunning = false;

var adViewabilityDetectInit = function (visibilityThreshold) { 
    try {
        var boxElement;

        boxElement = document.querySelector('body');

        createObserver();

        function createObserver() {
            var observer;
            var options = {
                root: null,
                rootMargin: "0px",
                threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]
            };

            observer = new IntersectionObserver(handleIntersect, options);
            observer.observe(boxElement);
        }

        function handleIntersect(entries, observer) {
            entries.forEach(function (entry) {
                                if (entry.intersectionRatio > visibilityThreshold) {
                    if (!adInVPForOneSec && !timerRunning) {
                        timerRunning = true;
                        timeoutHandle = setTimeout(function () {
                            adInVPForOneSec = true;
                                                        if(typeof jvx_685e3d5a15742 != "undefined")
                            jvx_685e3d5a15742.recordEvent(73);
                            else 
                            recordEvent(73);
                                                    }, 1000);
                    }
                }
                if (timerRunning && entry.intersectionRatio < visibilityThreshold) {
                    window.clearTimeout(timeoutHandle);
                    timerRunning = false;
                }
            });
        }
    } catch(e){
            }
};
var assetVariantReportingQueue = [];	var omidImprReceived = false;			



var creativeResolveBeginTime = "1751006549000";
    creativeResolveBeginTime = new Date(Number(creativeResolveBeginTime));
var playerParamsMap = {"reportingURL":"https:\/\/evs.jivox.com","dspId":"996f2104-601b-4eda-b1f2-2d6660bf451e","campaignId":"181754","showAdChoices":"0","jvxVer":"2","isDynamic":"1","siteId":"674dd6df7af248b","es_pId":"3d372812","ts_pId":"3d372812","creativeUnitType":"19","bDim":"160x600","bUnitId":"1900","us_privacy":"${US_PRIVACY}","gdpr":"0","gdpr_consent":"","ap_DataSignal1":"22194047228","c_Auctionid":"ABAjH0i1VZJ1q96Rb_J6YQzuX5n4","ap_DataSignal3":"AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w","ap_DataSignal2":"GBL-DV360","r":"1751006552849734","cMacro":"https:\/\/googleads.g.doubleclick.net\/dbm\/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=","c_dv360_source_url":"https:\/\/www.w3schools.com\/css\/css_boxmodel.asp","objectName":"jvx_685e3d5a15742","adUnitId":"1900","jvxSessionId":"1751006554.7785","base":"1","creativeResolveBeginTime":"1751006549000","omid":"1","localTimeOffset":"-330","pageURL":"https:\/\/9c9616ddc64049079f426fb3b4733aae.safeframe.googlesyndication.com\/safeframe\/1-0-45\/html\/container.html","allowExp":"0","serverURL":"https:\/\/as.jivox.com","userInitAction":0};
var serverProtocolStr = 'https://';
var layoutRendererJSON = {"adIdx":"229482","layout":{"inbanner":{"19":{"160x600":{"adUnitIdx":"1900","scenes":{"scene-1":{"components":{"asset103":{"location":"0,0,160,600","options":[],"layerId":"1"},"asset108":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset116":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset123":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset126":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset134":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset137":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset145":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset147":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset152":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset157":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset166":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"},"asset167":{"location":"0,0,160,600","options":{"initVisible":0},"layerId":"1"}}}}}}}}};
var assetsDetailedJSON = {"customAsset.asset103":{"interactionIdentifier":"customAsset.asset103","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2025\/4\/a76754z67fd313d44bc0\/1\/160x600_EN\/HTML_M.html","label":"asset-asset103-67fd30f65618b","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay connects \u003Cbr\u003E you to the world\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003EExplore\u003Cbr\u003Etop tourist\u003Cbr\u003Eattractions\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExperience \u003Cbr\u003Ethe Franco-\u003Cbr\u003EVietanemse \u003Cbr\u003Eallure\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EDiscover\u003Cbr\u003Eonsen in the\u003Cbr\u003Emountains\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ETerms & conditions apply\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EElevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EBOOK NOW\u003C\/p\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset103', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset103');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                var elementColorTypeMap = {};\n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var elementColorType = elementColorTypeMap[elementId.id];\n                        if (elementColorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (elementColorType == 'gradient') {\n                          var colors = dynAssetData.split(',');\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset103', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'vapourBg');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset103', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"104","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":2,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel","additionalFiles":null,"dependentFiles":"160x600_EN\/css\/style.css,160x600_EN\/HTML_M.html,160x600_EN\/script\/greensock.js,160x600_EN\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"vapourBg\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandFlyLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\",\"dynamic\":0},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay connects  you to the world\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Exploretop touristattractions\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Experience the Franco-Vietanemse allure\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Discoveronsen in themountains\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Terms & conditions apply\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Elevate your experience in the sky\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"BOOK NOW\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2025-04-14 12:01:11","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":"false","endFrameText":"Elevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky","termsC_Text":"Terms & conditions apply","bg2":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg","endFrameCTA":"BOOK NOW","bg1":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg","bg4":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_160x600px.jpg","bg3":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_160x600px.jpg","bg5":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png","text3":"Experience\u003Cbr\u003Ethe bustling\u003Cbr\u003Ecity district","vapourBg":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/160x600_f5__vapour.png","text4":"Visit the\u003Cbr\u003Ecapital's \u003Cbr\u003Elatest\u003Cbr\u003Eattractions","jvxfr_Lang":"EN","text1":"Cathay Pacific \u003Cbr\u003Econnects you \u003Cbr\u003Eto the world","text2":"See the \u003Cbr\u003Edazzling \u003Cbr\u003EShanghai \u003Cbr\u003Ecityscape","tagText4":"Beijing","tagText3":"Beijing","tagText2":"Hangzhou","brandLogo":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_160x600.png","tagText1":"Shanghai"},"customAsset.asset108":{"interactionIdentifier":"customAsset.asset108","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2025\/4\/a76754z67f3b93504653\/1\/160xxx600_TC\/160x600_Font1\/HTML_M.html","label":"160xxx600_TC","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003ETC\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay connects \u003Cbr\u003E you to the world\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003EExplore\u003Cbr\u003Etop tourist\u003Cbr\u003Eattractions\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExperience \u003Cbr\u003Ethe Franco-\u003Cbr\u003EVietanemse \u003Cbr\u003Eallure\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EDiscover\u003Cbr\u003Eonsen in the\u003Cbr\u003Emountains\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ETerms & conditions apply\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EElevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EBOOK NOW\u003C\/p\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset108', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset108');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset108', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'vapourBg');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset108', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"110","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":6,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_TC","additionalFiles":null,"dependentFiles":"160xxx600_TC\/160x600_Font1\/css\/style.css,160xxx600_TC\/160x600_Font1\/HTML_M.html,160xxx600_TC\/160x600_Font1\/script\/greensock.js,160xxx600_TC\/160x600_Font1\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"vapourBg\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandFlyLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\",\"dynamic\":0},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"TC\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay connects  you to the world\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Exploretop touristattractions\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Experience the Franco-Vietanemse allure\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Discoveronsen in themountains\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Terms & conditions apply\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Elevate your experience in the sky\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"BOOK NOW\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2025-04-07 07:38:50","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":"false"},"customAsset.asset116":{"interactionIdentifier":"customAsset.asset116","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/4\/a76754z6620184e4928d\/1\/160x600_Font1\/HTML_M.html","label":"160x600_Font1","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003ETC\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003E\u570b\u6cf0\u822a\u7a7a\u003Cbr\u003E\u5e36\u4f60\u98db\u8e8d\u003Cbr\u003E\u4e16\u754c\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003E\u591a\u502b\u591a\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Toronto_DES_YYZ_016Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003E\u611f\u53d7\u591a\u5143\u003Cbr\u003E\u6d3b\u529b\u57ce\u5e02\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003E\u591a\u502b\u591a\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Toronto_DES_YYZ_018Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003E\u89aa\u8eab\u98fd\u89bd\u003Cbr\u003E\u7011\u5e03\u5947\u666f\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003E\u591a\u502b\u591a\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Toronto_DES_YYZ_009Y18_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003E\u63a2\u5c0b\u7279\u8272\u003Cbr\u003E\u85dd\u6587\u8857\u9053\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003E\u591a\u502b\u591a\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003E\u53d7\u689d\u6b3e\u53ca\u7d30\u5247\u7d04\u675f\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003E\u8e8d\u5347\u65c5\u904a\u003Cbr\u003E\u98db\u884c\u9ad4\u9a57\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003E\u7acb\u5373\u8a02\u7968\u003C\/p\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \/* JIVOX DYNAMIC CODE BEGIN *\/ var textWithScaleToFit = [];\n document.body.addEventListener('click', function(e){\n  var _e = e.target.getAttribute('data-user-handles-click');\n  if(_e == undefined || _e == 'false' || _e == '0'){\n    let cardClicked = findCard(e.target);\n    if(!!cardClicked && !!(dynamicAssetData['jvxfr'+cardClicked.id.substr(9)+'_clickThrough'])){\n        clickToOpenClickthru('jvxfr'+cardClicked.id.substr(9)+'_clickThrough', e);\n        if(parent.doAssetVariantReporting != undefined ){\n            parent.doAssetVariantReporting('click', 'asset116', 'jvxCCard_'+cardClicked.id.substr(9));\n         }\n        e.stopPropagation();\n    } else if(dynamicAssetData['clickThrough']){\n          parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n          e.stopPropagation();\n    } else if(parent?.dynamicJSONData?.['clickThrough']){\n        parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n    } else parent.openClickThrough('', e);\n  }\n });\n\nvar dynamicAssetData = parent.getDynamicAssetData('asset116');\n if(!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) != 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')){\n \tdynamicAssetData = parent.dynamicJSONData['asset-data'];\n }\nfor(var key in dynamicAssetData){\n    if(key.indexOf('.color') \u003E -1){\n        var textId = key.split('.')[0];\n        var elementId = document.getElementById(textId);\n        if(elementId != null){\n            elementId.style.color = dynamicAssetData[key]\n        }\n    }\n    else if(key.indexOf('BG_')\u003E -1){\n          var assetKey = key.replace('BG_','');\n          var elementId = document.getElementById(assetKey);\n          var elementClass = document.getElementsByClassName(assetKey)[0];\n                if(elementId!=null){\n                    var dynAssetData = dynamicAssetData[key];\n                    dynAssetData = dynAssetData.replace(\/;$\/, '')\n                    if(elementId instanceof SVGElement){\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}')\n                        var id = widgetData.type === 'photoshop'? 'cssid': 'id'\n                        var delimiter = widgetData.type === 'photoshop'? ';': ','\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id)\n                        if(element.colorType == 'solid'){\n                            elementId.style.fill = dynAssetData;\n                        }\n                        else if(element.colorType == 'gradient'){\n                            var colors = dynAssetData.split(delimiter);\n                            var allStopElements = document.querySelectorAll(element.path);\n                            if(allStopElements && allStopElements.length \u003E= 1)\n                                allStopElements.forEach(function(stopEl,idx){\n                                   if(colors[idx])\n                                        stopEl.setAttribute('stop-color', colors[idx])\n                                });\n                            }\n                         }\n                    else\n                        elementId.style.background = dynAssetData;\n               }\n    }\n    else {\n        var elementId = document.getElementById(key);\n        if(elementId != null){\n            var elementType = elementId.getAttribute('data-el-type');\n            if(elementType == 'image'||elementType == 'video'){\n                \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                if(dynamicAssetData[key]){\n                                        \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                    if(elementType == 'image' && typeof(dynamicAssetData[key]) === 'object'){\n                                        \/* replace image url to cloudinary with additional params, if user edits dynamic image with cloudinary. *\/\n                        function getCloudinaryUrl(transformationType, rowTransformationStyles) {\n                            if(transformationType){\n                                const slotWidth = parseInt(rowTransformationStyles?.slotWidth);\n                                const slotHeight = parseInt(rowTransformationStyles?.slotHeight);\n                                if(slotWidth && slotHeight) {\n                                    const slotWidthHeightParam = 'h_' + slotHeight + ',w_' + slotWidth;\n                                    const cloudinaryType = (transformationType === 'generative-fill') ? 'b_gen_fill' : 'e_background_removal'\n                                    \/\/ Store the dynamic part of the URL as variables\n                                    const dynamicProperties = 'image\/upload\/'+ cloudinaryType + (transformationType === 'generative-fill' ? ',c_fill_pad,g_auto,' + slotWidthHeightParam : '');\n                                    \/\/ Extract the domain and path after it\n                                    const imageUrl = dynamicAssetData[key]?.url;\n                                    const imageUrlSplit = imageUrl.split('.jivox.com');\n                                    const cdnDomain = imageUrlSplit[0];\n                                    const imgPath = imageUrlSplit[1];\n                                    \/* Construct the modified URL using dynamic variables *\/\n                                    const cloudinaryUrl = cdnDomain + '.jivox.com\/' + dynamicProperties + imgPath;\n                                    return cloudinaryUrl;\n                                } else {\n                                    return dynamicAssetData[key]?.url;\n                                }\n                            } else {\n                                return dynamicAssetData[key]?.url;\n                            }\n                        }\n                                        \/* Set all the image attributes to div element *\/\n                        function setAttributes(elements, attributes) {\n                            Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                            })\n                        }\n                                        \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                        function applyTransformationStyles(transformationStyles, imgUrl, type) {\n                            let attr = elementId.getAttributeNames().reduce((prev,attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                            var divElement = document.createElement('div');\n                            var parentDiv = elementId.parentNode;\n                            parentDiv.insertBefore(divElement, elementId);\n                            setAttributes(divElement, attr);\n                            elementId.parentNode.removeChild(elementId); \n                            const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                            const defaultImgUrl = 'url(\"' + dynamicAssetData[key]?.url + '\")';\n                            if(imgUrl && type === 'CSS') {\n                                divElement.style.backgroundImage += transformationImgUrl;\n                            } else if(imgUrl && type === 'CLOUDINARY') {\n                                const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                                async function getImage(url) { const image = new Image(); image.src = url; await image.decode(); return image; }\n                                getImage(imgUrl).then(() =\u003E {\n                                    divElement.style.backgroundImage += transformationImgUrl;\n                                }).catch((err) =\u003E {\n                                    const defaultStyles = 'background-repeat: no-repeat;'\n                                    divElement.style.backgroundImage += defaultImgUrl;\n                                    const sendErrorObj = {'error':{}}\n                                    sendErrorObj['error']['message'] = 'Dynamic asset replaced without advanced formatting transformation. Please contact support if the issue persists.' \n                                    window.top.postMessage(sendErrorObj)\n                                });\n                            }\n                                \/* Remove the 'src' attribute *\/\n                            divElement.removeAttribute('src');\n                                \/* Re-attach the event listener to the div element *\/\n                            divElement.addEventListener('click', function(event){\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if('URL_' + imgAssetId){\n                                    clickToOpenClickthru('URL_' + imgAssetId, event); \n                                }\n                                if(parent.doAssetVariantReporting != undefined ){\n                                    parent.doAssetVariantReporting('click', 'asset116', assetVariantId);\n                                } event.stopPropagation();\n                            });\n                            var srcAttr = divElement.getAttribute('src');\n                            if(transformationStyles && transformationStyles?.elementStyles){\n                                divElement.style.cssText += transformationStyles?.elementStyles;\n                            }\n                        }\n                        const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                        const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                        const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                        const columnAssetTransformationType = columnTransformationObj?.transformation?.type;\n                        const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                        const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                        const imageUrl = dynamicAssetData[key]?.url;\n                        if(imageUrl){ \n                            if(rowTransformationObj?.type === 'CLOUDINARY' && columnTransformationObj?.type === 'CSS' ) {\n                                const cloudinaryTransformationType = rowTransformationObj?.type === 'CLOUDINARY' && rowAssetTransformationType; \n                                const cloudinaryUrl = getCloudinaryUrl(cloudinaryTransformationType, rowTransformationStyles);     \/* Apply cloudinary params and modify the image url to cloudinary *\/\n                                const transformationStyles = columnTransformationStyles;\n                                if(transformationStyles){\n                                    applyTransformationStyles(transformationStyles, cloudinaryUrl, 'CLOUDINARY')     \/* Apply transformation css over cloudinary image *\/\n                                }\n                            } else if(rowTransformationObj?.type === 'CLOUDINARY'){     \/* Apply row level transformation css *\/\n                                const cloudinaryTransformationType = rowTransformationObj?.type === 'CLOUDINARY' && rowAssetTransformationType; \n                                const cloudinaryUrl = getCloudinaryUrl(cloudinaryTransformationType, rowTransformationStyles);     \/* Apply cloudinary params and modify the image url to cloudinary *\/\n                                if(cloudinaryUrl) {\n                                    elementId.setAttribute('src', cloudinaryUrl);\n                                    \/* Add an error handler to detect loading errors *\/\n                                    elementId.onerror = function(...err) {\n                                        if (!this.errorHandled) { \/* Check if error handling has already been attempted *\/\n                                            this.errorHandled = true; \/* Set flag to true to indicate that error handling has been attempted *\/\n                                            \/* If there's an error loading the image, replace the src attribute with the default URL *\/\n                                            this.setAttribute('src', imageUrl);\n                                            const slotWidthHeight = 'width: ' + rowTransformationStyles?.slotWidth + '; height: ' + rowTransformationStyles?.slotHeight + ';'\n                                            this.style.cssText += 'object-fit: cover;' + slotWidthHeight\n                                            const sendErrorObj = {'error':{}}\n                                            sendErrorObj['error']['message'] = 'Dynamic asset replaced without advanced formatting transformation. Please contact support if the issue persists.' \n                                            window.top.postMessage(sendErrorObj)\n                                        };\n                                    };\n                                }\n                            }else if(rowTransformationStyles && rowTransformationObj?.type === 'CSS'){     \/* Apply row level transformation css *\/\n                                applyTransformationStyles(rowTransformationStyles, imageUrl, 'CSS') \n                            } else if(columnTransformationStyles && columnTransformationObj?.type === 'CSS'){   \/* Apply column level transformation css *\/\n                                applyTransformationStyles(columnTransformationStyles, imageUrl, 'CSS') \n                            }\n                        } \n                                        \/* ASSET TRANSFORMATION CODE ENDS *\/\n                    }else{\n                        elementId.setAttribute('src', dynamicAssetData[key]);\n                    }\n                }\n            }else if(elementType == 'text') {\n                if(dynamicAssetData[key]){\n                    if(textWithScaleToFit.includes(key)){\n                        var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width'),\n                            heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                        heightVal = parseInt(heightVal.replace('px', ''));\n                        widthVal = parseInt(widthVal.replace('px', ''));\n                        elementId.style.width = widthVal+'px';\n                        elementId.style.height = heightVal+'px';\n                    }\n                    elementId.innerHTML = dynamicAssetData[key];\n                }\n            }\n        }\n    }\n}\n\n function clickToOpenClickthru(urlColumnName, e={}){\n    if(dynamicAssetData[urlColumnName]){\n        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n    } else {\n        parent.openClickThrough('', e);\n    }\n }\n function findCard(el) {\n   if(el?.id?.substr(0,9) == 'jvxCCard_') {\n       return el;\n    } else {\n        return el?.parentNode && findCard(el.parentNode)\n    }\n}\n\n\n function autoSizeText(elem) {\n   var el, elements, i, len, fontSize;\n   elements = document.getElementById(elem);\n   if(elements == null){\n      return;\n   }\n   fontSize = [];\n   el = elements;\n   fontSize.push((function(el){\n      var resizeText, fontSizeArr;\n      resizeText = function(){\n         var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight,prevFontSize;\n         if(el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == ''){\n               var elComputedFontSize = window.getComputedStyle(el).fontSize;\n               if(elComputedFontSize){\n                  myFontSize = elComputedFontSize;\n               }else{\n                  myFontSize = '50px';\n               }\n         }else{\n            myFontSize = el.style.fontSize;\n         }\n         prevFontSize = myFontSize;\n         elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n         el.style.fontSize = elNewFontSize;\n            if(prevScrollHeight == el.scrollHeight){ \n                var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                    if(lineHeight.includes('px')){\n                          fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                          lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                          el.style.lineHeight = lineHeight;\n                    }\n                    else if(lineHeight.includes('rem')){\n                           fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -3))*16) - (parseInt(prevFontSize.slice(0, -2))); \n                            lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                            el.style.lineHeight = lineHeight;\n                    }\n             }\n         return elNewFontSize;\n      };\n      fontSizeArr = [];\n      var firstIter = true;\n      var elPrevScrollHeight = el.scrollHeight;\n      while(el.scrollHeight \u003E el.offsetHeight){\n         if(!firstIter && elPrevScrollHeight == el.scrollHeight){\n            \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get in to a recursion and let's break it *\/\n            break;\n         }\n         elPrevScrollHeight = el.scrollHeight;\n         fontSizeArr.push(resizeText());\n         firstIter = false;\n      }\n      return fontSizeArr;\n   })(el));\n   return fontSize;\n}\nfunction reapplyAutoSizeText(){\n   \n}\nwindow.addEventListener('load', function(){reapplyAutoSizeText();var autoSizeTextInt = setInterval(reapplyAutoSizeText,500);setTimeout(function(){clearInterval(autoSizeTextInt);},20000);}, false);\n\/\/# sourceURL=dynamicJvxScript.js\n\n\n\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset116', 'bg2');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset116', 'bg3');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset116', 'bg4');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset116', 'brandLogo');}\n\/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"118","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":12,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_SC","additionalFiles":null,"dependentFiles":"160x600_Font1\/css\/style.css,160x600_Font1\/HTML_M.html,160x600_Font1\/script\/greensock.js,160x600_Font1\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Toronto_DES_YYZ_016Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"gradient2\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Toronto_DES_YYZ_018Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"gradient3\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Toronto_DES_YYZ_009Y18_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"gradient4\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandFlyLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"TC\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"\u570b\u6cf0\u822a\u7a7a\u5e36\u4f60\u98db\u8e8d\u4e16\u754c\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"\u591a\u502b\u591a\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"\u611f\u53d7\u591a\u5143\u6d3b\u529b\u57ce\u5e02\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"\u591a\u502b\u591a\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"\u89aa\u8eab\u98fd\u89bd\u7011\u5e03\u5947\u666f\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"\u591a\u502b\u591a\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"\u63a2\u5c0b\u7279\u8272\u85dd\u6587\u8857\u9053\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"\u591a\u502b\u591a\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"\u53d7\u689d\u6b3e\u53ca\u7d30\u5247\u7d04\u675f\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"\u8e8d\u5347\u65c5\u904a\u98db\u884c\u9ad4\u9a57\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"\u7acb\u5373\u8a02\u7968\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\",\"icon\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/4\/a76754z6620184e4928d\/1\/160x600_Font1\/HTML_M.html\",\"iconDimension\":\"[160,600]\",\"iconFileName\":\"HTML_M.html\",\"label\":\"160x600_Font1\",\"baseUrl\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/4\/a76754z6620184e4928d\/1\/160x600_Font1\/\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-06-11 15:58:43","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":null,"isNonCarouselOfferFeed":null},"customAsset.asset123":{"interactionIdentifier":"customAsset.asset123","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/10\/a76754z6704045aee5cc\/1\/FR_160x600\/HTML_M.html","label":"FR_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \/* JIVOX DYNAMIC CODE BEGIN *\/ var textWithScaleToFit = [];\n document.body.addEventListener('click', function(e){\n  var _e = e.target.getAttribute('data-user-handles-click');\n  if(_e == undefined || _e == 'false' || _e == '0'){\n    let cardClicked = findCard(e.target);\n    if(!!cardClicked && !!(dynamicAssetData['jvxfr'+cardClicked.id.substr(9)+'_clickThrough'])){\n        clickToOpenClickthru('jvxfr'+cardClicked.id.substr(9)+'_clickThrough', e);\n        if(parent.doAssetVariantReporting != undefined ){\n            parent.doAssetVariantReporting('click', 'asset123', 'jvxCCard_'+cardClicked.id.substr(9));\n         }\n        e.stopPropagation();\n    } else if(dynamicAssetData['clickThrough']){\n          parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n          e.stopPropagation();\n    } else if(parent?.dynamicJSONData?.['clickThrough']){\n        parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n    } else parent.openClickThrough('', e);\n  }\n });\n\n var fontLoadObject = {};\n  function fontLoaded(elementObj=[], font){\n     let elementIdLen = elementObj.length;\n     for(let id = 0; id \u003C elementIdLen; id++){\n         if(!fontLoadObject[font]?.loadedDivs[elementObj[id]]){\n            fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n            autoSizeText(elementObj[id]);\n        }\n    }\n }\n function isFontAvailable(font, obj) {\n var timeOut = 5000;\n var delay = 200;\n var interval = 0;\n var timeElapsed = 0;\n function checkFont() {\n    var node = document.createElement('span');\n    node.innerHTML = 'giItT1WQy@!-\/#';\n    node.style.position      = 'absolute';\n    node.style.left          = '-1000px';\n    node.style.top           = '-1000px';\n    node.style.fontSize      = '300px';\n     node.style.fontFamily    = 'sans-serif';\n    node.style.fontVariant   = 'normal';\n    node.style.fontStyle     = 'normal';\n    node.style.fontWeight    = 'normal';\n    node.style.letterSpacing = '0';\n    document.body.appendChild(node);\n    var width = node.offsetWidth;\n    node.style.fontFamily = font+','+node.style.fontFamily;\n    var returnVal = false;\n    if((node && node.offsetWidth != width) || timeElapsed \u003E=timeOut || font.includes('sans-serif')) {\n        fontLoadObject[font].loaded = true;\n        if(interval)\n            clearInterval(interval);\n        fontLoaded(obj.id, font);\n        returnVal = true;\n    }\n    if(node) {\n        node.parentNode.removeChild(node);\n        node = null;\n    }\n    timeElapsed += delay;\n    return returnVal;\n }\n if(!checkFont()) {\n    interval = setInterval(checkFont, delay);\n }\n }\nvar dynamicAssetData = parent.getDynamicAssetData('asset123');\n if(!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) != 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')){\n \tdynamicAssetData = parent.dynamicJSONData['asset-data'];\n }\nfor(var key in dynamicAssetData){\n    if(key.indexOf('.color') \u003E -1){\n        var textId = key.split('.')[0];\n        var elementId = document.getElementById(textId);\n        if(elementId != null){\n            elementId.style.color = dynamicAssetData[key]\n        }\n    }\n    else if(key.indexOf('BG_')\u003E -1){\n          var assetKey = key.replace('BG_','');\n          var elementId = document.getElementById(assetKey);\n          var elementClass = document.getElementsByClassName(assetKey)[0];\n                if(elementId!=null){\n                    var dynAssetData = dynamicAssetData[key];\n                    dynAssetData = dynAssetData.replace(\/;$\/, '')\n                    if(elementId instanceof SVGElement){\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}')\n                        var id = widgetData.type === 'photoshop'? 'cssid': 'id'\n                        var delimiter = widgetData.type === 'photoshop'? ';': ','\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id)\n                        if(element.colorType == 'solid'){\n                            elementId.style.fill = dynAssetData;\n                        }\n                        else if(element.colorType == 'gradient'){\n                            var colors = dynAssetData.split(delimiter);\n                            var allStopElements = document.querySelectorAll(element.path);\n                            if(allStopElements && allStopElements.length \u003E= 1)\n                                allStopElements.forEach(function(stopEl,idx){\n                                   if(colors[idx])\n                                        stopEl.setAttribute('stop-color', colors[idx])\n                                });\n                            }\n                         }\n                    else\n                        elementId.style.background = dynAssetData;\n               }\n    }\n    else {\n        var elementId = document.getElementById(key);\n        if(elementId != null){\n            var elementType = elementId.getAttribute('data-el-type');\n            if(elementType == 'image'|| elementType == 'video'){\n                \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                if(dynamicAssetData[key]){\n                                        \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                    if(elementType == 'image' && typeof(dynamicAssetData[key]) === 'object'){\n                                        \/* Set all the image attributes to div element *\/\n                        function setAttributes(elements, attributes) {\n                            Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                            })\n                        }\n                                        \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                        function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                            let attr = elementId.getAttributeNames().reduce((prev,attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                            var divElement = document.createElement('div');\n                            var parentDiv = elementId.parentNode;\n                            parentDiv.insertBefore(divElement, elementId);\n                            setAttributes(divElement, attr);\n                            elementId.parentNode.removeChild(elementId); \n                            const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                            if(imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                            } \n                                \/* Remove the 'src' attribute *\/\n                            divElement.removeAttribute('src');\n                                \/* Re-attach the event listener to the div element *\/\n                            divElement.addEventListener('click', function(event){\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if('URL_' + imgAssetId){\n                                    clickToOpenClickthru('URL_' + imgAssetId, event); \n                                }\n                                if(parent.doAssetVariantReporting != undefined ){\n                                    parent.doAssetVariantReporting('click', 'asset123', assetVariantId);\n                                } event.stopPropagation();\n                            });\n                            if(rowTransformStyles && rowTransformStyles?.elementStyles){\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                            } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                            }\n                        }\n                        const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                        const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                        const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                        const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                        const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                        const imageUrl = dynamicAssetData[key]?.url;\n                        const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                        if(imageUrl || genAiUrl){ \n                            if(rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                            }else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                            }\n                        } \n                                        \/* ASSET TRANSFORMATION CODE ENDS *\/\n                    }else{\n                        elementId.setAttribute('src', dynamicAssetData[key]);\n                    }\n                }\n            }else if(elementType == 'text') {\n                if(dynamicAssetData[key]){\n                    if(textWithScaleToFit.includes(key)){\n                        var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width'),\n                            heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                        heightVal = parseInt(heightVal.replace('px', ''));\n                        widthVal = parseInt(widthVal.replace('px', ''));\n                        elementId.style.width = widthVal+'px !important';\n                        elementId.style.height = heightVal+'px !important';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                                if(!fontLoadObject[font]){\n                                    fontLoadObject[font] = {};\n                                    fontLoadObject[font].id = [];\n                                    fontLoadObject[font].id.push(key);\n                                    fontLoadObject[font].loaded = false;\n                                    fontLoadObject[font].requested = false;\n                                    fontLoadObject[font].loadedDivs = {};\n                                 }\n                                else{\n                                    fontLoadObject[font].id.push(key);\n                                }\n                    }\n                    elementId.innerHTML = dynamicAssetData[key];\n                }\n            }\n        }\n    }\n}\n\n function clickToOpenClickthru(urlColumnName, e={}){\n    if(dynamicAssetData[urlColumnName]){\n        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n    } else {\n        parent.openClickThrough('', e);\n    }\n }\n function findCard(el) {\n   if(el?.id?.substr(0,9) == 'jvxCCard_') {\n       return el;\n    } else {\n        return el?.parentNode && findCard(el.parentNode)\n    }\n}\n\n\n function autoSizeText(elem) {\n   var el, elements, i, len, fontSize;\n   elements = document.getElementById(elem);\n   if(elements == null){\n      return;\n   }\n   fontSize = [];\n   el = elements;\n   fontSize.push((function(el){\n      var resizeText, fontSizeArr;\n      resizeText = function(){\n         var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight,prevFontSize;\n         if(el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == ''){\n               var elComputedFontSize = window.getComputedStyle(el).fontSize;\n               if(elComputedFontSize){\n                  myFontSize = elComputedFontSize;\n               }else{\n                  myFontSize = '50px';\n               }\n         }else{\n            myFontSize = el.style.fontSize;\n         }\n         prevFontSize = myFontSize;\n         elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n         el.style.fontSize = elNewFontSize;\n            if(prevScrollHeight == el.scrollHeight){ \n                var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                    if(lineHeight.includes('px')){\n                          fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                          lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                          el.style.lineHeight = lineHeight;\n                    }\n                    else if(lineHeight.includes('rem')){\n                           fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -3))*16) - (parseInt(prevFontSize.slice(0, -2))); \n                            lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                            el.style.lineHeight = lineHeight;\n                    }\n             }\n         return elNewFontSize;\n      };\n      fontSizeArr = [];\n      var firstIter = true;\n      var elPrevScrollHeight = el.scrollHeight;\n      while(el.scrollHeight \u003E el.offsetHeight){\n         if(!firstIter && elPrevScrollHeight == el.scrollHeight){\n            \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get in to a recursion and let's break it *\/\n            break;\n         }\n         elPrevScrollHeight = el.scrollHeight;\n         fontSizeArr.push(resizeText());\n         firstIter = false;\n      }\n      return fontSizeArr;\n   })(el));\n   return fontSize;\n}\n function applyScaleToFit(){\n    for (const [font] of Object.entries(fontLoadObject)) {\n        if(!fontLoadObject[font].loaded && !fontLoadObject[font].requested){\n            isFontAvailable(font,fontLoadObject[font]);\n            fontLoadObject[font].requested = true;\n        }\n        else if(fontLoadObject[font].loaded){\n            fontLoaded(fontLoadObject[font].id, font);\n        }\n    }\n }\nwindow.addEventListener('load', function(){applyScaleToFit();}, false);\n\/\/# sourceURL=dynamicJvxScript.js\n\n\n\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'bg1');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'bg2');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'bg3');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'bg4');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'bg5');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset123', 'brandLogo');}\n\/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"127","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":19,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_FR","additionalFiles":null,"dependentFiles":"FR_160x600\/css\/style.css,FR_160x600\/HTML_M.html,FR_160x600\/script\/greensock.js,FR_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\",\"icon\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/10\/a76754z6704045aee5cc\/1\/FR_160x600\/HTML_M.html\",\"iconDimension\":\"[160,600]\",\"iconFileName\":\"HTML_M.html\",\"label\":\"FR_160x600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-10-07 21:27:01","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":null,"isNonCarouselOfferFeed":null},"customAsset.asset126":{"interactionIdentifier":"customAsset.asset126","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/10\/a76754z6704070cc9904\/1\/NL_160x600\/HTML_M.html","label":"NL_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \/* JIVOX DYNAMIC CODE BEGIN *\/ var textWithScaleToFit = [];\n document.body.addEventListener('click', function(e){\n  var _e = e.target.getAttribute('data-user-handles-click');\n  if(_e == undefined || _e == 'false' || _e == '0'){\n    let cardClicked = findCard(e.target);\n    if(!!cardClicked && !!(dynamicAssetData['jvxfr'+cardClicked.id.substr(9)+'_clickThrough'])){\n        clickToOpenClickthru('jvxfr'+cardClicked.id.substr(9)+'_clickThrough', e);\n        if(parent.doAssetVariantReporting != undefined ){\n            parent.doAssetVariantReporting('click', 'asset126', 'jvxCCard_'+cardClicked.id.substr(9));\n         }\n        e.stopPropagation();\n    } else if(dynamicAssetData['clickThrough']){\n          parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n          e.stopPropagation();\n    } else if(parent?.dynamicJSONData?.['clickThrough']){\n        parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n    } else parent.openClickThrough('', e);\n  }\n });\n\n var fontLoadObject = {};\n  function fontLoaded(elementObj=[], font){\n     let elementIdLen = elementObj.length;\n     for(let id = 0; id \u003C elementIdLen; id++){\n         if(!fontLoadObject[font]?.loadedDivs[elementObj[id]]){\n            fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n            autoSizeText(elementObj[id]);\n        }\n    }\n }\n function isFontAvailable(font, obj) {\n var timeOut = 5000;\n var delay = 200;\n var interval = 0;\n var timeElapsed = 0;\n function checkFont() {\n    var node = document.createElement('span');\n    node.innerHTML = 'giItT1WQy@!-\/#';\n    node.style.position      = 'absolute';\n    node.style.left          = '-1000px';\n    node.style.top           = '-1000px';\n    node.style.fontSize      = '300px';\n     node.style.fontFamily    = 'sans-serif';\n    node.style.fontVariant   = 'normal';\n    node.style.fontStyle     = 'normal';\n    node.style.fontWeight    = 'normal';\n    node.style.letterSpacing = '0';\n    document.body.appendChild(node);\n    var width = node.offsetWidth;\n    node.style.fontFamily = font+','+node.style.fontFamily;\n    var returnVal = false;\n    if((node && node.offsetWidth != width) || timeElapsed \u003E=timeOut || font.includes('sans-serif')) {\n        fontLoadObject[font].loaded = true;\n        if(interval)\n            clearInterval(interval);\n        fontLoaded(obj.id, font);\n        returnVal = true;\n    }\n    if(node) {\n        node.parentNode.removeChild(node);\n        node = null;\n    }\n    timeElapsed += delay;\n    return returnVal;\n }\n if(!checkFont()) {\n    interval = setInterval(checkFont, delay);\n }\n }\nvar dynamicAssetData = parent.getDynamicAssetData('asset126');\n if(!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) != 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')){\n \tdynamicAssetData = parent.dynamicJSONData['asset-data'];\n }\nfor(var key in dynamicAssetData){\n    if(key.indexOf('.color') \u003E -1){\n        var textId = key.split('.')[0];\n        var elementId = document.getElementById(textId);\n        if(elementId != null){\n            elementId.style.color = dynamicAssetData[key]\n        }\n    }\n    else if(key.indexOf('BG_')\u003E -1){\n          var assetKey = key.replace('BG_','');\n          var elementId = document.getElementById(assetKey);\n          var elementClass = document.getElementsByClassName(assetKey)[0];\n                if(elementId!=null){\n                    var dynAssetData = dynamicAssetData[key];\n                    dynAssetData = dynAssetData.replace(\/;$\/, '')\n                    if(elementId instanceof SVGElement){\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}')\n                        var id = widgetData.type === 'photoshop'? 'cssid': 'id'\n                        var delimiter = widgetData.type === 'photoshop'? ';': ','\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id)\n                        if(element.colorType == 'solid'){\n                            elementId.style.fill = dynAssetData;\n                        }\n                        else if(element.colorType == 'gradient'){\n                            var colors = dynAssetData.split(delimiter);\n                            var allStopElements = document.querySelectorAll(element.path);\n                            if(allStopElements && allStopElements.length \u003E= 1)\n                                allStopElements.forEach(function(stopEl,idx){\n                                   if(colors[idx])\n                                        stopEl.setAttribute('stop-color', colors[idx])\n                                });\n                            }\n                         }\n                    else\n                        elementId.style.background = dynAssetData;\n               }\n    }\n    else {\n        var elementId = document.getElementById(key);\n        if(elementId != null){\n            var elementType = elementId.getAttribute('data-el-type');\n            if(elementType == 'image'|| elementType == 'video'){\n                \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                if(dynamicAssetData[key]){\n                                        \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                    if(elementType == 'image' && typeof(dynamicAssetData[key]) === 'object'){\n                                        \/* Set all the image attributes to div element *\/\n                        function setAttributes(elements, attributes) {\n                            Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                            })\n                        }\n                                        \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                        function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                            let attr = elementId.getAttributeNames().reduce((prev,attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                            var divElement = document.createElement('div');\n                            var parentDiv = elementId.parentNode;\n                            parentDiv.insertBefore(divElement, elementId);\n                            setAttributes(divElement, attr);\n                            elementId.parentNode.removeChild(elementId); \n                            const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                            if(imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                            } \n                                \/* Remove the 'src' attribute *\/\n                            divElement.removeAttribute('src');\n                                \/* Re-attach the event listener to the div element *\/\n                            divElement.addEventListener('click', function(event){\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if('URL_' + imgAssetId){\n                                    clickToOpenClickthru('URL_' + imgAssetId, event); \n                                }\n                                if(parent.doAssetVariantReporting != undefined ){\n                                    parent.doAssetVariantReporting('click', 'asset126', assetVariantId);\n                                } event.stopPropagation();\n                            });\n                            if(rowTransformStyles && rowTransformStyles?.elementStyles){\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                            } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                            }\n                        }\n                        const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                        const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                        const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                        const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                        const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                        const imageUrl = dynamicAssetData[key]?.url;\n                        const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                        if(imageUrl || genAiUrl){ \n                            if(rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                            }else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                            }\n                        } \n                                        \/* ASSET TRANSFORMATION CODE ENDS *\/\n                    }else{\n                        elementId.setAttribute('src', dynamicAssetData[key]);\n                    }\n                }\n            }else if(elementType == 'text') {\n                if(dynamicAssetData[key]){\n                    if(textWithScaleToFit.includes(key)){\n                        var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width'),\n                            heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                        heightVal = parseInt(heightVal.replace('px', ''));\n                        widthVal = parseInt(widthVal.replace('px', ''));\n                        elementId.style.width = widthVal+'px !important';\n                        elementId.style.height = heightVal+'px !important';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                                if(!fontLoadObject[font]){\n                                    fontLoadObject[font] = {};\n                                    fontLoadObject[font].id = [];\n                                    fontLoadObject[font].id.push(key);\n                                    fontLoadObject[font].loaded = false;\n                                    fontLoadObject[font].requested = false;\n                                    fontLoadObject[font].loadedDivs = {};\n                                 }\n                                else{\n                                    fontLoadObject[font].id.push(key);\n                                }\n                    }\n                    elementId.innerHTML = dynamicAssetData[key];\n                }\n            }\n        }\n    }\n}\n\n function clickToOpenClickthru(urlColumnName, e={}){\n    if(dynamicAssetData[urlColumnName]){\n        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n    } else {\n        parent.openClickThrough('', e);\n    }\n }\n function findCard(el) {\n   if(el?.id?.substr(0,9) == 'jvxCCard_') {\n       return el;\n    } else {\n        return el?.parentNode && findCard(el.parentNode)\n    }\n}\n\n\n function autoSizeText(elem) {\n   var el, elements, i, len, fontSize;\n   elements = document.getElementById(elem);\n   if(elements == null){\n      return;\n   }\n   fontSize = [];\n   el = elements;\n   fontSize.push((function(el){\n      var resizeText, fontSizeArr;\n      resizeText = function(){\n         var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight,prevFontSize;\n         if(el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == ''){\n               var elComputedFontSize = window.getComputedStyle(el).fontSize;\n               if(elComputedFontSize){\n                  myFontSize = elComputedFontSize;\n               }else{\n                  myFontSize = '50px';\n               }\n         }else{\n            myFontSize = el.style.fontSize;\n         }\n         prevFontSize = myFontSize;\n         elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n         el.style.fontSize = elNewFontSize;\n            if(prevScrollHeight == el.scrollHeight){ \n                var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                    if(lineHeight.includes('px')){\n                          fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                          lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                          el.style.lineHeight = lineHeight;\n                    }\n                    else if(lineHeight.includes('rem')){\n                           fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -3))*16) - (parseInt(prevFontSize.slice(0, -2))); \n                            lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                            el.style.lineHeight = lineHeight;\n                    }\n             }\n         return elNewFontSize;\n      };\n      fontSizeArr = [];\n      var firstIter = true;\n      var elPrevScrollHeight = el.scrollHeight;\n      while(el.scrollHeight \u003E el.offsetHeight){\n         if(!firstIter && elPrevScrollHeight == el.scrollHeight){\n            \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get in to a recursion and let's break it *\/\n            break;\n         }\n         elPrevScrollHeight = el.scrollHeight;\n         fontSizeArr.push(resizeText());\n         firstIter = false;\n      }\n      return fontSizeArr;\n   })(el));\n   return fontSize;\n}\n function applyScaleToFit(){\n    for (const [font] of Object.entries(fontLoadObject)) {\n        if(!fontLoadObject[font].loaded && !fontLoadObject[font].requested){\n            isFontAvailable(font,fontLoadObject[font]);\n            fontLoadObject[font].requested = true;\n        }\n        else if(fontLoadObject[font].loaded){\n            fontLoaded(fontLoadObject[font].id, font);\n        }\n    }\n }\nwindow.addEventListener('load', function(){applyScaleToFit();}, false);\n\/\/# sourceURL=dynamicJvxScript.js\n\n\n\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'bg1');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'bg2');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'bg3');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'bg4');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'bg5');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset126', 'brandLogo');}\n\/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"130","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":22,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_NL","additionalFiles":null,"dependentFiles":"NL_160x600\/css\/style.css,NL_160x600\/HTML_M.html,NL_160x600\/script\/greensock.js,NL_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\",\"icon\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/10\/a76754z6704070cc9904\/1\/NL_160x600\/HTML_M.html\",\"iconDimension\":\"[160,600]\",\"iconFileName\":\"HTML_M.html\",\"label\":\"NL_160x600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-10-07 21:38:48","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":null,"isNonCarouselOfferFeed":null},"customAsset.asset134":{"interactionIdentifier":"customAsset.asset134","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/10\/a76754z67040e1b5db4d\/1\/DE_160x600\/HTML_M.html","label":"DE_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \/* JIVOX DYNAMIC CODE BEGIN *\/ var textWithScaleToFit = [];\n document.body.addEventListener('click', function(e){\n  var _e = e.target.getAttribute('data-user-handles-click');\n  if(_e == undefined || _e == 'false' || _e == '0'){\n    let cardClicked = findCard(e.target);\n    if(!!cardClicked && !!(dynamicAssetData['jvxfr'+cardClicked.id.substr(9)+'_clickThrough'])){\n        clickToOpenClickthru('jvxfr'+cardClicked.id.substr(9)+'_clickThrough', e);\n        if(parent.doAssetVariantReporting != undefined ){\n            parent.doAssetVariantReporting('click', 'asset134', 'jvxCCard_'+cardClicked.id.substr(9));\n         }\n        e.stopPropagation();\n    } else if(dynamicAssetData['clickThrough']){\n          parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n          e.stopPropagation();\n    } else if(parent?.dynamicJSONData?.['clickThrough']){\n        parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n    } else parent.openClickThrough('', e);\n  }\n });\n\n var fontLoadObject = {};\n  function fontLoaded(elementObj=[], font){\n     let elementIdLen = elementObj.length;\n     for(let id = 0; id \u003C elementIdLen; id++){\n         if(!fontLoadObject[font]?.loadedDivs[elementObj[id]]){\n            fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n            autoSizeText(elementObj[id]);\n        }\n    }\n }\n function isFontAvailable(font, obj) {\n var timeOut = 5000;\n var delay = 200;\n var interval = 0;\n var timeElapsed = 0;\n function checkFont() {\n    var node = document.createElement('span');\n    node.innerHTML = 'giItT1WQy@!-\/#';\n    node.style.position      = 'absolute';\n    node.style.left          = '-1000px';\n    node.style.top           = '-1000px';\n    node.style.fontSize      = '300px';\n     node.style.fontFamily    = 'sans-serif';\n    node.style.fontVariant   = 'normal';\n    node.style.fontStyle     = 'normal';\n    node.style.fontWeight    = 'normal';\n    node.style.letterSpacing = '0';\n    document.body.appendChild(node);\n    var width = node.offsetWidth;\n    node.style.fontFamily = font+','+node.style.fontFamily;\n    var returnVal = false;\n    if((node && node.offsetWidth != width) || timeElapsed \u003E=timeOut || font.includes('sans-serif')) {\n        fontLoadObject[font].loaded = true;\n        if(interval)\n            clearInterval(interval);\n        fontLoaded(obj.id, font);\n        returnVal = true;\n    }\n    if(node) {\n        node.parentNode.removeChild(node);\n        node = null;\n    }\n    timeElapsed += delay;\n    return returnVal;\n }\n if(!checkFont()) {\n    interval = setInterval(checkFont, delay);\n }\n }\nvar dynamicAssetData = parent.getDynamicAssetData('asset134');\n if(!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) != 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')){\n \tdynamicAssetData = parent.dynamicJSONData['asset-data'];\n }\nfor(var key in dynamicAssetData){\n    if(key.indexOf('.color') \u003E -1){\n        var textId = key.split('.')[0];\n        var elementId = document.getElementById(textId);\n        if(elementId != null){\n            elementId.style.color = dynamicAssetData[key]\n        }\n    }\n    else if(key.indexOf('BG_')\u003E -1){\n          var assetKey = key.replace('BG_','');\n          var elementId = document.getElementById(assetKey);\n          var elementClass = document.getElementsByClassName(assetKey)[0];\n                if(elementId!=null){\n                    var dynAssetData = dynamicAssetData[key];\n                    dynAssetData = dynAssetData.replace(\/;$\/, '')\n                    if(elementId instanceof SVGElement){\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}')\n                        var id = widgetData.type === 'photoshop'? 'cssid': 'id'\n                        var delimiter = widgetData.type === 'photoshop'? ';': ','\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id)\n                        if(element.colorType == 'solid'){\n                            elementId.style.fill = dynAssetData;\n                        }\n                        else if(element.colorType == 'gradient'){\n                            var colors = dynAssetData.split(delimiter);\n                            var allStopElements = document.querySelectorAll(element.path);\n                            if(allStopElements && allStopElements.length \u003E= 1)\n                                allStopElements.forEach(function(stopEl,idx){\n                                   if(colors[idx])\n                                        stopEl.setAttribute('stop-color', colors[idx])\n                                });\n                            }\n                         }\n                    else\n                        elementId.style.background = dynAssetData;\n               }\n    }\n    else {\n        var elementId = document.getElementById(key);\n        if(elementId != null){\n            var elementType = elementId.getAttribute('data-el-type');\n            if(elementType == 'image'|| elementType == 'video'){\n                \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                if(dynamicAssetData[key]){\n                                        \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                    if(elementType == 'image' && typeof(dynamicAssetData[key]) === 'object'){\n                                        \/* Set all the image attributes to div element *\/\n                        function setAttributes(elements, attributes) {\n                            Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                            })\n                        }\n                                        \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                        function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                            let attr = elementId.getAttributeNames().reduce((prev,attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                            var divElement = document.createElement('div');\n                            var parentDiv = elementId.parentNode;\n                            parentDiv.insertBefore(divElement, elementId);\n                            setAttributes(divElement, attr);\n                            elementId.parentNode.removeChild(elementId); \n                            const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                            if(imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                            } \n                                \/* Remove the 'src' attribute *\/\n                            divElement.removeAttribute('src');\n                                \/* Re-attach the event listener to the div element *\/\n                            divElement.addEventListener('click', function(event){\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if('URL_' + imgAssetId){\n                                    clickToOpenClickthru('URL_' + imgAssetId, event); \n                                }\n                                if(parent.doAssetVariantReporting != undefined ){\n                                    parent.doAssetVariantReporting('click', 'asset134', assetVariantId);\n                                } event.stopPropagation();\n                            });\n                            if(rowTransformStyles && rowTransformStyles?.elementStyles){\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                            } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                            }\n                        }\n                        const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                        const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                        const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                        const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                        const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                        const imageUrl = dynamicAssetData[key]?.url;\n                        const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                        if(imageUrl || genAiUrl){ \n                            if(rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                            }else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                            }\n                        } \n                                        \/* ASSET TRANSFORMATION CODE ENDS *\/\n                    }else{\n                        elementId.setAttribute('src', dynamicAssetData[key]);\n                    }\n                }\n            }else if(elementType == 'text') {\n                if(dynamicAssetData[key]){\n                    if(textWithScaleToFit.includes(key)){\n                        var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width'),\n                            heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                        heightVal = parseInt(heightVal.replace('px', ''));\n                        widthVal = parseInt(widthVal.replace('px', ''));\n                        elementId.style.width = widthVal+'px !important';\n                        elementId.style.height = heightVal+'px !important';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                                if(!fontLoadObject[font]){\n                                    fontLoadObject[font] = {};\n                                    fontLoadObject[font].id = [];\n                                    fontLoadObject[font].id.push(key);\n                                    fontLoadObject[font].loaded = false;\n                                    fontLoadObject[font].requested = false;\n                                    fontLoadObject[font].loadedDivs = {};\n                                 }\n                                else{\n                                    fontLoadObject[font].id.push(key);\n                                }\n                    }\n                    elementId.innerHTML = dynamicAssetData[key];\n                }\n            }\n        }\n    }\n}\n\n function clickToOpenClickthru(urlColumnName, e={}){\n    if(dynamicAssetData[urlColumnName]){\n        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n    } else {\n        parent.openClickThrough('', e);\n    }\n }\n function findCard(el) {\n   if(el?.id?.substr(0,9) == 'jvxCCard_') {\n       return el;\n    } else {\n        return el?.parentNode && findCard(el.parentNode)\n    }\n}\n\n\n function autoSizeText(elem) {\n   var el, elements, i, len, fontSize;\n   elements = document.getElementById(elem);\n   if(elements == null){\n      return;\n   }\n   fontSize = [];\n   el = elements;\n   fontSize.push((function(el){\n      var resizeText, fontSizeArr;\n      resizeText = function(){\n         var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight,prevFontSize;\n         if(el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == ''){\n               var elComputedFontSize = window.getComputedStyle(el).fontSize;\n               if(elComputedFontSize){\n                  myFontSize = elComputedFontSize;\n               }else{\n                  myFontSize = '50px';\n               }\n         }else{\n            myFontSize = el.style.fontSize;\n         }\n         prevFontSize = myFontSize;\n         elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n         el.style.fontSize = elNewFontSize;\n            if(prevScrollHeight == el.scrollHeight){ \n                var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                    if(lineHeight.includes('px')){\n                          fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                          lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                          el.style.lineHeight = lineHeight;\n                    }\n                    else if(lineHeight.includes('rem')){\n                           fontLineHeightRatio =  (parseInt(lineHeight.slice(0, -3))*16) - (parseInt(prevFontSize.slice(0, -2))); \n                            lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                            el.style.lineHeight = lineHeight;\n                    }\n             }\n         return elNewFontSize;\n      };\n      fontSizeArr = [];\n      var firstIter = true;\n      var elPrevScrollHeight = el.scrollHeight;\n      while(el.scrollHeight \u003E el.offsetHeight){\n         if(!firstIter && elPrevScrollHeight == el.scrollHeight){\n            \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get in to a recursion and let's break it *\/\n            break;\n         }\n         elPrevScrollHeight = el.scrollHeight;\n         fontSizeArr.push(resizeText());\n         firstIter = false;\n      }\n      return fontSizeArr;\n   })(el));\n   return fontSize;\n}\n function applyScaleToFit(){\n    for (const [font] of Object.entries(fontLoadObject)) {\n        if(!fontLoadObject[font].loaded && !fontLoadObject[font].requested){\n            isFontAvailable(font,fontLoadObject[font]);\n            fontLoadObject[font].requested = true;\n        }\n        else if(fontLoadObject[font].loaded){\n            fontLoaded(fontLoadObject[font].id, font);\n        }\n    }\n }\nwindow.addEventListener('load', function(){applyScaleToFit();}, false);\n\/\/# sourceURL=dynamicJvxScript.js\n\n\n\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'bg1');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'bg2');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'bg3');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'bg4');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'bg5');}\nif(parent.doAssetVariantReporting != undefined ){parent.doAssetVariantReporting('impression', 'asset134', 'brandLogo');}\n\/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"138","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":30,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_DE","additionalFiles":null,"dependentFiles":"DE_160x600\/css\/style.css,DE_160x600\/HTML_M.html,DE_160x600\/script\/greensock.js,DE_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\",\"icon\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/10\/a76754z67040e1b5db4d\/1\/DE_160x600\/HTML_M.html\",\"iconDimension\":\"[160,600]\",\"iconFileName\":\"HTML_M.html\",\"label\":\"DE_160x600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-10-07 22:08:43","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":null,"isNonCarouselOfferFeed":null},"customAsset.asset137":{"interactionIdentifier":"customAsset.asset137","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/11\/a76754z6746ef5224fd7\/1\/160x600_Font1\/HTML_M.html","label":"asset-asset167-6746ef3ce7888","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset137', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset137');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset137', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset137', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"141","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":33,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_IT","additionalFiles":null,"dependentFiles":"160x600_Font1\/css\/style.css,160x600_Font1\/HTML_M.html,160x600_Font1\/script\/greensock.js,160x600_Font1\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-11-27 05:07:36","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null},"customAsset.asset145":{"interactionIdentifier":"customAsset.asset145","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/10\/a76754z670414958555f\/1\/ES_160x600\/HTML_M.html","label":"ES_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset145', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset145');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset145', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset145', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"149","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":41,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_ES","additionalFiles":null,"dependentFiles":"ES_160x600\/css\/style.css,ES_160x600\/HTML_M.html,ES_160x600\/script\/greensock.js,ES_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\",\"icon\":\"https:\/\/jivoxassets.s3.amazonaws.com\/widgets\/2024\/10\/a76754z670414958555f\/1\/ES_160x600\/HTML_M.html\",\"iconDimension\":\"[160,600]\",\"iconFileName\":\"HTML_M.html\",\"label\":\"ES_160x600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-10-28 07:09:35","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null},"customAsset.asset147":{"interactionIdentifier":"customAsset.asset147","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/12\/a76754z676ac2145327b\/1\/160x600_Font1\/HTML_M.html","label":"160x600_Font1","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset147', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset147');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset147', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset147', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"152","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":43,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_KO","additionalFiles":null,"dependentFiles":"160x600_Font1\/css\/style.css,160x600_Font1\/HTML_M.html,160x600_Font1\/script\/greensock.js,160x600_Font1\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-12-24 09:15:58","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null},"customAsset.asset152":{"interactionIdentifier":"customAsset.asset152","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/12\/a76754z676ac031c1159\/1\/JP_160x600\/HTML_M.html","label":"JP_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay connects \u003Cbr\u003E you to the world\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003EExplore\u003Cbr\u003Etop tourist\u003Cbr\u003Eattractions\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExperience \u003Cbr\u003Ethe Franco-\u003Cbr\u003EVietanemse \u003Cbr\u003Eallure\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EDiscover\u003Cbr\u003Eonsen in the\u003Cbr\u003Emountains\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003E\u5229\u7528\u898f\u7d04\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EElevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv id=\"ctaContainer\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EBOOK NOW\u003C\/p\u003E\r\n            \u003C!-- \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003E\u0110\u1eb6T V\u00c9 CHUY\u1ebeN BAY NGAY\u003C\/p\u003E --\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset152', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    textWithScaleToFit.push('endFrameCTA');\n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset152');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset152', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset152', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"158","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":48,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_JP","additionalFiles":null,"dependentFiles":"JP_160x600\/css\/style.css,JP_160x600\/HTML_M.html,JP_160x600\/script\/greensock.js,JP_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay connects  you to the world\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Exploretop touristattractions\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Experience the Franco-Vietanemse allure\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Discoveronsen in themountains\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"\u5229\u7528\u898f\u7d04\u304c\u9069\u7528\u3055\u308c\u307e\u3059\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Elevate your experience in the sky\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"BOOK NOW\",\"dynamic\":1,\"scaleToFit\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-12-24 09:08:02","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null},"customAsset.asset157":{"interactionIdentifier":"customAsset.asset157","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/11\/a76754z672b44c15aa52\/1\/TH_160x600\/HTML_M.html","label":"TH_160x600","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay connects \u003Cbr\u003E you to the world\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003EExplore\u003Cbr\u003Etop tourist\u003Cbr\u003Eattractions\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExperience \u003Cbr\u003Ethe Franco-\u003Cbr\u003EVietanemse \u003Cbr\u003Eallure\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EDiscover\u003Cbr\u003Eonsen in the\u003Cbr\u003Emountains\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003E\u0e40\u0e1b\u0e47\u0e19\u0e44\u0e1b\u0e15\u0e32\u0e21\u0e02\u0e49\u0e2d\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e41\u0e25\u0e30\u0e40\u0e07\u0e37\u0e48\u0e2d\u0e19\u0e44\u0e02\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EElevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EBOOK NOW\u003C\/p\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset157', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset157');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                let isPreviewRequest = 0;\n                try {\n                  isPreviewRequest = parent?.isPreviewRequest || 0;\n                } catch {}\n                if(isPreviewRequest && typeof objectName !== 'undefined')  { \n                  window.top.postMessage({ type: \"tagRender\", payload: { state:\"started\", objectName } }, \"*\");\n                }\n                let replacedAssets = 0;\n                var elementColorTypeMap = {};\n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var elementColorType = elementColorTypeMap[elementId.id];\n                        if (elementColorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (elementColorType == 'gradient') {\n                          var colors = dynAssetData.split(',');\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          let bgImageUrl= \"\";\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                bgImageUrl = imgUrl;\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset157', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                              \/* PREVIEW VISIBILITY CODE START *\/\n                          if(isPreviewRequest) {                    \n                            \/\/ Track asset loading completion\n                            let assetProcessed = false;\n\n                            function onAssetReplaced() {\n                              replacedAssets++;\n                              if (replacedAssets === 6) {\n                                if(assetID !== undefined) {\n                                  const iframeElement = window.frameElement;        \n                                  if(iframeElement) {\n                                    window.top.postMessage({ type: \"tagRender\", payload: { state:\"completed\", objectName } }, \"*\");\n                                  }\n                                }\n                              }\n                            }\n                            \/\/Function to check if image is loaded when we have div element.\n                            function checkBackgroundImageLoaded(bgImageUrl, callback) {\n                              const img = new Image();  \/\/ Create a new image element and check if the image is loaded since we can't check div backgroundUrl is loaded.\n                              img.src = bgImageUrl;\n                              if (img.complete) {\n                                callback(true); \/\/ Image is already loaded from cache\n                              } else {\n                                img.onload = function() {\n                                  callback(true);\n                                };\n\n                                img.onerror = function() {\n                                  callback(false);\n                                };\n                              }\n                            }\n                            if (bgImageUrl && !assetProcessed) {    \/\/Check if Div background is loaded since Image element will be removed and div background will be added to support css transformations.\n                              assetProcessed = true;\n                              checkBackgroundImageLoaded(bgImageUrl, function(isLoaded) {\n                                  if (isLoaded) {\n                                      onAssetReplaced();\n                                  } else {\n                                      onAssetReplaced();\n                                  }\n                              });\n                            }\n                            const img = elementId;\n                            if(img && img.tagName === \"IMG\" && !assetProcessed) {   \/\/Check if image is loaded for image element\n                              assetProcessed = true;\n                              if (img.complete) {\n                                onAssetReplaced();\n                              } else {\n                                img.onload = onAssetReplaced;\n                              }\n                            }\n                          }\n                              \/* PREVIEW VISIBILITY CODE END *\/\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset157', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"164","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":53,"paramString":null,"adFormat":null,"brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_TH","additionalFiles":null,"dependentFiles":"TH_160x600\/css\/style.css,TH_160x600\/HTML_M.html,TH_160x600\/script\/greensock.js,TH_160x600\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay connects  you to the world\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Exploretop touristattractions\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Experience the Franco-Vietanemse allure\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Discoveronsen in themountains\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"\u0e40\u0e1b\u0e47\u0e19\u0e44\u0e1b\u0e15\u0e32\u0e21\u0e02\u0e49\u0e2d\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e41\u0e25\u0e30\u0e40\u0e07\u0e37\u0e48\u0e2d\u0e19\u0e44\u0e02\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Elevate your experience in the sky\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"BOOK NOW\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2025-05-06 11:29:00","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null},"customAsset.asset166":{"interactionIdentifier":"customAsset.asset166","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2025\/5\/a76754z681a2ee3c6333\/1\/160x600_VI\/HTML_M.html","label":"160x600_VI","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay connects \u003Cbr\u003E you to the world\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003EExplore\u003Cbr\u003Etop tourist\u003Cbr\u003Eattractions\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExperience \u003Cbr\u003Ethe Franco-\u003Cbr\u003EVietanemse \u003Cbr\u003Eallure\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EDiscover\u003Cbr\u003Eonsen in the\u003Cbr\u003Emountains\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003E\u00c1p d\u1ee5ng c\u00e1c \u0110i\u1ec1u kho\u1ea3n v\u00e0 \u0110i\u1ec1u ki\u1ec7n\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EElevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EBOOK NOW\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset166', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset166');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                let isPreviewRequest = 0;\n                try {\n                  isPreviewRequest = parent?.isPreviewRequest || 0;\n                } catch {}\n                if(isPreviewRequest && typeof objectName !== 'undefined')  { \n                  window.top.postMessage({ type: \"tagRender\", payload: { state:\"started\", objectName } }, \"*\");\n                }\n                let replacedAssets = 0;\n                var elementColorTypeMap = {};\n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var elementColorType = elementColorTypeMap[elementId.id];\n                        if (elementColorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (elementColorType == 'gradient') {\n                          var colors = dynAssetData.split(',');\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          let bgImageUrl= \"\";\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                bgImageUrl = imgUrl;\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset166', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                              \/* PREVIEW VISIBILITY CODE START *\/\n                          if(isPreviewRequest) {                    \n                            \/\/ Track asset loading completion\n                            let assetProcessed = false;\n\n                            function onAssetReplaced() {\n                              replacedAssets++;\n                              if (replacedAssets === 6) {\n                                if(assetID !== undefined) {\n                                  const iframeElement = window.frameElement;        \n                                  if(iframeElement) {\n                                    window.top.postMessage({ type: \"tagRender\", payload: { state:\"completed\", objectName } }, \"*\");\n                                  }\n                                }\n                              }\n                            }\n                            \/\/Function to check if image is loaded when we have div element.\n                            function checkBackgroundImageLoaded(bgImageUrl, callback) {\n                              const img = new Image();  \/\/ Create a new image element and check if the image is loaded since we can't check div backgroundUrl is loaded.\n                              img.src = bgImageUrl;\n                              if (img.complete) {\n                                callback(true); \/\/ Image is already loaded from cache\n                              } else {\n                                img.onload = function() {\n                                  callback(true);\n                                };\n\n                                img.onerror = function() {\n                                  callback(false);\n                                };\n                              }\n                            }\n                            if (bgImageUrl && !assetProcessed) {    \/\/Check if Div background is loaded since Image element will be removed and div background will be added to support css transformations.\n                              assetProcessed = true;\n                              checkBackgroundImageLoaded(bgImageUrl, function(isLoaded) {\n                                  if (isLoaded) {\n                                      onAssetReplaced();\n                                  } else {\n                                      onAssetReplaced();\n                                  }\n                              });\n                            }\n                            const img = elementId;\n                            if(img && img.tagName === \"IMG\" && !assetProcessed) {   \/\/Check if image is loaded for image element\n                              assetProcessed = true;\n                              if (img.complete) {\n                                onAssetReplaced();\n                              } else {\n                                img.onload = onAssetReplaced;\n                              }\n                            }\n                          }\n                              \/* PREVIEW VISIBILITY CODE END *\/\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset166', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"173","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":62,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_VI","additionalFiles":null,"dependentFiles":"160x600_VI\/.vscode\/settings.json,160x600_VI\/css\/style.css,160x600_VI\/HTML_M.html,160x600_VI\/script\/greensock.js,160x600_VI\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay connects  you to the world\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Exploretop touristattractions\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Experience the Franco-Vietanemse allure\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Discoveronsen in themountains\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"\u00c1p d\u1ee5ng c\u00e1c \u0110i\u1ec1u kho\u1ea3n v\u00e0 \u0110i\u1ec1u ki\u1ec7n\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Elevate your experience in the sky\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"BOOK NOW\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2025-05-06 11:47:00","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":"false"},"customAsset.asset167":{"interactionIdentifier":"customAsset.asset167","icon":"https:\/\/assets.jivox.com\/assets\/widgets\/2024\/11\/a76754z672b954386c84\/1\/160x600_Font1\/HTML_M.html","label":"160x600_Font1 (3)","data":"\u003C!Doctype html\u003E\r\n\u003Chead\u003E\r\n  \u003Cmeta charset=\"utf-8\"\u003E\r\n  \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\r\n  \u003Cmeta name=\"authoring-tool\" content=\"creative_tool_name\"\u003E \r\n  \u003Cmeta name=\"creative-template-format\" content=\"Jivox\"\u003E \r\n  \u003Cmeta name=\"creative-size\" content=\"160x600\"\u003E\r\n  \u003Clink rel=\"stylesheet\" href=\"css\/style.css\"\u003E\r\n  \u003Cscript src=\"script\/greensock.js\"\u003E\u003C\/script\u003E\r\n  \u003Cscript src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/3.6.4\/jquery.min.js\"\u003E\u003C\/script\u003E\r\n\u003C\/head\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv id=\"container\"\u003E\r\n        \u003Cdiv id=\"firstFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg1\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\"\u003E\r\n            \u003Cimg id=\"wheel\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Wheel\/wheel_V2.png\"\u003E\r\n            \u003Cimg id=\"tag\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Travel_Bgs\/160x600_f5_Tag_Image.png\"\u003E\r\n            \u003Cp data-el-type=\"text\" class=\"Lang\" style=\"display: none;\" id=\"jvxfr_Lang\"\u003EEN\u003C\/p\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text\" id=\"text1\"\u003ECathay Pacific \u003Cbr\u003Econecta con\u003Cbr\u003E el mundo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy1\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText1\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg2\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient2\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text2\" id=\"text2\"\u003ESumergirse en la \u003Cbr\u003Ebelleza del \u003Cbr\u003ELago Oeste\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy2\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText2\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg3\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient3\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text3\" id=\"text3\"\u003EExplorar el \u003Cbr\u003Eencantador \u003Cbr\u003Ecasco \u003Cbr\u003Eantiguo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy3\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText3\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n\r\n\r\n            \u003Cimg data-el-type=\"image\" id=\"bg4\" src=\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\"\u003E\r\n            \u003Cimg id=\"gradient4\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/gradient\/160x600.png\"\u003E\r\n            \u003Cdiv class=\"copy\" id=\"copy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"text text4\" id=\"text4\"\u003EExperimentar \u003Cbr\u003Eel bullicio\u003Cbr\u003E de la ciudad\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"tagcopy\" id=\"tagcopy4\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"tagText\" id=\"tagText4\"\u003EShanghai\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n        \u003Cdiv id=\"endFrame\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"bg5\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\"\u003E\r\n            \u003Cimg id=\"vapourBg\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Vapours\/160x600_f5__vapour.png\"\u003E\r\n            \u003Cimg id=\"brandFlyLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76755\/Assets_V2\/brand_fly_logo.png\"\u003E\r\n            \u003Cimg data-el-type=\"image\" id=\"brandLogo\" src=\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\"\u003E\r\n            \u003Cdiv class=\"termsC\" id=\"termsC\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"termsC_Text\"  id=\"termsC_Text\"\u003ESe aplican t\u00e9rminos y condiciones\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"endFrameCopy\" id=\"endFrameCopy\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameText\"  id=\"endFrameText\"\u003EEleva tu \u003Cbr\u003Eexperiencia \u003Cbr\u003Ea bordo\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n            \u003Cdiv class=\"ctaContainer\"\u003E\r\n                \u003Cp data-el-type=\"text\" class=\"endFrameCTA\" id=\"endFrameCTA\"\u003EReserva ahora\u003C\/p\u003E\r\n            \u003C\/div\u003E\r\n        \u003C\/div\u003E\r\n    \u003C\/div\u003E\r\n    \u003Cscript src=\"script\/jivox.js\"\u003E\u003C\/script\u003E\n\u003Cscript type=\"text\/javascript\" jvx_handlers=\"dynamic\"\u003E\n      \n    \n    \/* JIVOX DYNAMIC CODE BEGIN *\/\n    var textWithScaleToFit = [];\n    \n        document.body.addEventListener('click', function(e) {\n          var _e = e.target.getAttribute('data-user-handles-click');\n          if (_e == undefined || _e == 'false' || _e == '0') {\n            let cardClicked = findCard(e.target);\n            if (!!cardClicked && !!dynamicAssetData['jvxfr' + cardClicked.id.substr(9) + '_clickThrough']) {\n              clickToOpenClickthru('jvxfr' + cardClicked.id.substr(9) + '_clickThrough', e);\n              if (parent.doAssetVariantReporting !== undefined) {\n                parent.doAssetVariantReporting('click', 'asset167', 'jvxCCard_' + cardClicked.id.substr(9));\n              }\n              e.stopPropagation();\n            } else if (dynamicAssetData['clickThrough']) {\n              parent.openClickThrough(dynamicAssetData['clickThrough'], e);\n              e.stopPropagation();\n            } else if (parent?.dynamicJSONData?.['clickThrough']) {\n              parent.openClickThrough(parent?.dynamicJSONData?.['clickThrough'], e);\n            } else {\n              parent.openClickThrough('', e);\n            }\n          }\n        });\n        \n    \n              var fontLoadObject = {};\n\n              function fontLoaded(elementObj=[], font) {\n                let elementIdLen = elementObj.length;\n                for (let id = 0; id \u003C elementIdLen; id++) {\n                  if (!fontLoadObject[font]?.loadedDivs[elementObj[id]]) {\n                    fontLoadObject[font].loadedDivs[elementObj[id]] = 1;\n                    autoSizeText(elementObj[id]);\n                  }\n                }\n              }\n\n              function isFontAvailable(font, obj) {\n                var timeOut = 5000;\n                var delay = 200;\n                var interval = 0;\n                var timeElapsed = 0;\n\n                function checkFont() {\n                  var node = document.createElement('span');\n                  node.innerHTML = 'giItT1WQy@!-\/#';\n                  node.style.position = 'absolute';\n                  node.style.left = '-1000px';\n                  node.style.top = '-1000px';\n                  node.style.fontSize = '300px';\n                  node.style.fontFamily = 'sans-serif';\n                  node.style.fontVariant = 'normal';\n                  node.style.fontStyle = 'normal';\n                  node.style.fontWeight = 'normal';\n                  node.style.letterSpacing = '0';\n                  document.body.appendChild(node);\n\n                  var width = node.offsetWidth;\n                  node.style.fontFamily = font + ',' + node.style.fontFamily;\n\n                  var returnVal = false;\n                  if ((node && node.offsetWidth != width) || timeElapsed \u003E= timeOut || font.includes('sans-serif')) {\n                    fontLoadObject[font].loaded = true;\n                    if (interval) clearInterval(interval);\n                    fontLoaded(obj.id, font);\n                    returnVal = true;\n                  }\n\n                  if (node) {\n                    node.parentNode.removeChild(node);\n                    node = null;\n                  }\n\n                  timeElapsed += delay;\n                  return returnVal;\n                }\n\n                if (!checkFont()) {\n                  interval = setInterval(checkFont, delay);\n                }\n              }\n            \n    \n            var dynamicAssetData = parent.getDynamicAssetData('asset167');\n            \n                if (!Object.keys(dynamicAssetData).length && typeof(parent.dynamicJSONData) !== 'undefined' && parent.dynamicJSONData.hasOwnProperty('asset-data')) {\n                  dynamicAssetData = parent.dynamicJSONData['asset-data'];\n                }\n                \n                for (var key in dynamicAssetData) {\n                  if (key.indexOf('.color') \u003E -1) {\n                    var textId = key.split('.')[0];\n                    var elementId = document.getElementById(textId);\n                    if (elementId !== null) {\n                      elementId.style.color = dynamicAssetData[key];\n                    }\n                  } else if (key.indexOf('BG_') \u003E -1) {\n                    var assetKey = key.replace('BG_', '');\n                    var elementId = document.getElementById(assetKey);\n                    var elementClass = document.getElementsByClassName(assetKey)[0];\n                    if (elementId !== null) {\n                      var dynAssetData = dynamicAssetData[key];\n                      dynAssetData = dynAssetData.replace(\/;$\/, '');\n                      if (elementId instanceof SVGElement) {\n                        var widgetData = JSON.parse(parent.getRequiredAssetDetail(assetID)?.widgetData || '{}');\n                        var id = widgetData.type === 'photoshop' ? 'cssid' : 'id';\n                        var delimiter = widgetData.type === 'photoshop' ? ';' : ',';\n                        var element = widgetData.elements.find(element =\u003E element?.[id] == elementId?.id);\n                        if (element.colorType == 'solid') {\n                          elementId.style.fill = dynAssetData;\n                        } else if (element.colorType == 'gradient') {\n                          var colors = dynAssetData.split(delimiter);\n                          var allStopElements = document.querySelectorAll(element.path);\n                          if (allStopElements && allStopElements.length \u003E= 1) {\n                            allStopElements.forEach(function(stopEl, idx) {\n                              if (colors[idx]) {\n                                stopEl.setAttribute('stop-color', colors[idx]);\n                              }\n                            });\n                          }\n                        }\n                      } else {\n                        elementId.style.background = dynAssetData;\n                      }\n                    }\n                  } else {\n                    var elementId = document.getElementById(key);\n                    if (elementId !== null) {\n                      var elementType = elementId.getAttribute('data-el-type');\n                      if (elementType == 'image' || elementType == 'video') {\n                        \/* Sample Object structure if asset Transformation is enabled - {\"jvx_image_1\":{\"icon\":{\"url\":\"https:\/\/jivoxdevuploads.s3.amazonaws.com\/as\/files\/44939\/test5.png\",\"rowLevelTransformation\":{\"type\":\"css\",\"transformation\":{\"type\":\"smartFit\"}}}} *\/\n                        if (dynamicAssetData[key]) {\n                                    \/* ASSET TRANSFORMATION CODE BEGIN *\/\n                          if (elementType == 'image' && typeof(dynamicAssetData[key]) === 'object') {\n                            \/* Set all the image attributes to div element *\/\n                            function setAttributes(elements, attributes) {\n                              Object.keys(attributes).forEach(function(name) {\n                                elements.setAttribute(name, attributes[name]);\n                              });\n                            }\n                            \/* Apply CSS transformation styles to the image and container by using slot dimension *\/\n                            function applyTransformationStyles(imgUrl, columnTransformStyles, rowTransformStyles) {\n                              let attr = elementId.getAttributeNames().reduce((prev, attribute) =\u003E ({...prev, [attribute]: elementId.getAttribute(attribute)}), {});\n                              var divElement = document.createElement('div');\n                              var parentDiv = elementId.parentNode;\n                              parentDiv.insertBefore(divElement, elementId);\n                              setAttributes(divElement, attr);\n                              elementId.parentNode.removeChild(elementId);\n                              const transformationImgUrl = 'url(\"' + imgUrl + '\")';\n                              if (imgUrl) {\n                                divElement.style.backgroundImage = transformationImgUrl;\n                              }\n                              \/* Remove the 'src' attribute *\/\n                              divElement.removeAttribute('src');\n                              \/* Re-attach the event listener to the div element *\/\n                              divElement.addEventListener('click', function(event) {\n                                const imgAssetId = event?.target?.id;\n                                const assetVariantId = imgAssetId.replace(\"'\", '\\\/');\n                                if ('URL_' + imgAssetId) {\n                                  clickToOpenClickthru('URL_' + imgAssetId, event);\n                                }\n                                if (parent.doAssetVariantReporting !== undefined) {\n                                  parent.doAssetVariantReporting('click', 'asset167', assetVariantId);\n                                }\n                                event.stopPropagation();\n                              });\n                              if(rowTransformStyles && rowTransformStyles?.elementStyles) {\n                                divElement.style.cssText += rowTransformStyles?.elementStyles;\n                              } else if(columnTransformStyles && columnTransformStyles?.elementStyles) {\n                                divElement.style.cssText += columnTransformStyles?.elementStyles;\n                              }\n                            }\n                            const rowTransformationObj = dynamicAssetData[key]?.rowLevelTransformation;\n                            const columnTransformationObj = dynamicAssetData[key]?.columnLevelTransformation;\n                            const rowAssetTransformationType = rowTransformationObj?.transformation?.type;\n                            const rowTransformationStyles = rowTransformationObj?.transformation?.styles;\n                            const columnTransformationStyles = columnTransformationObj?.transformation?.styles;\n                            const imageUrl = dynamicAssetData[key]?.url;\n                            const genAiUrl = rowTransformationObj?.transformation?.generatedUrl;\n                            if(imageUrl || genAiUrl){\n                              if (rowTransformationObj?.type === 'GEN_AI') {\n                                elementId.setAttribute('src', genAiUrl);     \/* Update GEN_AI image url *\/\n                              } else if(rowTransformationObj?.type === 'CSS' || columnTransformationObj?.type === 'CSS') {\n                                applyTransformationStyles(imageUrl, columnTransformationStyles, rowTransformationStyles);\n                              } \n                            }\n                                      \/* ASSET TRANSFORMATION CODE ENDS *\/\n                          } else {\n                            elementId.setAttribute('src', dynamicAssetData[key]);\n                          }\n                        }\n                      } else if (elementType == 'text') {\n                        if (dynamicAssetData[key]) {\n                          if (textWithScaleToFit.includes(key)) {\n                            var widthVal = window.getComputedStyle(elementId, null).getPropertyValue('width');\n                            var heightVal = window.getComputedStyle(elementId, null).getPropertyValue('height');\n                            heightVal = parseInt(heightVal.replace('px', ''));\n                            widthVal = parseInt(widthVal.replace('px', ''));\n                            elementId.style.width = widthVal + 'px';\n                            elementId.style.height = heightVal + 'px';\n                            let font = window.getComputedStyle(elementId, null).fontFamily;\n                            if (!fontLoadObject[font]) {\n                              fontLoadObject[font] = {};\n                              fontLoadObject[font].id = [];\n                              fontLoadObject[font].id.push(key);\n                              fontLoadObject[font].loaded = false;\n                              fontLoadObject[font].requested = false;\n                              fontLoadObject[font].loadedDivs = {};\n                            } else {\n                              fontLoadObject[font].id.push(key);\n                            }\n                          }\n                          elementId.innerHTML = dynamicAssetData[key];\n                        }\n                      }\n                    }\n                  }\n                }\n                \n    \n                function clickToOpenClickthru(urlColumnName, e = {}) {\n                    if (dynamicAssetData[urlColumnName]) {\n                        parent.openClickThrough(dynamicAssetData[urlColumnName], e);\n                    } else {\n                        parent.openClickThrough('', e);\n                    }\n                }\n                \n                function findCard(el) {\n                    if (el?.id?.substr(0, 9) === 'jvxCCard_') {\n                        return el;\n                    } else {\n                        return el?.parentNode && findCard(el.parentNode);\n                    }\n                }\n    \n    \n                function autoSizeText(elem) {\n                var el, elements, i, len, fontSize;\n                elements = document.getElementById(elem);\n                if (elements == null) {\n                    return;\n                }\n                fontSize = [];\n                el = elements;\n                fontSize.push((function(el) {\n                    var resizeText, fontSizeArr;\n                    resizeText = function() {\n                    var elNewFontSize, myFontSize = 0, prevScrollHeight = el.scrollHeight, prevFontSize;\n                    if (el.style.fontSize == undefined || el.style.fontSize == null || el.style.fontSize == '') {\n                        var elComputedFontSize = window.getComputedStyle(el).fontSize;\n                        if (elComputedFontSize) {\n                        myFontSize = elComputedFontSize;\n                        } else {\n                        myFontSize = '50px';\n                        }\n                    } else {\n                        myFontSize = el.style.fontSize;\n                    }\n                    prevFontSize = myFontSize;\n                    elNewFontSize = (parseInt(myFontSize.slice(0, -2)) - 1) + 'px';\n                    el.style.fontSize = elNewFontSize;\n                    if (prevScrollHeight == el.scrollHeight) {\n                        var lineHeight = window.getComputedStyle(el).getPropertyValue('line-height');\n                        if (lineHeight.includes('px')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -2))) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        } else if (lineHeight.includes('rem')) {\n                        fontLineHeightRatio = (parseInt(lineHeight.slice(0, -3)) * 16) - (parseInt(prevFontSize.slice(0, -2)));\n                        lineHeight = (parseInt(elNewFontSize.slice(0, -2))) + fontLineHeightRatio + 'px';\n                        el.style.lineHeight = lineHeight;\n                        }\n                    }\n                    return elNewFontSize;\n                    };\n                    fontSizeArr = [];\n                    var firstIter = true;\n                    var elPrevScrollHeight = el.scrollHeight;\n                    while (el.scrollHeight \u003E el.offsetHeight) {\n                    if (!firstIter && elPrevScrollHeight == el.scrollHeight) {\n                        \/* Even after reducing the font size, element's previous and current scroll height remains same. So, we might get into a recursion and let's break it *\/\n                        break;\n                    }\n                    elPrevScrollHeight = el.scrollHeight;\n                    fontSizeArr.push(resizeText());\n                    firstIter = false;\n                    }\n                    return fontSizeArr;\n                })(el));\n                return fontSize;\n                }\n                \n            function applyScaleToFit() {\n              for (const [font] of Object.entries(fontLoadObject)) {\n                if (!fontLoadObject[font].loaded && !fontLoadObject[font].requested) {\n                  isFontAvailable(font, fontLoadObject[font]);\n                  fontLoadObject[font].requested = true;\n                } else if (fontLoadObject[font].loaded) {\n                  fontLoaded(fontLoadObject[font].id, font);\n                }\n              }\n            }\n          \n          window.addEventListener('load', function() {\n            applyScaleToFit();\n          }, false);\n        \/\/# sourceURL=dynamicJvxScript.js\n    \n    \n    \n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'bg1');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'bg2');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'bg3');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'bg4');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'bg5');\n                        }\n                         if (parent.doAssetVariantReporting !== undefined) {\n                            parent.doAssetVariantReporting('impression', 'asset167', 'brandLogo');\n                        }\n    \/* JIVOX DYNAMIC CODE END *\/\n\u003C\/script\u003E\n \r\n\u003C\/body\u003E\r\n\u003C\/html\u003E","externalPostURL":null,"eventType":"174","iconFileName":"HTML_M.html","urlFileName":null,"type":"asset","orderNumber":63,"paramString":null,"adFormat":"0","brandAwarenessLevel":null,"iconDimension":"[160,600]","origIconDimension":"[160,600]","iconBgColor":null,"iconFileType":"custom-html-widget-file","autoPlay":null,"iconGlowColor":null,"isIconBgTransparent":null,"fallbackImgURL":null,"fallbackImgFileName":null,"shareMsg":null,"fallbackType":null,"fallbackWidgetSrc":null,"fallbackWidgetURL":null,"fallbackWidgetFileName":null,"isCreatedByWidget":null,"clickHandler":null,"iconCustomEventQueryStr":null,"iconWidgetType":null,"modificationCount":null,"customEvents":null,"customActions":null,"disableClickThrough":null,"virtual":"1","groups":"CP_Travel_ID","additionalFiles":null,"dependentFiles":"160x600_Font1\/css\/style.css,160x600_Font1\/HTML_M.html,160x600_Font1\/script\/greensock.js,160x600_Font1\/script\/jivox.js","hoverIcon":null,"hoverIconFileName":null,"hoverOpacity":null,"hoverEffect":null,"scaleToFit":null,"widgetData":"{\"type\":\"custom-html\",\"animation\":\"\",\"images\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg1\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_5\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg2\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame2_All_Images\/Shanghai_DES_SHA_019Y23_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg3\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Shanghai_DES_SHA_014Y21_E0_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg4\",\"src\":\"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"bg5\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"brandLogo\",\"src\":\"https:\/\/cdn.jivox.com\/files\/76754\/Logos\/CathayPacific_logo_CX_160x600.png\",\"dynamic\":1}],\"texts\":[{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"jvxfr_Lang\",\"cid\":\"jvxfr_Lang\",\"text\":\"EN\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text1\",\"cid\":\"text1\",\"text\":\"Cathay Pacific conecta con el mundo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText1\",\"cid\":\"tagText1\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text2\",\"cid\":\"text2\",\"text\":\"Sumergirse en la belleza del Lago Oeste\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText2\",\"cid\":\"tagText2\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text3\",\"cid\":\"text3\",\"text\":\"Explorar el encantador casco antiguo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText3\",\"cid\":\"tagText3\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"text4\",\"cid\":\"text4\",\"text\":\"Experimentar el bullicio de la ciudad\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"tagText4\",\"cid\":\"tagText4\",\"text\":\"Shanghai\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"termsC_Text\",\"cid\":\"termsC_Text\",\"text\":\"Se aplican t\u00e9rminos y condiciones\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameText\",\"cid\":\"endFrameText\",\"text\":\"Eleva tu experiencia a bordo\",\"dynamic\":1},{\"supDyn\":\"1\",\"supIntr\":\"1\",\"id\":\"endFrameCTA\",\"cid\":\"endFrameCTA\",\"text\":\"Reserva ahora\",\"dynamic\":1}],\"elements\":[],\"videos\":[],\"width\":\"160\",\"height\":\"600\"}","autoPlayOnMobile":null,"widgetAssets":null,"internalAsset":"1","videoType":null,"duration":null,"lastUpdatedAt":"2024-11-27 05:06:31","noOfCards":null,"hasNoDynamicAssets":null,"isCarousel":"false","metaCatalogData":null,"isCasClickThrough":"false","isNonCarouselOfferFeed":null}};
var adUnitNestedJSON = {"160x600":{"adIdx":"229482","versionId":"0","adUnitIdx":"1900","type":"banner","unitType":"inbanner","creativeUnitType":"19","dimension":"160x600","backgroundType":"none","url":"https:\/\/assets.jivox.com\/assets\/widgets\/2025\/5\/a76754z681a2ee3c6333\/1\/160x600_VI\/HTML_M.html","fileName":"HTML_M.html","dependentFiles":null,"backgroundColor":"undefined","fallbackType":null,"fallbackURL":null,"fallbackFileName":null,"fallbackDependentFiles":null,"fallbackWidgetSrc":null,"hasLayout":"1","hasVirtualAssets":"1","loadEvent":null,"clickEvent":null,"lastUpdatedAt":"2025-05-06 11:46:59","expansionUnitIdx":null,"paramString":null,"creativeWidgetType":"custom-html","noOfCards":"1","defaultAssetGroup":"CP_Travel"}};

var mediaGalleryData = [];
var abParamJSON = [];
var creativeUnitType = '19';
var widgetParamStr = "var jvxWidgetLoaded=false;var adUnitType=19;var isCampaign=1;var campaignId=181754;var adId=0;var isMobile=0; var creativeUnitType=19;var serverDateObj={'seconds':34,'minutes':42,'hours':2,'mday':27,'wday':5,'mon':6,'year':2025,'yday':177,'weekday':'Friday','month':'June','0':1751006554};var serverGMTDateObj={'seconds':34,'minutes':42,'hours':6,'mday':27,'wday':5,'mon':6,'year':2025,'yday':177,'weekday':'Friday','month':'June','0':1751006554};var objectName='jvx_685e3d5a15742';var clickTagURL='https://evs.jivox.com/jivox/serverAPIs/externalReporting/proxy.php?campaignId=181754&siteId=674dd6df7af248b&adUnitType=19&es_pId=3d372812&jvxSessionId=1751006554.7785&clickTagURL=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360';var clickTag='https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360';var siteId='674dd6df7af248b';var eventReportingURL='https://evs.jivox.com';var sessionKey='';var serverProtocolStr='https://';var jvxSessionId='1751006554.7785';var placementId='3d372812';var isDynamic=1;var serverURL='https://as.jivox.com';var debugWidget=0;var ap_DataSignal1='22194047228';var ap_DataSignal3='AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w';var ap_DataSignal2='GBL-DV360';var dynamicData={};var widgetLoaded = function(){jvxWidgetLoaded = true;};window.addEventListener('load', widgetLoaded, false);";
var jivoxWidget = 'https://playercdn.jivox.com/1700114009/widgets/jivoxWidgetApi/gz/jivoxWidgetApiV2.min.js';
var unitTypeStr = 'inbanner';
var galleryFileURL = '/unit/mediaGallery_v2.php';
var trackersAllJSON = [{"eventId":"12","trackerURL":"https:\/\/ad.doubleclick.net\/ddm\/trackimpj\/N997352.5402186DV360_SAMEA_PT\/B32360969.400771417;dc_trk_aid=593715626;dc_trk_cid=220578289;ord=1751006818;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;gdpr=0;gdpr_consent=;ltd=;dc_tdv=1;dc_dbm_token=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w?","trackerType":"5","placementId":"3d372812"},{"eventId":"1","trackerURL":"https:\/\/ad.doubleclick.net\/ddm\/trackclk\/N997352.5402186DV360_SAMEA_PT\/B32360969.400771417;dc_trk_aid=593715626;dc_trk_cid=220578289;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;ltd=;dc_tdv=1;dc_dbm_token=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w","trackerType":"2","placementId":"3d372812"},{"eventId":"76","trackerURL":"https:\/\/cdn.doubleverify.com\/dvtp_src.js?ctx=22942483&cmp=181754&sid=674dd6df7af248b&plc=3d372812&num=&adid=&advid=&adsrv=125&btreg=scene-1&btadsrv=jivox&crt=CP_Travel%3ADV360%7CLK_Behavioural_China_China%7CChina_EN_v3&crtname=&chnl=&unit=&pid=&uid=&tagtype=&dvtagver=6.1.src","trackerType":"7","placementId":"3d372812"}];
var trackersForVideo = "";
var hasFlash = false;
var orgHasFlash = false;
var isMSIE = false;
var enableWidgetEdit = '0';
var editedWidgetsId = [];
var editedCode = "";
var browserName = 'Chrome';
var browserVersion = '138.0.0.0';
	function fireImpressionTrackers() {
 	}
	

var expansionOpen = false;
var isInExpansion = false;


var isFF = false;
var useFlash = 1;
var paramQueryStr = "adUnitType=19&campaignId=181754&base=1&creativeUnitType=19&versionId=0&adUnitId=1900&isDynamic=1&objectName=jvx_685e3d5a15742&clickThroughURL=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360&serverURL=https://as.jivox.com&placementId=3d372812&clickTag=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360&reportingURL=https://evs.jivox.com&jvxSessionId=1751006554.7785&siteId=674dd6df7af248b&isCampaign=1&es_pId=3d372812&ap_DataSignal1=22194047228&ap_DataSignal3=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w&ap_DataSignal2=GBL-DV360&jvxUUId=uODhprlrJeHU&es_cgName=CP_Travel%3ADV360%7CLK_Behavioural_China_China%7CChina_EN_v3&es_segName=DV360_EN";
var videoAssetsInScene = {};
var eventHistory = [];
var base = Number(1);
var isMraid = Number(0);
var sceneRotateInterval = null;
var UIRTimer = null;
var fitToScreenID = {};
var anyVideoPlaying = false;

//asset Variant, impression tracker fire only once 
var impressionTrackerHistory = [];
var cMacro = 'https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=';
var isMobileUnit = 0;
var objectName = 'jvx_685e3d5a15742';
var isMobile = '';
var dynamicPropertiesObj = {};
var runtimeMacros = {"%JVX_PL_TIMESTAMP%":"ct","%JVX_PL_CLK_X%":"cx","%JVX_PL_CLK_Y%":"cy","%JVX_PL_CONT_W%":"aw","%JVX_PL_CONT_H%":"ah","%JVX_PL_TV%":"tv","%JVX_PL_MRAID%":"m"};
var maxDynAPICall = "5";
var DYReportingKey = "CP_Travel%3ADV360%7CLK_Behavioural_China_China%7CChina_EN_v3";
var DYselectedGroup = "CP_Travel";
var DYselectedRule = "DV360_EN";
var DYSegmentName = "DV360_EN";
var cmUrl = getAssetIcon();
var isPreviewRequest = 0	// This will return 1 if the RMA preview is loaded.
var dynamicJSONData = {"trackers":[],"selected-group":"CP_Travel","data":{"device:device.language":"en-us,en","CP_Travel_PSP_Live":[{"endDate":"12-01-2035T00:00:00+08:00","termsC_Text":"Terms & conditions apply","bg2_970x250":"https:\/\/assets.jivox.com\/image\/upload\/w_970,h_250,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_970x250px.jpg","BrandLogo_300x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_300x600.png","endFrameCTA":"BOOK NOW","text3_970x250":"Experience the bustling \u003Cbr\u003Ecity district","text1_300x250":"Cathay Pacific connects \u003Cbr\u003Eyou to the world","bg4_160x600":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_160x600px.jpg","Creative Group":"English_Creatives","bg1_300x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_300x600px_r9_TC_Frame01.jpg","BrandLogo_970x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/970x250_f5_ENG_logo_V3.png","Status":"Live","bg1_728x90":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_728x90px_r9_TC_frame01_copy.jpg","brandFlyLogo":"","_activationEndDate":"12-01-2035T00:00:00+08:00","bg4_300x250":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_250,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_300x250px.jpg","Lang":"EN","bg3_728x90":"https:\/\/assets.jivox.com\/image\/upload\/w_728,h_90,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_728x90px.jpg","bg5_728x90":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_728x90.png","endFrameText_970x250":"Elevate your experience \u003Cbr\u003Ein the sky","text3":"","bg5_970x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_970x250.png","text4":"","text1":"","text2":"","text4_300x250":"Visit the capital's \u003Cbr\u003Elatest attractions","Origin Country":"LK","startDate":"03-16-2025T00:00:00+08:00","text2_160x600":"See the \u003Cbr\u003Edazzling \u003Cbr\u003EShanghai \u003Cbr\u003Ecityscape","text3_728x90":"Experience the bustling \u003Cbr\u003Ecity district","text4_728x90":"Visit the capital's \u003Cbr\u003Elatest attractions","endFrameText_300x600":"Elevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky","Origin City Example":"CMB","URL":"https:\/\/flights.cathaypacific.com\/destinations\/redirect?edition=en_LK&orig=CMB&dest=PEK&tc=co","bg1_970x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_970x250px_r8_TC_Frame01.jpg","text4_970x250":"Visit the capital's \u003Cbr\u003Elatest attractions","text2_300x250":"See the dazzling \u003Cbr\u003EShanghai cityscape","_jvxRtnGroup":"english_creatives","vapourBg_970x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/970x250_f5_vapour.png","jvxfr_Lang":"EN","endFrameText_728x90":"Elevate your experience \u003Cbr\u003Ein the sky","bg5_160x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png","text3_300x600":"Experience\u003Cbr\u003Ethe bustling\u003Cbr\u003Ecity district","SiteID":"674dd6df7af248b","bg1_160x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg","bg2_728x90":"https:\/\/assets.jivox.com\/image\/upload\/w_728,h_90,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_728x90px.jpg","endFrameText":"","text1_160x600":"Cathay Pacific \u003Cbr\u003Econnects you \u003Cbr\u003Eto the world","CI\/CO":"co","bg5_300x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/End_Frame_300x250.jpg","bg3_300x600":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_600,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_300x600px.jpg","Creative Name":"6170","bg1_300x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_300x250_EN_r7_Frame01.jpg","vapourBg_300x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/300x600_f5__vapour.png","Reporting Key":"DV360|LK_Behavioural_China_China|China_EN_v3","Tag":"","bg4_970x250":"https:\/\/assets.jivox.com\/image\/upload\/w_970,h_250,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_970x250px.jpg","vapourBg_728x90":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/728x90_f5_vapour.png","endFrameText_160x600":"Elevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky","_assetKey":"6170","_jvxRtnWeight":0,"vapourBg_160x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/160x600_f5__vapour.png","bg2":"","bg1":"","bg4":"","_activationStartDate":"03-16-2025T00:00:00+08:00","UTM":"&utm_medium=DISPLAY&utm_campaign=20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO&utm_content=ALWAYSON_PROSPECTING-V1&utm_term=EN_LK&utm_source=GBL-DV360","bg3":"","Browser Lang":"en,en-au,en-bz,en-ca,en-cb,en-gb,en-in,en-ie,en-jm,en-nz,en-ph,en-za,en-tt,en-us","text4_300x600":"Visit the\u003Cbr\u003Ecapital's latest\u003Cbr\u003Eattractions","bg5":"","Destination_Intent":"LK_Behavioural_China_China","BrandLogo_300x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Travel_Bgs\/CP_logo_english_V3.png","Version":"","tag":"","text1_970x250":"Cathay Pacific connects \u003Cbr\u003Eyou to the world","gradient4":"","gradient2":"","gradient3":"","text4_160x600":"Visit the\u003Cbr\u003Ecapital's \u003Cbr\u003Elatest\u003Cbr\u003Eattractions","text1_300x600":"Cathay Pacific \u003Cbr\u003Econnects you \u003Cbr\u003Eto the world","bg2_160x600":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg","bg4_300x600":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_600,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_300x600px.jpg","bg3_970x250":"https:\/\/assets.jivox.com\/image\/upload\/w_970,h_250,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_970x250px.jpg","DSP_ID":"DV360","Region":"SAMEA_DV360","Destination_City":"PEK","bg2_300x250":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_250,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_300x250px.jpg","Destination":"China","TTD":"","text1_728x90":"Cathay Pacific connects \u003Cbr\u003Eyou to the world","text2_728x90":"See the dazzling \u003Cbr\u003EShanghai cityscape","BrandLogo_728x90":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/728x90_f5_eng_2_logo (1).png","Datasignal_Value":"22194047228","vapourBg":"","bg2_300x600":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_600,f_auto,q_30\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_300x600px.jpg","text2_970x250":"See the dazzling \u003Cbr\u003EShanghai cityscape","vapourBg_300x250":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Travel_BG_Gradient\/VaporTrail_03.png","brandLogo":"","text3_160x600":"Experience\u003Cbr\u003Ethe bustling\u003Cbr\u003Ecity district","bg3_160x600":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_160x600px.jpg","Creative Version":"China_EN_v3","wheel":"","text2_300x600":"See the \u003Cbr\u003Edazzling Shanghai \u003Cbr\u003Ecityscape","text3_300x250":"Experience the bustling \u003Cbr\u003Ecity district","bg4_728x90":"https:\/\/assets.jivox.com\/image\/upload\/w_728,h_90,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_728x90px.jpg","endFrameText_300x250":"Elevate your experience \u003Cbr\u003Ein the sky","Clickthrough URL":"https:\/\/flights.cathaypacific.com\/destinations\/redirect?edition=en_LK&orig=CMB&dest=PEK&tc=co&utm_medium=DISPLAY&utm_campaign=20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO&utm_content=ALWAYSON_PROSPECTING-V1&utm_term=EN_LK&utm_source=GBL-DV360","bg5_300x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_300x600.png","tagText4":"Beijing","tagText3":"Hangzhou","bg3_300x250":"https:\/\/assets.jivox.com\/image\/upload\/w_300,h_250,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_300x250px.jpg","tagText2":"Shanghai","BrandLogo_160x600":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_160x600.png","tagText1":""}]},"reporting-schema":{"creativeName":"6170","creativeType":"IAB Wide Skyscraper","creativeMaster":"CP_Travel","assetReporting":"DV360|LK_Behavioural_China_China|China_EN_v3","creativeGroup":"english_creatives","creativeSize":"160x600"},"isNonCarouselOfferFeed":false,"reporting-key":"CP_Travel:DV360|LK_Behavioural_China_China|China_EN_v3","clickThrough":"https:\/\/flights.cathaypacific.com\/destinations\/redirect?edition=en_LK&orig=CMB&dest=PEK&tc=co&utm_medium=DISPLAY&utm_campaign=20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO&utm_content=ALWAYSON_PROSPECTING-V1&utm_term=EN_LK&utm_source=GBL-DV360","selected-rule":"DV360_EN","segment-name":"DV360_EN","asset-data":{"asset103":{"endFrameText":"Elevate your \u003Cbr\u003Eexperience \u003Cbr\u003Ein the sky","termsC_Text":"Terms & conditions apply","bg2":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg","endFrameCTA":"BOOK NOW","bg1":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg","bg4":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_160x600px.jpg","bg3":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_160x600px.jpg","bg5":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png","text3":"Experience\u003Cbr\u003Ethe bustling\u003Cbr\u003Ecity district","vapourBg":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/160x600_f5__vapour.png","text4":"Visit the\u003Cbr\u003Ecapital's \u003Cbr\u003Elatest\u003Cbr\u003Eattractions","jvxfr_Lang":"EN","text1":"Cathay Pacific \u003Cbr\u003Econnects you \u003Cbr\u003Eto the world","text2":"See the \u003Cbr\u003Edazzling \u003Cbr\u003EShanghai \u003Cbr\u003Ecityscape","tagText4":"Beijing","tagText3":"Beijing","tagText2":"Hangzhou","brandLogo":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_160x600.png","tagText1":"Shanghai"}},"adb-attributes":{"adb1-key":"6170","adb1-id_version":"51192_1"}};
dynamicPropertiesObj["DYReportingKey"] = DYReportingKey;
dynamicPropertiesObj["DYSegmentName"] = DYSegmentName;
dynamicPropertiesObj["eventServerParams"] = "adb1-key=6170/adb1-id_version=51192_1/sgrk_creativeName=6170/sgrk_creativeType=IAB+Wide+Skyscraper/sgrk_creativeMaster=CP_Travel/sgrk_assetReporting=DV360%7CLK_Behavioural_China_China%7CChina_EN_v3/sgrk_creativeGroup=english_creatives/sgrk_creativeSize=160x600";
dynamicPropertiesObj["cmUrl"] = cmUrl;
dynamicPropertiesObj['reportingSchema'] = dynamicJSONData['reporting-schema'];
dynamicPropertiesObj["encodedAdbAttr"] = "eyJhZGIxLWtleSI6IjYxNzAiLCJhZGIxLWlkX3ZlcnNpb24iOiI1MTE5Ml8xIn0=";
dynamicPropertiesObj["DYselectedGroup"] = DYselectedGroup;

	

var creativeVariant = dynamicJSONData["reporting-key"];
var resolveDynDataURL = '//traffick.jivox.com/jivox/serverAPIs/resolveDynamicData.php';
var evalDynRulesCarousel = 'http://traffick.jivox.com/jivox/serverAPIs/evalDynamicRules.php';
var creativeResolveEndTime = new Date();
var creativeResolveElapseTime = Math.round((creativeResolveEndTime - creativeResolveBeginTime)/1000);
	var url = "https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=https%3A%2F%2Fflights.cathaypacific.com%2Fdestinations%2Fredirect%3Fedition%3Den_LK%26orig%3DCMB%26dest%3DPEK%26tc%3Dco%26utm_medium%3DDISPLAY%26utm_campaign%3D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%26utm_content%3DALWAYSON_PROSPECTING-V1%26utm_term%3DEN_LK%26utm_source%3DGBL-DV360";
			if(validateVal(cMacro) && (url.indexOf(cMacro) == -1)) {
			url = cMacro+encodeURIComponent(url); 				} 
		window.parent.postMessage('jvx_685e3d5a15742:clickThroughUrl:'+ url , "*");
(function (DYData) {
    var dynProp = []; 
    for (var key in DYData){
        if (DYData.hasOwnProperty(key)) {
            dynProp.push(encodeURIComponent(DYData[key]));
        }
    }
    dynProp = dynProp.join("|");
        		window.parent.postMessage('jvx_685e3d5a15742:dynamicProperties:' + dynProp , "*");
            })(dynamicPropertiesObj);
var defaultJSON = {
	"anim" : {
		"duration" : 400,
		"easing"   : "swing",
		"type"	   : "fadeIn"
	}
} 
function setCookieObj(name, value, expires, path, domain) {
	  var cookie = name + "=" + encodeURIComponent(value) + ";";
	  if (expires) {
		  	    if(expires instanceof Date) {
	      	      if (isNaN(expires.getTime()))
	       expires = new Date();
	    }
	    else
	      expires = new Date(new Date().getTime() + parseInt(expires) * 1000 * 60 * 60 * 24);

	    cookie += "expires=" + expires.toGMTString() + ";";
	  }
	  if (path) {
	    cookie += "path=" + path + ";";
	  }
	  if (domain) {
	    cookie += "domain=" + domain + ";";
	  }
	  cookie += "SameSite=None;Secure;";
	  document.cookie = cookie;
}
function removeParameter(queryStr,keyArray){
	if(queryStr == null || queryStr == "") return "";
	var queryStrArr = queryStr.split("&"),
		queryStrArrLen = queryStrArr.length,
		keyArrayLen = keyArray.length,
		tempArr = [],
		preStr = "",
		postStr = "";
	for(var i=0; i<queryStrArrLen; i++){
		tempArr = queryStrArr[i].split("=");
		if(!i){	preStr = ""; postStr = "&"; }
		for(var j=0; j<keyArrayLen; j++){
			if(tempArr[0]==keyArray[j]){
				queryStr = queryStr.replace(preStr+tempArr[0]+"="+tempArr[1]+postStr,"");
			}
		}
		preStr = "&";
		postStr = "";
	}
	return queryStr;
}
function addParameter(queryStr,keyValueArr){
	if(queryStr == null || queryStr == "") return "";
	var keyValueArrLen = keyValueArr.length,
		tempArr=null;
	for(var i=0; i<keyValueArrLen; i++){
		tempArr = keyValueArr[i].split("=");
		if(queryStr.search(tempArr[0]) == -1){
			queryStr += "&"+tempArr[0]+"="+tempArr[1];
		}
	}
	return queryStr;
}
function getParameterValue(queryStr,key){
	if(queryStr == null || queryStr == "") return "";
	var queryStrArr = queryStr.split("&"),
		queryStrArrLen = queryStrArr.length,
		tempArr = null,
		retVal = null;
	for(var i=0; i<queryStrArrLen; i++){
		tempArr = queryStrArr[i].split("=");
		if(key == tempArr[0]) retVal = tempArr[1];
	}
	return retVal;
}
function objHasData(obj,key){
	return obj.hasOwnProperty(key) && obj[key] != "" ? true : false;
}
function getParameterInJSON(queryStr){
	var retJSON = {},
		queryStrArr = queryStr.split("&"),
		queryStrArrLen = queryStrArr.length,
		keyValArr = null;
	for(var loopVar=0; loopVar< queryStrArrLen; loopVar++){
		keyValArr = queryStrArr[loopVar].split("=");
		retJSON[keyValArr[0]] = keyValArr[1];
	}
	return retJSON;
}
function addAdnlQueryStr(paramArr){
	var len = paramArr.length;
	var retStr = "";
	for(var loopVar = 0; loopVar<len; loopVar++){
		if(typeof paramArr[loopVar] != undefined && paramArr[loopVar] != null){
			retStr += "&"+ paramArr[loopVar];
		}
	}
	return retStr;
}
function checkIsFlashAva(){
	var hasFlashPlugin = (function(){
		if(navigator.mimeTypes && navigator.mimeTypes["application/x-shockwave-flash"]){
			hasFlash = navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin;
		} 
				return hasFlash;
	})();
	orgHasFlash = hasFlash;
	if(!useFlash){
		hasFlash = false;
	}
}

	function getAssetIcon() {		//Function to get creative master url.
		var assetIcon = null, componentJSON = null, scenesJSON = null, assetGroup = null;
		var allDimJSON = getRequiredJSON(creativeUnitType), scenesJSON = null;			
		for(var dim in allDimJSON){
			scenesJSON = allDimJSON[dim]['scenes'];
			for(var scene in scenesJSON){
				componentJSON = scenesJSON[scene]['components'];								for(var assetId in componentJSON){
					assetGroup = getRequiredAssetDetail(assetId,"groups");
					if(assetGroup && assetGroup.indexOf(",") != -1) {
						assetGroup = assetGroup.split(",");												if(DYselectedGroup && assetGroup && assetGroup.indexOf(DYselectedGroup) != -1) {
							assetIcon = getRequiredAssetDetail(assetId,"icon");			
						}
					} else {
						if(DYselectedGroup && assetGroup && DYselectedGroup == assetGroup) {
							assetIcon = getRequiredAssetDetail(assetId,"icon");									}
					}
				}
			}
		}
		
		if(assetIcon && typeof assetIcon != 'undefined') {
			return assetIcon;
		} else {
			for(var assetId in componentJSON){
				assetIcon = getRequiredAssetDetail(assetId,"icon");	
				if(assetIcon && typeof assetIcon != 'undefined') {
					return assetIcon;
				}
			}
		}
	}

					function setAdUnitIdxForPostEvtURL() {							var evtTrackerPostEvtURL = "/229482/1900/181754/674dd6df7af248b/19/jvxSId_1751006554.7785"; 			evtTrackerPostEvtURL = evtTrackerPostEvtURL.split("/");				var dimension = layoutObj.matchLayoutDim;					var adUnitIdx = "";
			adUnitIdx = adUnitNestedJSON && adUnitNestedJSON[dimension] ? adUnitNestedJSON[dimension].adUnitIdx : 0;	
			if(evtTrackerPostEvtURL[2] != "" || evtTrackerPostEvtURL[2] != 0) {
				evtTrackerPostEvtURL[2] = adUnitIdx;
			}
			evtTrackerPostEvtURL = evtTrackerPostEvtURL.join("/");
							console.log('dimension',dimension);
				console.log('layoutObj',layoutObj);
				console.log('adUnitIdx',adUnitIdx);
				console.log('evtTrackerPostEvtURL',evtTrackerPostEvtURL);
						return evtTrackerPostEvtURL;
		}
	
	function fireTracker(trackerInfo,addnlParam,eventObj){						if(isNaN(parseInt(trackerInfo,10))) return false;
		var eventTrackerPostEventURL = "";
												eventTrackerPostEventURL = setAdUnitIdxForPostEvtURL();									console.log('eventTrackerPostEventURL',eventTrackerPostEventURL);
				trackerInfo += ""; 
		var finalURL = "",
			url = "https://evs.jivox.com/trk/" + trackerInfo + eventTrackerPostEventURL + "/es_pId_3d372812"+""+"/ap_DataSignal1=22194047228/ap_DataSignal3=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w/ap_DataSignal2=GBL-DV360"+"/adb1-key=6170/adb1-id_version=51192_1/sgrk_creativeName=6170/sgrk_creativeType=IAB+Wide+Skyscraper/sgrk_creativeMaster=CP_Travel/sgrk_assetReporting=DV360%7CLK_Behavioural_China_China%7CChina_EN_v3/sgrk_creativeGroup=english_creatives/sgrk_creativeSize=160x600";
		if(trackersAllJSON.length){
			checkForExternalTracker(trackerInfo, eventObj);
		}

		if(trackerInfo == 60 || trackerInfo == 77) {
			url += '/es_clickUrl=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360';
		}

					if(cmUrl && typeof cmUrl != 'undefined') {
				url += '/cmUrl=' + encodeURIComponent(cmUrl);
			}
		
		var bDim = playerParamsMap && playerParamsMap.hasOwnProperty('bDim') ? playerParamsMap['bDim'] : '';
		if(bDim) {
			url += '/bDim=' + bDim;
		}
			    finalURL = url + "/r=" + Math.random();
	    if(typeof addnlParam != "undefined"){
						addnlParam = addnlParam.replace(/&/g, "/");
	    	finalURL += addnlParam;
	    }
				getRequest(finalURL,0);
	}
	function replaceRunTimeMacros(eventObj, url) {
		try {													var runtimeMacroValues = {};
				runtimeMacroValues['ct'] = eventObj['ct'];   								var	bDim = playerParamsMap && playerParamsMap.hasOwnProperty('bDim') ? playerParamsMap['bDim'] : "",
				bDimSplit = bDim.split('x');
				runtimeMacroValues['aw'] = bDimSplit[0] ? bDimSplit[0] : eventObj.hasOwnProperty('clientWidth') ? eventObj['clientWidth'] : "";						runtimeMacroValues['ah'] = bDimSplit[1] ? bDimSplit[1] :  eventObj.hasOwnProperty('clientHeight') ? eventObj['clientHeight'] : "";						runtimeMacroValues['tv'] = runtimeMacroValues['ct'] - creativeResolveEndTime;									runtimeMacroValues['m'] = isMraid ? isMraid : 0;
			if(eventObj) {
				runtimeMacroValues['cx'] = eventObj.hasOwnProperty('clientX') ? eventObj['clientX'] : "";					runtimeMacroValues['cy'] = eventObj.hasOwnProperty('clientY') ? eventObj['clientY'] : "";				}
			
			var replacedTrackerURL = new URL(url);
			var searchParams = replacedTrackerURL.searchParams;

			
			searchParams.forEach((value, key) => {									if(runtimeMacros[value] != undefined){
					searchParams.set(key,runtimeMacroValues[runtimeMacros[value]]);
				}
			});
			
			return replacedTrackerURL.toString();
		}
		catch(err) {
			console.log("Computing tracker params error " + err);
		}
		return url.toString();
	}

	function checkForExternalTracker(trackerInfo, eventObj){
		var externalTrackerJSON = getExternalTrackerJSON(trackerInfo);
		if(externalTrackerJSON == null) return false;
		if(trackerInfo == 1){
			var externalTrackerJSONLen = externalTrackerJSON.length,
				value = null;
			for(var i=0; i<externalTrackerJSONLen; i++){
				value = externalTrackerJSON[i];
				if(value['trackerType'] == 2 && value['appendClicksForSecTrackers'] != true){								var replacedMacrosFromTrackers = replaceRunTimeMacros(eventObj, value['trackerURL']);													getRequest(replacedMacrosFromTrackers,1);
				}
			}
		}
		return true;
	}
		var imprScrTrackerCnt = 0;
	function createImprTrackerFrame(frameId){
				var imprFrame = document.createElement('iframe');
		imprFrame.id = frameId;
		imprFrame.width = 1;
		imprFrame.height = 1;
		imprFrame.style.display = 'none';
		imprFrame.src = 'about:blank';
		imprFrame.scrolling = 'no';
		return imprFrame;
	}
		function getRequest(url,isTracker,elType){
				if(!isTracker){
			url += "/es_cgName="+DYReportingKey;
            if(DYSegmentName != ""){
                url += "/es_segName="+DYSegmentName;
            }
		}
				var refParamIndex = url.indexOf("es_pId") != -1 ? url.indexOf("es_pId") : url.indexOf("jvxSId_");
		if(refParamIndex != -1){
			var tempURL = url.substr(refParamIndex, url.length),
				startOfCustomParam = refParamIndex + tempURL.indexOf("/");
									url = url.substr(0, startOfCustomParam) + "/es_encParams_" +  btoa(url.substr(startOfCustomParam, url.length));		}
		var requestInt = window.setTimeout(function(url){
			clearTimeout(requestInt);
			if(typeof elType != "undefined" && elType == 'script'){
												imprScrTrackerCnt++;
				var imprFrameId = 'jvx_685e3d5a15742ImprTrackerFrame_'+imprScrTrackerCnt;
				var iTrackerFrame = createImprTrackerFrame(imprFrameId);
				document.body.appendChild(iTrackerFrame);
				var iTrackerFrameWin = iTrackerFrame.contentWindow || iTrackerFrame.contentDocument;
								var iTrackerScrStr = "<html><head></head><body><script src="+encodeURI(url)+"></" + "script></" + "body></" + "html>";
				iTrackerFrameWin.document.open('text/html', 'replace');
				iTrackerFrameWin.document.write(iTrackerScrStr);
				iTrackerFrameWin.document.close();
							}else{
				var imgEl = document.createElement('img');
				imgEl.src = url;
			}
		},1,url);

	}
	function getExternalTrackerJSON(eventId){
		var reqJSON = null;
		if(eventId == 1)	reqJSON = [];
		var trackersAllJSONLen = trackersAllJSON.length,
			value = null;
		for(var i=0; i<trackersAllJSONLen; i++){
			value = trackersAllJSON[i];
			if(value['eventId'] == eventId){
				if(eventId == 1){
					reqJSON[reqJSON.length] = value;
				}else{
					reqJSON = value;
				}
			}
		}
		return reqJSON;
	}
	function recordEvent(eventId, addnlParam){
	        fireTracker(eventId,addnlParam);
	}
	function fireViewableEvent(){
							if(adInVPForOneSec) return;
			recordEvent(73);
			adInVPForOneSec = true;
			if (timerRunning) {
				window.clearTimeout(timeoutHandle);
				timerRunning = false;
			}
					}
	function recordEventByName(event_name, isInteractive, addnlParam, assetID){
		var finalAdnlParam = null,
			eventType = parseInt(getRequiredAssetDetail(assetID,"eventType"),10),
			startEventId = null,
			isInteractive = Number(isInteractive),
			addnlParamVal = "";
		if(typeof addnlParam == "string" && addnlParam != ""){
			var addnlParamArr = addnlParam.split("&"),
			queryStrArrLen = addnlParamArr.length,
			tempArr = null;
			for(var i=0; i<queryStrArrLen; i++){
				tempArr = addnlParamArr[i].split("=");
				addnlParamVal += "/"+tempArr[0]+"_"+(decodeURIComponent(tempArr[1]) == tempArr[1] ? encodeURIComponent(tempArr[1]) : tempArr[1]);
			}
		}
		else if(typeof addnlParam == "object"){
			for(var key in addnlParam){
				addnlParamVal += "/"+key+"_"+(decodeURIComponent(addnlParam[key]) == addnlParam[key] ? encodeURIComponent(addnlParam[key]) : addnlParam[key]);
			}
		}
		addnlParam = typeof addnlParam == "undefined" ? "" : addnlParamVal;	
		if((isInteractive || isInteractive == "true")&& isInteractive != "false"){
			startEventId = 10000000;
		}else{
			startEventId = 30000000;
		}
		finalAdnlParam = "/es_eName="+(decodeURIComponent(event_name) == event_name ? encodeURIComponent(event_name) : event_name)+addnlParam;
		fireTracker(startEventId,finalAdnlParam);
	}
		function doAssetVariantReporting(type, assetid, assetLabel){
		var assetVariants = {"asset103":{"endFrameText":"Elevate your <br>experience <br>in the sky","termsC_Text":"Terms & conditions apply","bg2":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg","endFrameCTA":"BOOK NOW","bg1":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg","bg4":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_160x600px.jpg","bg3":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_160x600px.jpg","bg5":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png","text3":"Experience<br>the bustling<br>city district","vapourBg":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/160x600_f5__vapour.png","text4":"Visit the<br>capital's <br>latest<br>attractions","jvxfr_Lang":"EN","text1":"Cathay Pacific <br>connects you <br>to the world","text2":"See the <br>dazzling <br>Shanghai <br>cityscape","tagText4":"Beijing","tagText3":"Beijing","tagText2":"Hangzhou","brandLogo":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_160x600.png","tagText1":"Shanghai"}},
			assetVariantReportingKey="";
		var offerIdReportingKey ="";
								if(assetVariants && assetVariants[assetid] && assetVariants[assetid]["_reporting-keys"]){		//DCS non-carousel		
				if(assetLabel && assetVariants[assetid]["_reporting-keys"][assetLabel]){
					assetVariantReportingKey = assetVariants[assetid]["_reporting-keys"][assetLabel];
				}else{
					var key = Object.keys(assetVariants[assetid]["_reporting-keys"])[0];
					assetVariantReportingKey = assetVariants[assetid]["_reporting-keys"][key];
				}
			}
				if(assetVariantReportingKey){
			if(type == "impression"){
				if(impressionTrackerHistory.indexOf(assetVariantReportingKey) != -1){
					return;
				}
				impressionTrackerHistory.push(assetVariantReportingKey);
			}
			recordAssetVariation(type, assetVariantReportingKey, 1, assetid, assetLabel);
		}
	}
	
	function recordAssetVariation(type, assetVariants, dropCookie, assetid, assetLabel){
			var queryString="",
		eventType="",
		finalURL = "",
		cookieName="",
		expiryTime=90;
		
			if(typeof assetVariants == "object"){
			var len = Object.keys(assetVariants).length;
			for(var i=0; i<len; i++){
				queryString += "es_av"+(i+1)+"="+encodeURIComponent(assetVariants[i]);
				queryString += "/";
			}
		}else{
			queryString = "es_av="+encodeURIComponent(assetVariants)+"/";
		}
		
			if(type == "impression"){
			eventType = "impr";
			cookieName = "_avi";
			expiryTime = 90;
			
		}else if(type == "click"){
			eventType = "clk";
			cookieName = "_avc";
			expiryTime = 90;
		}
		
		if(expiryTime < 0){
			expiryTime = 0;
		}else if(expiryTime > 180){
			expiryTime = 180;
		}
		
		var assetClickThroughURL = "";
		var adUnitWidgetType = adUnitNestedJSON[layoutObj.matchLayoutDim].hasOwnProperty('creativeWidgetType') ? adUnitNestedJSON[layoutObj.matchLayoutDim]['creativeWidgetType'] : '';
		var childAssetVariants = {"asset103":{"endFrameText":"Elevate your <br>experience <br>in the sky","termsC_Text":"Terms & conditions apply","bg2":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Shanghai_GettyImages-1493988581_160x600px.jpg","endFrameCTA":"BOOK NOW","bg1":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/CS_10235\/Frame_1\/CX2023029_Prospecting_Always-On_160x600px_r10_TC_Frame01.jpg","bg4":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Beijing_GettyImages-467898178_160x600px.jpg","bg3":"https:\/\/assets.jivox.com\/image\/upload\/w_160,h_600,f_auto,q_auto\/creatives\/CustomFeed\/Testing\/CatheyPacificTravel_Images\/CP_Images\/Frame_4_All_Images\/Hangzhou_GettyImages-1301186679_160x600px.jpg","bg5":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Frame1_Frame5\/end_frame_160x600.png","text3":"Experience<br>the bustling<br>city district","vapourBg":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Vapours\/160x600_f5__vapour.png","text4":"Visit the<br>capital's <br>latest<br>attractions","jvxfr_Lang":"EN","text1":"Cathay Pacific <br>connects you <br>to the world","text2":"See the <br>dazzling <br>Shanghai <br>cityscape","tagText4":"Beijing","tagText3":"Beijing","tagText2":"Hangzhou","brandLogo":"https:\/\/assets.jivox.com\/cdn\/files\/76754\/Logos\/CathayPacific_logo_EN_160x600.png","tagText1":"Shanghai"}}
		
			if(adUnitWidgetType == null && assetid){ 					var getChildAsset = getRequiredJSON("interactions", assetid) ? getRequiredJSON("interactions", assetid) : [];	
					getChildAsset.map(function(interaction){	
												var childAssetDestObj = interaction.hasOwnProperty('destObject') ? interaction.destObject : "";	
						var destAction = interaction.hasOwnProperty('destAction') ? interaction.destAction : "";
						if(getChildAsset && destAction) {
							if(childAssetDestObj != "" && destAction == "open" && getRequiredAssetDetail(childAssetDestObj,"icon")) { 		/* Launch URL configuration for interactions in jivox studio */
								assetClickThroughURL = getRequiredAssetDetail(childAssetDestObj,"icon");
								assetClickThroughURL = encodeURIComponent(assetClickThroughURL);
							} else {
								if(childAssetDestObj == null && destAction == "openClickThrough") {			/* Open click through configuration for interactions in jivox studio */
									assetClickThroughURL = 'https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360'; 
								}
							}
						}
					});
				if(!assetClickThroughURL || assetClickThroughURL == 'undefined') {														assetClickThroughURL = 'https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360';
									}
			} else {
				if(adUnitWidgetType && adUnitWidgetType != null){
						/* DCS non-carousel ad. */
												if(assetid && assetLabel) {
							var childAssetKey = Object.keys(childAssetVariants[assetid]);
							for(var key in childAssetKey){
								if(childAssetKey[key].startsWith('URL_'+assetLabel)) {											assetClickThroughURL = encodeURIComponent(childAssetVariants[assetid][childAssetKey[key]]);
								}
							}	
							if(!assetClickThroughURL || assetClickThroughURL == 'undefined') {																				assetClickThroughURL = 'https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360';
															}
						}				
									}
			} 
		var eventTrackerPostEventURL = "";
												eventTrackerPostEventURL = setAdUnitIdxForPostEvtURL();								console.log('eventTrackerPostEventURL',eventTrackerPostEventURL); 		
		var url = "https://evs.jivox.com/asvar/"+eventType + eventTrackerPostEventURL + "/es_pId_3d372812"+""+"/ap_DataSignal1=22194047228/ap_DataSignal3=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w/ap_DataSignal2=GBL-DV360"+"/"+queryString;
		if(assetClickThroughURL != "") {
			url += "es_clickUrl="+assetClickThroughURL;
		}
					if(cmUrl && typeof cmUrl != 'undefined') {
				url += '/cmUrl=' + encodeURIComponent(cmUrl);
			}
				var bDim = playerParamsMap && playerParamsMap.hasOwnProperty('bDim') ? playerParamsMap['bDim'] : '';
		if(bDim) {
			url += '/bDim=' + bDim;
		}
	    finalURL = url + "/r=" + Math.random();
				getRequest(finalURL,0);
				
		 if(typeof(dropCookie) == 'undefined' || dropCookie == 1 || dropCookie == true || dropCookie == 'true'){
				 						setCookieObj(181754+cookieName, (typeof assetVariants == "object")?assetVariants[0]:assetVariants, expiryTime, "/", ".jivox.com");
							 }
	}
		function recordInteractionEvent(assetID, assetEventType, eventId, event={}){
		var assetInteractionsData = getRequiredJSON('interactions',assetID),
			srcEvent,
			options,
			trackAsClickThrough=0,
			assetDestAction,
			destObj,
			eventType = (!isVideoElement(assetID) && assetID.search("scene-") == -1) ? getRequiredAssetDetail(assetID,'eventType') : "";
		$.each(assetInteractionsData, function(index, data){
			srcEvent = data['srcEvent'];
			destObj = data['destObject'];
			assetDestAction = data['destAction'];
			if((assetDestAction == "open") && (srcEvent == assetEventType)){
				options = (data.hasOwnProperty('options')) ? data['options'] : undefined;
				if(typeof options != 'undefined' && trackAsClickThrough == 0){
					trackAsClickThrough = options.hasOwnProperty('trackAsClickThrough') ? options['trackAsClickThrough'] : 0;
				}
			}
		});
		eventType = getEventIdOnType(eventType, assetEventType);
		var addnlEvtParam = "";
				var	clickUrl = getRequiredAssetDetail(destObj,'icon');
		clickUrl = clickUrl ? encodeURIComponent(clickUrl) : "";
		if(clickUrl)
		addnlEvtParam = '/es_clickUrl=' + clickUrl;
				var eventObj = {};
		try {
			if(event != undefined) {
				eventObj['clientWidth'] = event && event.target && event.target.clientWidth !== undefined ? event.target.clientWidth : "";	
				eventObj['clientHeight'] =  event && event.target && event.target.clientHeight !== undefined ? event.target.clientHeight : "";
				eventObj['clientX'] = event && event.clientX !== undefined ? event.clientX : event.nativeEvent ? event.nativeEvent.clientX : "";
				eventObj['clientY'] = event && event.clientY !== undefined ? event.clientY : event.nativeEvent ? event.nativeEvent.clientY : "";
			}
		}catch(err) {
			console.log("Event object error " + err);
		}
		if(trackAsClickThrough == 1){
			addnlEvtParam += "/es_fireEvent=" + (parseInt(eventType) + 700);
			fireTracker(eventId, addnlEvtParam, eventObj);
			fireViewableEvent();
		}else{
			fireTracker(eventId, addnlEvtParam, eventObj);
			fireViewableEvent();
		}
	}
	function raiseAndRecordEvent(eventName, assetID, assetEventType, eventId){
		if(eventName){
			raiseEvent(eventName);
		}
		recordInteractionEvent(assetID, assetEventType, eventId);
	}
	
function raiseAndRecordEvent(eventName, assetID, assetEventType, eventId) {
	if(eventName){
		raiseEvent(eventName);
	}
		recordInteractionEvent(assetID, assetEventType, eventId);
	}

function externalTrackerForEvent(eventId,trackerType){
	var obj = null;
	$.each(trackersAllJSON, function(index, value){
		if(value['eventId'] == eventId){
			if(eventId != 1 || value['trackerType'] == 1){
				obj = value;
			}
		}
	});
	return obj;
}
function fireEvent(assetID,eventNum){
			var eventType = parseInt(getRequiredAssetDetail(assetID,"eventType"),10),   			eventId = (eventType+200) + eventNum;
		fireTracker(eventId);
	}
function getEventIdOnType(eventId,eventType){
	var retVal = null,
		reqEventId = ((Number(eventId) + 200) * 100) + 50;
	retVal = (eventType == "click") ? eventId :
			 (eventType == "hover") ? reqEventId+1 : eventId;
    return retVal;
}
function getAssetEventType(assetIdList) {
	var eventTypes = {};
	if(typeof assetIdList != "undefined") {
		var assetIdArr = assetIdList.split(",");
		var len = assetIdArr.length;
		for(var aid = 0 ; aid < len ; aid++) {
			eventTypes[assetIdArr[aid].trim()] = parseInt(getRequiredAssetDetail(assetIdArr[aid].trim(),"eventType"),10);
		}
	}
	return eventTypes;
}
function createHTMLElement(containerID,element,ID,elementStyle,additionalAttr){
	var sceneCntDiv = document.createElement(element);
	sceneCntDiv.id = ID;
	if(elementStyle != "" && elementStyle != null)	sceneCntDiv.setAttribute("style",elementStyle);
	if(typeof additionalAttr != "undefined") sceneCntDiv.setAttribute(additionalAttr[0],additionalAttr[1]);
	if(containerID=="body"){
		document.body.appendChild(sceneCntDiv);
	}else{
		document.getElementById(containerID).appendChild(sceneCntDiv);
	}
}
function layoutEventHandling(elementID,eventArr,callback){
	var eventArrLen = eventArr.length;
	var eventType;
	for(var loopVar = 0; loopVar<eventArrLen; loopVar++){
		eventType = eventArr[loopVar];
		attachEventListener(document.getElementById(elementID),eventType,function(event){callback(event);},false);
	}
}
function convertToStr(){
	return arguments[0].toString();
}
function loadJS(attrJSON){
	var script = document.createElement('script');
	if(typeof attrJSON != "undefined"){
		for(var key in attrJSON){
			script.setAttribute(key,attrJSON[key]);
		}
	}
	document.getElementsByTagName('head')[0].appendChild(script);
}
function loadLoader(){
	
var css = '',
	head = document.head || document.getElementsByTagName('head')[0],
	style = document.createElement('style');
style.type = 'text/css';
	css = '.jvx_685e3d5a15742loadingSpinner { position: absolute; border-top-color: transparent; height: 20px; vertical-align: middle; width: 20px; border: 3px solid #444; border-top-color: transparent; border-radius: 50%; -webkit-animation: spin 1s infinite linear; -moz-animation: spin 1s infinite linear; -ms-animation: spin 1s infinite linear; animation: spin 1s infinite linear; } @-webkit-keyframes spin { 100% { -webkit-transform: rotate(360deg); } } @-ms-keyframes spin { 100% { -ms-transform: rotate(360deg); } } @-moz-keyframes spin { 100% { -moz-transform: rotate(360deg); } } @-keyframes spin { 100% { transform: rotate(360deg); } }';
	if(css){
		if (style.styleSheet){
		  style.styleSheet.cssText = css;
		} else {
		  style.appendChild(document.createTextNode(css));
		}
		head.appendChild(style);
	}
	function addDivComponent_v2(mainEl, nodeId, className, text, styleObj)
	{
		var node = document.createElement('div');
        node.id = nodeId;
		node.innerHTML = text;							
		if(className != ''){
			if(node.classList && node.classList.length > 0){
				node.className += ' ' + className;
			} else {
				node.className =  className;	
			}
		}
		if(styleObj != ''){
			var css = '';
			for (var name in styleObj) {
				if(styleObj.hasOwnProperty(name)){
					try{
						node.style[name] = styleObj[name];
					} catch(e){
						css += name+':'+styleObj[name]+';';								}
				}
			}
			if(css != '') node.style.cssText = css.toString();
		}
		return mainEl.appendChild(node);
	}
	

	var	mainEl = document.getElementById('scenesContainer'),
		lSize = parseInt('22'),
		loaderId = '',
		elHeight = '', elWidth = '',
		tTop = '', tLeft = '',
		topPos = '', leftPos = '';
	
			loaderId = 'loader';
			elHeight = parseInt(mainEl.style.height.replace("px",""));
	elWidth = parseInt(mainEl.style.width.replace("px",""));
		
	topPos = elHeight/2; 
	leftPos = elWidth/2;
		
			var lStyles = {'top': topPos+"px", 'left': leftPos+"px", 'width': lSize + 'px', 'height': lSize + 'px', 'display':'block'},	
			loader = addDivComponent_v2(mainEl, loaderId, 'jvx_685e3d5a15742loadingSpinner', '', lStyles);
					
	
		document.getElementById("loader").style.display = "none";
}
function attachEventListener(target, eventType, functionRef, capture){
	if(typeof target.addEventListener != "undefined"){
		target.addEventListener(eventType, functionRef, capture);
	}else{
		target.attachEvent("on" + eventType, functionRef);
	}
};
function getRequiredJSON(){
try{
	var requiredJSON = layoutRendererJSON['layout'][unitTypeStr];
	if(arguments[0] != unitTypeStr){
		requiredJSON = requiredJSON[creativeUnitType];
		if(arguments[0] != creativeUnitType){
			requiredJSON = requiredJSON[layoutObj.matchLayoutDim];
			if(arguments[0] != layoutObj.matchLayoutDim){
				requiredJSON = requiredJSON['scenes'];
				if(arguments[0] != 'scenes'){
					requiredJSON = requiredJSON[layoutObj.activeSceneID];
					if(arguments[0] != layoutObj.activeSceneID){
						requiredJSON.hasOwnProperty(arguments[0])? requiredJSON = requiredJSON[arguments[0]] : requiredJSON = false;
						if(typeof arguments[1] != "undefined"){
							requiredJSON.hasOwnProperty(arguments[1])? requiredJSON = requiredJSON[arguments[1]] : requiredJSON = false;
						}
					}
				}
			}
		}
	}
	if(requiredJSON == undefined) requiredJSON = false;
	return requiredJSON;
}catch(e){
	return false;
}
}
function hideGroups(groupName){
	var group = null,
		assetID = null,
		groupName = typeof groupName == "undefined" ? "" : groupName;
	for(var key in assetsDetailedJSON){
		group = assetsDetailedJSON[key]['groups']?assetsDetailedJSON[key]['groups'].split(','):"";
		if(group != ""){
			var index =  group.indexOf(groupName);
			if(index != -1){
				group = group[index];
			}
		}
		if(group != "" && group != null && (group == groupName || groupName == "")){
			assetID = key.replace("customAsset.","");
			hideAsset(assetID);
		}
	}
}
function showGroups(groupName){
	var assetID = null,
		group = null,
		groupName = typeof groupName == "undefined" ? "" : groupName;
	for(var key in assetsDetailedJSON){
		group = assetsDetailedJSON[key]['groups']?assetsDetailedJSON[key]['groups'].split(','):"";
		if(group != ""){
			var index = group.indexOf(groupName);
			if(index != -1){
				group = group[index];
			}
		}
		if(group != "" && group != null &&(group == groupName || groupName == "")){
			assetID = key.replace("customAsset.","");
			showAsset(assetID);
		}
	}
}
function setStorageData(setName,useSessionStorage){
	var setNameArr = setName.split("&"),
		key = null,
		value = null,
		useLocalStorage = (typeof useSessionStorage == "undefined" || !Number(useSessionStorage)) ? 1 : 0;
	$.each(setNameArr,function(index,data){
		data = data.split("=");
		key = data[0];
		value = data[1];
		if(typeof(Storage) != "undefined"){
			if(useLocalStorage){
				localStorage.setItem(key,value);
			}else{
				sessionStorage.setItem(key,value);
			}
		}else{
					}
	});
}
function getStorageData(getName,preferSessionStorage){
	var useLocalStorage = (typeof preferSessionStorage == "undefined" || !Number(preferSessionStorage)) ? 1 : 0,
		getNameArr = getName.split(","),
		retVal = [];
	if(typeof(Storage) != "undefined"){
		if(useLocalStorage){
			$.each(getNameArr,function(index,data){
				retVal.push(localStorage.getItem(data));
			});
		}else{
			$.each(getNameArr,function(index,data){
				retVal.push(sessionStorage.getItem(data));
			});
		}
	}else{
			}
	if(retVal.length == 1){
		return retVal[0];
	}else{
		return retVal;
	}
}

function setRequiredJSON(obj){
	if(obj['setOnKey'] == "creativeUnitType"){
		layoutRendererJSON['layout'][unitTypeStr][creativeUnitType] = obj['setJSON'];
	}
}
function createDummyJSONForLayout(){
	layoutRendererJSON =  JSON.parse('{"layout":{"'+unitTypeStr+'":{"'+creativeUnitType+'":{"'+layoutObj.matchLayoutDim+'":{"scenes":{"scene-1":{"components":{}}}}}}}}');
}
function addTransitionToLayoutJSON(){
	var tempJSON = getRequiredJSON(creativeUnitType),
		sceneData = null,
		componentJOSN = null,
		assetJSON = null,
		obj = {};
	for(var layoutDim in tempJSON){
		sceneData = tempJSON[layoutDim]['scenes'];
		for(var scene in sceneData){
			componentJOSN = sceneData[scene]['components'];
			for(var asset in componentJOSN){
				assetJSON = componentJOSN[asset];
				if(!assetJSON.hasOwnProperty("options")) assetJSON['options'] = {}
				if(!assetJSON['options'].hasOwnProperty("transitionTime") && !assetJSON['options'].hasOwnProperty("fitToScreen")){
					assetJSON['options']['transitionTime'] = 0.5; 
					assetJSON['options']['transitionType'] = 'fade'; 
				}
			}
		}
	}
	obj['setOnKey'] = "creativeUnitType";
	obj['setJSON'] = tempJSON;
	setRequiredJSON(obj);
}
function getRequiredInteraction(interactionsJSON,matchKeyValue){
	if(!interactionsJSON) return false;
	var key = matchKeyValue[0],
		value = matchKeyValue[1],
		reqJSON = false;
	$.each(interactionsJSON, function(index, data) {
		if(data[key] == value){
			reqJSON = data;
		}
	});
	return reqJSON;
}
function getRequiredAssetDetail(){
	var reqdAssetDet = assetsDetailedJSON.hasOwnProperty('customAsset.'+arguments[0]) ?  assetsDetailedJSON['customAsset.'+arguments[0]] : null;
	if(reqdAssetDet && typeof arguments[1] != "undefined"){
		reqdAssetDet = reqdAssetDet.hasOwnProperty(arguments[1]) ? reqdAssetDet[arguments[1]] : null;
	}
	if(!reqdAssetDet && arguments[0] == "componentBG"){
		if(typeof arguments[1] != "undefined"){
			reqdAssetDet = checkIsDataAva(adUnitNestedJSON,layoutObj.matchLayoutDim,arguments[1]);
		}
	}
	return reqdAssetDet;
}
function setRequiredAssetDetail(){
	var keyValueArr = arguments[1].split("="),
		key = keyValueArr[0],
		value = keyValueArr[1];
	if(assetsDetailedJSON.hasOwnProperty('customAsset.'+arguments[0]) && assetsDetailedJSON['customAsset.'+arguments[0]].hasOwnProperty(key)){
		assetsDetailedJSON['customAsset.'+arguments[0]][key] = value;
	}
}
function getWidgetParamStr(assetID){
	var iconParamString = getRequiredAssetDetail(assetID,"paramString");
		widgetParamJSON = {},
		externalStartEventId  = Number(getRequiredAssetDetail(assetID,"eventType"))*100,
		tempWidgetStr = " \n var assetID='"+assetID+"';var externalStartEventId="+externalStartEventId+";";
		tempWidgetStr += "var playerParamsMap=" + JSON.stringify(playerParamsMap)+";";
				tempWidgetStr += "\nvar oldAlert = window.alert;console.oldLog = console.log;\nconsole.log = function(){};window.alert = function(){};";
			if(iconParamString != null){
		var keyValueArr = iconParamString.split("&"),
			valueArr = "";
		$.each(keyValueArr, function(index, value) {
		  valueArr = value.split("=");
		  widgetParamJSON[valueArr[0]] = decodeURIComponent(valueArr[1]);
		});
		tempWidgetStr += " function getWidgetConfig(){ return "+JSON.stringify(widgetParamJSON)+"} \n";
	}
	return widgetParamStr+tempWidgetStr;
}
function log(param){
	if(console && console.log){
		console.log(param);
	}
}
function createSWF(obj){
	var id = obj.id, 
		src = obj.src, 
		width = obj.width, 
		height = obj.height,
		params = obj.params,
		paramsHTMLStr = '',
		str = '';

	for(var paramName in params){
		paramsHTMLStr += '<param name="'+paramName+'" value="'+params[paramName]+'" />';
	}

	str += '<object type="application/x-shockwave-flash" data="'+src+'" id="'+id+'" name="'+id+'" width="'+width+'" height="'+height+'">';
	str += paramsHTMLStr;
	str += '</object>';
	return str;		
}
function assetHasWrapper(assetID){
	if($("#"+assetID+"wrapper").length) 
		return "#"+assetID+"wrapper";
	else
		return "#"+assetID;
}
function deactivateAsset(assetID){
	$("#"+assetID+","+assetHasWrapper(assetID)).stop().css({"margin-top":"5000px","transform":"","left":"","top":"","opacity":"","height":"","width":""}).data("isInsideVP",false);
	}
function activateAsset(assetID){
	$("#"+assetID+","+assetHasWrapper(assetID)).css({"margin":0 /*,"opacity":"1"*/}).data("isInsideVP",true);
	}
function setAssetToInit(assetID){
	$("#"+assetID).css({"transform":"","left":"","top":""});
}
function findPosAsset(assetID){
	var cord = [];
	cord[0] = parseInt($("#"+assetID).css("left"),10);
	cord[1] = parseInt($("#"+assetID).css("top"),10);
	return cord;
}
function findDimAsset(assetID){
	var dim = [];
	dim[0] = parseInt($("#"+assetID).css("width"),10);
	dim[1] = parseInt($("#"+assetID).css("height"),10);
	return dim; 
}
function actualLocaionArr(assetID){
	var assetComponents = getRequiredJSON('components',assetID)['location'];
	if(assetComponents){
		assetComponents = assetComponents.split(',');
		return assetComponents;
	}else{
		return;
	}
}
function findActualDimAsset(assetID){
	var dim = [],
		assetDimArr = actualLocaionArr(assetID);
	if(typeof assetDimArr != 'undefined'){
		dim[0] = parseInt(assetDimArr[2],10);
		dim[1] = parseInt(assetDimArr[3],10);
	}
	return dim;  
}
function findActualPosAsset(assetID){
	var cord = [],
		assetPosArr = actualLocaionArr(assetID);
	cord[0] = parseInt(assetPosArr[0],10),
	cord[1] = parseInt(assetPosArr[1],10);
	return cord;
}
function findLayoutDimArr(){
	var dim = [],
		layoutDimArr = layoutObj.matchLayoutDim.split("x");
	dim[0] = parseInt(layoutDimArr[0],10);
	dim[1] = parseInt(layoutDimArr[1],10);
	return dim;
}
function clickedOnInteraction(){
	clearInterval(sceneRotateInterval);
}
function activateModelLayer(assetID,showCloseBtn,showMask){
	var self = layoutObj,
		closeBtnModelLeft = "0",
		closeBtnModelTop = "0",
		closeBtnModelWidth = parseInt($("#closeBtnModel").css("width"),10),
		closeBtnModelHeight = parseInt($("#closeBtnModel").css("height"),10),
		layoutWidth = parseInt(layoutObj.matchLayoutDim.split(",")[0],10),
		assetData = null,
		zIndex = null,
		countModelAsset =0;
	if(typeof showCloseBtn == "undefined") showCloseBtn = 1;
	if(typeof showMask == "undefined") showMask = 1;
	if(!self.activeModelAssetIDs[self.activeSceneID].hasOwnProperty(assetID)) self.activeModelAssetIDs[self.activeSceneID][assetID] = {};
	for(var assetID in self.activeModelAssetIDs[self.activeSceneID]){
		countModelAsset++;
	}
	if((countModelAsset > 1 && 0 && !base) || (countModelAsset > 1 && base)){
		closeBtnModelLeft =  layoutWidth - closeBtnModelWidth;
	}else{
		closeBtnModelLeft = findPosAsset(assetID)[0] + findDimAsset(assetID)[0];
		if(closeBtnModelLeft+closeBtnModelWidth > layoutWidth)	closeBtnModelLeft -= closeBtnModelWidth;
		if(closeBtnModelLeft > (layoutWidth - closeBtnModelWidth)) closeBtnModelLeft = layoutWidth - closeBtnModelWidth;
		closeBtnModelTop = findPosAsset(assetID)[1] - closeBtnModelHeight;
		if(closeBtnModelTop < 0) closeBtnModelTop += closeBtnModelHeight;
		if(closeBtnModelTop < 0) closeBtnModelTop = 0;
	}
	if(showMask){
		$("#mask").css({"display":"block","z-index":"499"});
	}
	if(showCloseBtn){
		$("#closeBtnModel").css({"display":"block","z-index":"1000","left":closeBtnModelLeft+"px","top":closeBtnModelTop+"px"});
	}
	assetData = getRequiredJSON('components',assetID);
	zIndex = assetData.hasOwnProperty('layerId') ? parseInt(assetData['layerId'],10) : 0;
	$("#"+assetID+","+assetHasWrapper(assetID)).css({"z-index":500 + zIndex});
	if(showMask){
			}
}
function bindEventModelLayer(){
	$("#closeBtnModel").on("click",function(){
		deactivateModelLayer();
				eventMsg(layoutObj.activeSceneID+".clickModelCloseBtn");
	});
}
function isModelLayerActive(){
	return $.isEmptyObject(layoutObj.activeModelAssetIDs[layoutObj.activeSceneID]) ? false : true;
}
function deactivateModelLayer(){
	if(!isModelLayerActive()) return;
	$("#closeBtnModel").css({"display":"none","z-index":"0"});
	$("#mask").css({"display":"none","z-index":"0"});
	for(var assetID in layoutObj.activeModelAssetIDs[layoutObj.activeSceneID]){
		deactivateAsset(assetID);
	}
		layoutObj.activeModelAssetIDs[layoutObj.activeSceneID] = {};
}

function isWrapperForAssetReq(assetID){
	var retVal = false,
		customAssetID = "customAsset."+assetID,
		assetDetailsJSON = assetsDetailedJSON[customAssetID],
		assetIconFileType = assetDetailsJSON['iconFileType'],
		assetClickHandler = assetDetailsJSON['clickHandler'];
	if((assetIconFileType == "js" || assetIconFileType == "custom-widget" || assetIconFileType == "custom-html-widget-file" || assetIconFileType ==  "custom-js-widget-file" || assetIconFileType == "html" || assetIconFileType == "flash" || assetIconFileType == "text-widget" ) && assetClickHandler == "system"){
		retVal = true;
	}
	return retVal;
}
function urlFormat(url){
	if(url.indexOf("//") == 0){ // relative protocol url
		url = url.replace("//", "");	// remove double slash and append serverProtocolStr
	}
	return (url.search("http")== -1) ? (serverProtocolStr + url) : url;
}
function isEventInInteractions(assetInteractionsData,assetEventType){
	var retVal = false;
	$.each(assetInteractionsData, function(index, data) {
		if(data["srcEvent"] == assetEventType){
			retVal = true;
		}
	});
	return retVal;
}
function isInsideVP(assetID){
	return (typeof $("#"+assetID).data("isInsideVP") == "undefined" || $("#"+assetID).data("isInsideVP")) ? true : false;
}
function animInitiateBy(assetID){
	return (typeof $("#"+assetID).data("animInitiateBy") != "undefined") ? $("#"+assetID).data("animInitiateBy") : assetID;
}
function validateVal(val){
	return (typeof val == "undefined" || val == null || val == "") ? false : true;
}
function checkAnimType(type){
 return (type == "fadeIn" || type == "slideIn" || type == "zoomIn") ?
         "appear" : ((type == "fadeOut" || type == "slideOut" || type == "zoomOut") ? "disappear" : null);
}
function getAminArr(options,type){
  var str = checkIsDataAva(options,type);
  if (!str) return [];
  var A = [],firstIndex = 0,lastIndex = 0,lastDelimeter = ",",len = str.length;
  for(var i=0;i<str.length;i++){
    if(str[i] == "+" || str[i] == "," || i == (str.length-1)){
      lastIndex = (i == len-1) ? len : i;
      A[A.length] = [((lastDelimeter == ",") ? "parallel" : "squential"),str.slice(firstIndex, lastIndex)];
      firstIndex = i + 1;
      lastDelimeter = str[i];
    }
  }
  return A;
}
function checkIsDataAva(){
	var jsonData = arguments[0],
		argLen = arguments.length,
		returnVal = null;
	if(!arguments[0]) return null;
	$.each(arguments,function(index,value){
		if(index && typeof value != "undefined" && jsonData.hasOwnProperty(value) && jsonData[value] !== null && jsonData[value] !== ""){
			index < argLen - 1 ? jsonData = jsonData[value] : returnVal = jsonData[value];
		}
	});
	return returnVal;
}
function hasAppearEffect(assetID){
	return (validateVal(checkIsDataAva(getRequiredJSON("components",assetID),"options","appearanceEffects")) ? true : false);
}
function hasAnimDelayORSpeed(assetID,effect){
	var returnVal = false,assetData = getRequiredJSON("components",assetID),
		animJ = checkIsDataAva(assetData,"options",effect+"anceEffects"),
		animDetail = null,delay,speed;
	if(validateVal(animJ)){
		animJ = animJ.split(",");
		$.each(animJ,function(index,value){
			animDetail = checkIsDataAva(assetData,"animations",value);
			delay = animDetail.hasOwnProperty('delay') ? Number(animDetail['delay']) : 0;
			speed = animDetail.hasOwnProperty('speed') ? Number(animDetail['speed']) : 0;
			if(delay || speed){
				returnVal = true;
			}
		});
	}
	return returnVal;
}
function getValueWithDefault(value,defaultVal){
	return validateVal(value) ? value : defaultVal;
}
function isNeedClickThrough(assetID,assetEventType){
	var retVal = false,
		assetID = assetID.replace("wrapper","").replace("PlaceHolder",""),
		assetInteractionsData = getRequiredJSON('interactions',assetID),
		assetDetailsJSON = (assetID.search("asset") != -1) ? assetsDetailedJSON["customAsset."+assetID] : 0,
		isClickInteractionInJSON = null;
	if(assetEventType=="click" && !isEventInInteractions(assetInteractionsData,"click") && assetID != "scrollDownArrow" && assetID != "scrollUpArrow" && !isVideoElement(assetID)){
		retVal = true;
	}
	if(assetDetailsJSON && assetDetailsJSON.hasOwnProperty('disableClickThrough') && Number(assetDetailsJSON['disableClickThrough'])){
		retVal = false;
	}
	return retVal;
}
function Layout(){
}
Layout.prototype={
	constructor:Layout,
	globalAreaJSON: {},
	matchLayoutDim: "",
	layoutWidth: 0,
	layoutHeight: 0,
	activeSceneID: 'scene-1',
	isSceneSwitchAnimComplete: true,
	assetsTransitionJSON: {},
    assetAnimArr : [],
    animTypeJSON : {},
    assetInvokeTransitionsJSON: {},
	initTransitionsTimerJSON: {},
	transitionTimersArray: new Array(),
	enableFallback: true,
	activeModelAssetIDs: {},
	modelInitiaterAssetID: null,
		assetHoverTimer: {},
	isSceneInitialized: true,
	preLayoutDim: null,
	setDefaultParameters: function(){
		checkIsFlashAva();
					if(hasFlash){
				this.enableFallback = false;
			}
			},
	loadContainer: function(){
        var style = "";
        		createHTMLElement("body","div","eventHandler","position:absolute; top:-1000px; left:-1000px;");
		createHTMLElement("body","div","mask",style);
		createHTMLElement("body","div","closeBtnModel","");
		createHTMLElement("body","div","scenesContainer",style);  		loadLoader();
			},
	loadJSLib: function(){
			},
	setBGAsCompnent: function(){
		var backgroundDetails = adUnitNestedJSON[layoutObj.matchLayoutDim],
			actualBackgroundType = backgroundDetails['backgroundType'];
		if(!checkIsDataAva(backgroundDetails,"backgroundType")) return;
		var backgroundType = actualBackgroundType,
			backgroundURL = backgroundDetails['url'],
			fallbackType = backgroundDetails['fallbackType'],
			fallbackURL = backgroundDetails['fallbackURL'],
			fallbackWidgetSrc = backgroundDetails['fallbackWidgetSrc'],
			bgDimensionArr = backgroundDetails['dimension'].split("x"),
			bgWidth = bgDimensionArr[0],
			bgHeight = bgDimensionArr[1],
			useBGElmentStr = "",
			enableFallback = true;
		if(!validateVal(backgroundURL) && !validateVal(fallbackURL) && !validateVal(fallbackWidgetSrc)){
			return;
		}
		if(backgroundType == "flash"){
							if(hasFlash){
					var obj = {};
					obj.id = "componentBG";
					obj.src = backgroundURL;
					obj.width = bgWidth;
					obj.height = bgHeight;			
					obj.params = {'movie' : backgroundURL, 
								  'wmode' : 'transparent',
								  'allowScriptAccess' : 'always'
								  };
					useBGElmentStr = createSWF(obj);
				}
						if(this.enableFallback){
				if(fallbackType == "image"){
					useBGElmentStr = '<img src="'+fallbackURL+'" width="'+bgWidth+'" height="'+bgHeight+'">';
				}else if(fallbackType == "html5" || fallbackType == "swiffy"){
					backgroundType = "html5";
					backgroundURL = fallbackURL;
				}else if(fallbackType == "widget"){
					backgroundType = "widget";
					backgroundURL = fallbackWidgetSrc;
				}
			}	
		}
		if(backgroundType == "html" || backgroundType == "html5"){
			useBGElmentStr = '<iframe id="componentBG" src = "'+backgroundURL+'" marginwidth="0" marginHeight="0" style="width:'+bgWidth+'px;height:'+bgHeight+'px;" frameborder="0" scrolling="no" allowtransparency="true" style="visibility:hidden" onload="this.style.visibility=\'visible\';" seamless="seamless"><div></div>';
		}
		if(backgroundType == "widget"){
			useBGElmentStr = '<iframe id="componentBG" style="width:'+bgWidth+'px;height:'+bgWidth+'px;" frameborder="0" scrolling="no" allowtransparency="true" style="visibility:hidden" onload="this.style.visibility=\'visible\';" seamless="seamless"><div></div>';
		}
		document.getElementById(this.activeSceneID).innerHTML = useBGElmentStr;
		if(backgroundType == "widget"){
			var widgetStr = '<body>'+backgroundURL+'</body>';
			var bgAsIframeRef = document.getElementById("componentBG");
			var bgAsFrameWindow = bgAsIframeRef.contentWindow || bgAsIframeRef.contentDocument;
			bgAsFrameWindow.document.open('text/html', 'replace');
			bgAsFrameWindow.document.write(widgetStr);
			bgAsFrameWindow.document.close();
		}
			},
	setWrapperForBGAsHTML: function(bgWidth,bgHeight){
		useBGElmentStr = '<div id = "componentBGWrapper" style="position:absolute;left:0px;top:0px;width:'+bgWidth+'px;height:'+bgHeight+'px;"></div>';
		document.getElementById(layoutObj.activeSceneID).insertAdjacentHTML( 'beforeend', useBGElmentStr );
	},
	openClickThrough: function(clickUrl, e={}){
					var url = "https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=https%3A%2F%2Fflights.cathaypacific.com%2Fdestinations%2Fredirect%3Fedition%3Den_LK%26orig%3DCMB%26dest%3DPEK%26tc%3Dco%26utm_medium%3DDISPLAY%26utm_campaign%3D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%26utm_content%3DALWAYSON_PROSPECTING-V1%26utm_term%3DEN_LK%26utm_source%3DGBL-DV360";
			if(typeof clickUrl != "undefined" && clickUrl != "") {
														if(validateVal(cMacro) && (clickUrl.indexOf(cMacro) == -1)) {
							url = cMacro+encodeURIComponent(clickUrl);  								} else {
							url = clickUrl;
						}
							}
			eventMsg(layoutObj.activeSceneID+".clickThrough");
			url = urlFormat(url);
			                				window.open(url);
										var addnlParam = '';
								addnlParam += '/es_clickUrl=https%3A%2F%2Fflights.cathaypacific.com%2Fdestinations%2Fredirect%3Fedition%3Den_LK%26orig%3DCMB%26dest%3DPEK%26tc%3Dco%26utm_medium%3DDISPLAY%26utm_campaign%3D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%26utm_content%3DALWAYSON_PROSPECTING-V1%26utm_term%3DEN_LK%26utm_source%3DGBL-DV360';
				
				var eventObj = {};
				eventObj['ct'] = Date.now();												try {
					eventObj['tv'] = eventObj['ct'] - creativeResolveEndTime;						eventObj['clientWidth'] = e && e.target && e.target.clientWidth ? e.target.clientWidth : "";		
					eventObj['clientHeight'] = e && e.target && e.target.clientHeight ? e.target.clientHeight : "";
					eventObj['clientX'] = e && e.clientX !== undefined ? e.clientX : e && e.nativeEvent && e.nativeEvent.clientX ? e.nativeEvent.clientX : "";
					eventObj['clientY'] = e && e.clientY !== undefined ? e.clientY : e && e.nativeEvent && e.nativeEvent.clientY ? e.nativeEvent.clientY : "";
				
											var	clickTrackingParams = eventObj['ct'] ? '/c_ct=' + eventObj['ct'] : '';
							clickTrackingParams += eventObj['clientX'] ? '/c_cx=' + eventObj['clientX'] : '';
							clickTrackingParams += eventObj['clientY'] ? '/c_cy=' + eventObj['clientY'] : '';
							clickTrackingParams += eventObj['tv'] ? '/c_tv=' + eventObj['tv'] : '';
						addnlParam += clickTrackingParams;
									}catch(err) {
					console.log("Event object error " + err);
				}
									fireTracker(1, addnlParam, eventObj);
												fireViewableEvent();
						},
	loadCmacro: function(){
					var rand = Math.random();
			var imgElmt = document.createElement("img");
			var cMacroURL = "https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=https%3A%2F%2Fplayercdn.jivox.com%2F1700114009%2Fplayer%2Fimages%2Fpixeltracker.gif%3F" + "r_" + rand;
			imgElmt.src = cMacroURL;
				
	},
		init: function(){
		this.setDefaultParameters();
		this.loadContainer();
		this.matchLayoutDim = this.findMatchLayoutDim();
		if(!getRequiredJSON("components")) createDummyJSONForLayout();

				this.renderLayoutContainer();
		this.setBGAsCompnent();
		this.applyContainersCss();
		this.handleLayoutLoading();
					},
	deActivateAllScenesAsset: function(){
		var allDimJSON = getRequiredJSON(creativeUnitType),
			components = null,
			scenesJSON = null;
		for(var dim in allDimJSON){
			scenesJSON = allDimJSON[dim]['scenes'];
			for(var scene in scenesJSON){
				components = scenesJSON[scene]['components']
				for(var asset in components){
					deactivateAsset(asset);
					deactivateAsset(asset+scene);
				}
			}
		}
	},
	preSettingOnOrientation: function(){
		var self = this;
		self.preLayoutDim = self.matchLayoutDim;
		var fitToScreenAsset = self.getFitToSceneID(self.activeSceneID),
			tempFitToScreenID = fitToScreenAsset+self.activeSceneID+"ft";
		if(fitToScreenAsset){
			$("#"+tempFitToScreenID).hide();
		}
		var nextSceneID = "scene-1",
			currentSceneID = layoutObj.activeSceneID,
			self = layoutObj;
				layoutObj.pauseTransiton();
		deactivateModelLayer();
		$('#'+currentSceneID).css({"visibility":"hidden","top":"500000px","left":"0px","opacity":"0"});
		self.addSceneID(currentSceneID);
		layoutObj.activeSceneID = nextSceneID;
		$("#"+nextSceneID).css({"visibility":"visible", "top" : '0px', "left":"0px", "opacity":"1"});
		self.removeSceneID(nextSceneID);
	},
	postSettingOnOrientation: function(){
		var self = this;
		var centerSceneXY = corToCenterAlignOnWindow(layoutObj.layoutWidth,layoutObj.layoutHeight);	
		$('#scenesContainer').css({"left":centerSceneXY[0]+"px","top":centerSceneXY[1]+"px"});
        var fitToScreenAsset = layoutObj.getFitToSceneID(layoutObj.activeSceneID),
			tempFitToScreenID = fitToScreenAsset+self.activeSceneID+"ft";
		if(!fitToScreenAsset){
			$("#"+layoutObj.activeSceneID).css({"background":""});
		}else{
			$("#"+layoutObj.activeSceneID).css({"background":"transparent"});
			$("#"+tempFitToScreenID).css({"visibility":"visible", "top" : '0px', "left":"0px", "opacity":"1","margin-top":"0px","display":"block"});
		}
		if($("#scenesContainer #"+fitToScreenAsset).length) $("#scenesContainer #"+fitToScreenAsset).css({"margin-top":"5000px"});
			},
		onOrientationChange: function(){                       		if(layoutObj.matchLayoutDim == layoutObj.findMatchLayoutDim()){
			centerAlignSceneCnt();
			return;
		}
		layoutObj.deActiveScene();
		layoutObj.deActivateAllScenesAsset();
		layoutObj.preSettingOnOrientation();
		layoutObj.matchLayoutDim = layoutObj.findMatchLayoutDim();
		layoutObj.renderLayoutContainer();
		layoutObj.applyContainersCss();
				layoutObj.loadRenderLayoutComponent('scene-1');
		layoutObj.postSettingOnOrientation();
			},
	handleLayoutLoading: function(){                       
		var activeSceneDiv = document.getElementById(layoutObj.activeSceneID);
		activeSceneDiv.style.display = "block";
		this.initLayoutLoading();
	},
	applyContainersCss: function(){
		try{
		var layoutDimArr = this.matchLayoutDim.split("x"),
			layoutWidth = parseInt(layoutDimArr[0],10),
			layoutHeight = parseInt(layoutDimArr[1],10),
			orientationMode = "portrait";
		if(layoutWidth > layoutHeight){
			orientationMode = "landscape";
		}
		var bodyCSSClassname = orientationMode + this.matchLayoutDim;
		document.body.setAttribute("class",bodyCSSClassname);
		}catch(e){}
	},
	jqueryAndSceneCntLoaded: function(){
		$("#loader").remove().appendTo('body');
		bindEventModelLayer();
				jqueryAvailable();
	},
	initLayoutLoading: function(){
		layoutObj.loadJSLib();
		layoutEventHandling("scenesContainer",["click","mouseover","mouseout","mouseenter"],layoutObj.assetInteractionHandler);
		layoutObj.jqueryAndSceneCntLoaded();
		layoutObj.loadRenderLayoutComponent(layoutObj.activeSceneID);
		window.parent.postMessage('jvx_685e3d5a15742:' + 'expansionLoaded', "*");

		// Added ReportingObserver interface of reporting api to collect ad intervention reports.
		if ('ReportingObserver' in window) {
			const reportingObserver = new ReportingObserver((reports, observer) => {
				for (const report of reports) {
					const evsUrl = "https://as.jivox.com/unit/api/handleAdInterventions.php?campaignId=181754";

					const requestBody = JSON.stringify({
					siteId : playerParamsMap.siteId,
					campaignId : playerParamsMap.campaignId,
					adUnitIdx : playerParamsMap.adUnitId,
					adUnitType : 19,
					bDim : playerParamsMap.bDim,
					clickThrough : 100,
					jvxSessionId : playerParamsMap.jvxSessionId,
					isDynamic : playerParamsMap.isDynamic,
					es_pId : playerParamsMap.es_pId,
					ap_report : report.body,
					c_interventionType : "intervention",
					es_cgName : DYReportingKey,
					es_segName : DYSegmentName,
					c_timestamp: new Date().toISOString(),
					});

					const blob = new Blob([requestBody], { type: "application/json" });

					const success = navigator.sendBeacon(evsUrl, blob);

				}
			}, { types: ['intervention'], buffered: true });

			reportingObserver.observe();
		}
	},
	checkSceneAssetsLoaded: function(sceneID){
		var retVal = true;
		if($('#'+sceneID).is(':empty') || (!$('#'+sceneID+' div[id*=asset]').length && !$('#'+sceneID+' iframe[id*=asset]').length && !$('#'+sceneID+' object[id*=asset]').length && !$('#'+sceneID+' img[id*=asset]').length)) retVal = false;
		return retVal;
	},
	loadRenderLayoutComponent : function(sceneID){
		var self = this;
		self.renderLayoutPreSetting();
		if(!self.checkSceneAssetsLoaded(sceneID)){
			self.renderLayoutComponents(sceneID);
			self.isSceneAssetsLoaded(sceneID);
			self.isSceneInitialized = true;
		}else{
			self.renderLayoutComponents(sceneID);
			self.isSceneInitialized = false;
		}
	},
	sceneRevisited: function(sceneID){
		eventMsg(this.activeSceneID+".sceneLoaded");
	},
	renderLayoutPreSetting : function(){
		try{
		$("#"+this.activeSceneID).css({"visibility":"visible","top":"0px","left":"0px","opacity":"1"});
				if(!fitToScreenID.hasOwnProperty(this.matchLayoutDim))	fitToScreenID[this.matchLayoutDim] = {};
		}catch(e){}
	},
	renderLayoutCntPreSetting: function(){
		var layoutDim = layoutObj.matchLayoutDim;
			layoutDimArr = layoutDim.split("x");
		layoutObj.layoutWidth = Number(layoutDimArr[0]);
		layoutObj.layoutHeight = Number(layoutDimArr[1]);
	},
	renderLayoutContainer: function(){                     		this.renderLayoutCntPreSetting();
        var style = "";
        		var self = this;
		var layoutCreativeJSONData = getRequiredJSON(creativeUnitType),
			layoutScenesJSONData = getRequiredJSON('scenes'),
			sceneContainerDiv = document.getElementById("scenesContainer"),
			sceneDocumnetFragment=document.createDocumentFragment();
		for(var scenes in layoutScenesJSONData){
			if(document.getElementById(scenes) != null) continue;
			var sceneDiv = document.createElement('div');
			sceneDiv.id = scenes;
			sceneDiv.setAttribute("style",style+"background:transparent");
			sceneDocumnetFragment.appendChild(sceneDiv);
		}
		sceneContainerDiv.appendChild(sceneDocumnetFragment);
				var visibilityThreshold = layoutDimArr[0] * layoutDimArr[1] > 242500 ? 0.3 : 0.5;
		adViewabilityDetectInit(visibilityThreshold);
			},
	findMatchLayoutDim: function(){                      					var layoutCreativeJSONData = adUnitNestedJSON,
				layoutCount = 0,
				matchLayoutDim = 0;
			for(var layoutDimension in layoutCreativeJSONData){
				layoutDimensionArr = layoutDimension.split("x");
				this.globalAreaJSON[layoutDimension] = parseInt(layoutDimensionArr[0]) * parseInt(layoutDimensionArr[1]);
				matchLayoutDim = layoutDimension;
				layoutCount++;
			}
			if(layoutCount == 1){
				return matchLayoutDim;
			}
			var vpWidth = document.documentElement.clientWidth,
				vpHeight = document.documentElement.clientHeight;
						matchLayoutDim = this.getClosest(vpWidth, vpHeight, layoutCount);
				return matchLayoutDim;
	},
	getClosest: function(width, height,layoutCount){
		closest = null;
		str = "";
		excludeAddressBarHeight = 100;
		var leastDiff = 10000; 
		var layoutMatchRange = parseInt(1000);
		var closestMatch = null;
		var prevAssetWidth = 0;
		var prevAssetHeight = 0;
		var layoutCount = 0;
		var tmpLayout = null;
		var smallestWidth, smallestDim = null;
			globalLayouts = this.globalAreaJSON;
		for(var layoutItem in globalLayouts){
			cords = layoutItem.split('x');
			assetWidth = parseInt(cords[0]);
			assetHeight = parseInt(cords[1]);
			if(assetWidth == width && assetHeight == height){
				 
				return layoutItem;
			}
						if(((assetWidth == width) && (Math.abs(assetHeight - height)) <= excludeAddressBarHeight)){
				if(prevAssetHeight != 0 && (Math.abs(prevAssetHeight-height) < Math.abs(assetHeight-height))){
					continue;
				}
				closestMatch = layoutItem;
				prevAssetHeight = assetHeight;			
			}
					}
		if(closestMatch != null){
			 
			return closestMatch;
		}
		for(var layoutItem in globalLayouts){
			cords = layoutItem.split('x');
			assetWidth = parseInt(cords[0]);
			assetHeight = parseInt(cords[1]);
			if(assetWidth < width && (width - assetWidth) < leastDiff) {
				leastDiff = (width - assetWidth);
				closestMatch = layoutItem;
			} 
			if(!smallestWidth || assetWidth < smallestWidth) {
				smallestWidth = assetWidth;
				smallestDim = layoutItem;
			}
		}
				if(!closestMatch && smallestDim) {
			closestMatch = smallestDim;
		}
				if(closestMatch != null){
			return closestMatch;
		}
	},
	preSettingRLC: function(){
		if(!this.assetsTransitionJSON.hasOwnProperty(this.activeSceneID)){
			this.assetsTransitionJSON[this.activeSceneID] = {};
        	this.assetInvokeTransitionsJSON[this.activeSceneID] = {};
			        	this.activeModelAssetIDs[this.activeSceneID] = {};
        				       }else{
		    this.assetsTransitionJSON[this.activeSceneID] = {};
			this.assetInvokeTransitionsJSON[this.activeSceneID] = {};
	   }
	   			if(!fitToScreenID[this.matchLayoutDim].hasOwnProperty(this.activeSceneID)){
			fitToScreenID[this.matchLayoutDim][this.activeSceneID] = {"assetID":null};
		}
	},
	renderLayoutComponents: function(sceneID){                    		this.activeSceneID = sceneID;
		this.preSettingRLC();
		var sceneData = getRequiredJSON('components');
		for(var assetID in sceneData){
			if(this.isNeedToLoadAsset(assetID)){
				this.renderComponent(assetID);
                                activateAsset(assetID);
                			}
		}
        	},
	isNeedToLoadAsset: function(assetID){
		var isNeedToLoadAsset = true,
			assetData = getRequiredJSON('components',assetID);
		if(assetData.hasOwnProperty('options') && assetData['options'].hasOwnProperty('initVisible') && !parseInt(assetData['options']['initVisible'],10)){
			isNeedToLoadAsset = false;
		}
				return isNeedToLoadAsset;
	},
	checkForWebMobileOnly: function(assetID){
		var retVal = true,
			assetData = getRequiredJSON('components',assetID),
			layerOptionsJSON = getRequiredJSON('layerOptions');
		if(layerOptionsJSON){
			var ignoreLayerKey = "mobile";
						var ignoreLayerArr =  (layerOptionsJSON.hasOwnProperty(ignoreLayerKey) && layerOptionsJSON[ignoreLayerKey] != null) ? layerOptionsJSON[ignoreLayerKey].split(",") : false;
			if($.inArray(assetData['layerId']+"",ignoreLayerArr) != -1){
				retVal = false;
			}
		}
		return retVal;
	},
	resizePosAndDimAsset: function(assetID){
		if(isVideoElement(assetID)){
			var currentWidth = $('#'+assetID).attr('initWidth'),	
				currentHeight = $('#'+assetID).attr('initHeight'),
				assetWidth = findActualDimAsset(assetID)[0],
				assetHeight = findActualDimAsset(assetID)[1];
			if(currentWidth != assetWidth || currentHeight != assetHeight){
				var scaleW = assetWidth	/ currentWidth,
					scaleH = assetHeight / currentHeight;
				$("#"+assetID)[0].contentWindow.postMessage('jvx_685e3d5a15742:jvxScalePlayer:'+scaleW+'x'+scaleH, "*");
			}else{
				$("#"+assetID)[0].contentWindow.postMessage('jvx_685e3d5a15742:jvxNoScalePlayer', "*");
			}
		}
	},
	        checklayoutAssetInfo: function(assetID,key){
        var layoutAssetInfo = getRequiredJSON('components',assetID);
        options = layoutAssetInfo.hasOwnProperty("options") ? layoutAssetInfo["options"] : 0,
        bool = (options && options.hasOwnProperty(key)) ? Number(options[key]) : 0;
		return bool;
    },
	isFitToScreen: function(assetID){
		return this.checklayoutAssetInfo(assetID,"fitToScreen");
	},
    	renderComponent: function(assetID){                    	try{
		if(!this.checkForWebMobileOnly(assetID)) return;
		var self = this;
		if(self.isFitToScreen(assetID) && $('#'+assetID+self.activeSceneID+"ft").length){
			resizeFitToScreenImage(assetID);
			return;
		}else if(self.isFitToScreen(assetID) && $('#'+assetID).length){
			fitToScreenCopyToBody(assetID);
			return;
		}else if($('#'+assetID).length){
						this.resizePosAndDimAsset(assetID);
						return;
		}
						if(!$('#'+assetID).length){
			var layoutAssetInfo = getRequiredJSON('components',assetID),
				customAssetID = "customAsset."+assetID,
				assetDetailsJSON = assetsDetailedJSON[customAssetID],
				assetIconFileType = assetDetailsJSON['iconFileType'],
				assetIconFileName = assetDetailsJSON['iconFileName'],
				assetURL = assetDetailsJSON['icon'],
				dependentFile = assetDetailsJSON['dependentFiles'],
				assetType = assetDetailsJSON['type'],
				assetData = assetDetailsJSON['data'],
				assetWidgetData = assetDetailsJSON['widgetData'],
				assetIconDim = ((typeof assetDetailsJSON["origIconDimension"] == "string" && assetDetailsJSON["origIconDimension"] != "") ? assetDetailsJSON["origIconDimension"] : (typeof assetDetailsJSON["iconDimension"] == "string" && assetDetailsJSON["iconDimension"] != "" ? assetDetailsJSON["iconDimension"] : "[0,0]")).replace("[","").replace("]","").split(","),
				assetDimensionArr = layoutAssetInfo['location'].split(","),
				assetLeft = assetDimensionArr[0],
				assetTop = assetDimensionArr[1],
				assetWidth = assetDimensionArr[2],
				assetHeight = assetDimensionArr[3],
				assetEventType = assetDetailsJSON['eventType'],
				assetFallbackType = assetDetailsJSON['fallbackType'],
				assetFallbackImgURL = assetDetailsJSON['fallbackImgURL'],
				assetFallbackWidgetURL = assetDetailsJSON['fallbackWidgetURL'],
				assetFallbackWidgetSrc = assetDetailsJSON['fallbackWidgetSrc'],
				componentElementStr = "",
				assetClickHandler = assetDetailsJSON['clickHandler'],
				assetIconGlowColor = assetDetailsJSON['iconGlowColor'],
				assetIconParamString = assetDetailsJSON['iconParamString'],
				assetParamString = assetDetailsJSON['paramString'],
				assetClickTagURL = getParameterValue(assetIconParamString,"clickThroughURL"),
				assetIconBgTransparent = Number(assetDetailsJSON['isIconBgTransparent']),
				assetIconBgColor = (assetIconBgTransparent && assetIconBgTransparent != null) ? "transparent" : assetDetailsJSON['iconBgColor'],
				assetWmode = assetIconBgTransparent ? "transparent" : "",
				assetLayerID = layoutAssetInfo['layerId'],
				disableClickThrough = assetDetailsJSON.hasOwnProperty('disableClickThrough') ? Number(assetDetailsJSON['disableClickThrough']) : 0,
				showControlBar = (layoutAssetInfo.hasOwnProperty("options") && layoutAssetInfo["options"].hasOwnProperty("showControlBar")) ? layoutAssetInfo["options"]["showControlBar"] : 0,
				assetParamQueryStr = paramQueryStr,
								options = layoutAssetInfo.hasOwnProperty("options") ? layoutAssetInfo["options"] : 0,
				transitionTime = (options && options.hasOwnProperty("transitionTime")) ? Number(options["transitionTime"]) : 0,
				assetFitToScreen = (options && options.hasOwnProperty("fitToScreen")) ? Number(options["fitToScreen"]) : 0,
				initVisible = (options && options.hasOwnProperty("initVisible")) ? Number(options["initVisible"]) : 1,
				hoverIcon = checkIsDataAva(assetDetailsJSON,'hoverIcon'),
				mouseHoverTime = checkIsDataAva(options,"mouseHoverTime"),
				externalStartEventId  = Number(assetEventType)*100,
				scaleToFit = checkIsDataAva(assetDetailsJSON,'scaleToFit') == "0" ? false : true,
				isDynamic = checkIsDataAva(assetDetailsJSON,'virtual') == "1" ? true : false,
				adFormat = validateVal(assetDetailsJSON['adFormat']) ? assetDetailsJSON['adFormat'] : "0";
                assetParamQueryStr += addAdnlQueryStr([assetIconParamString,assetParamString]),
                scaleAssetToFit = playerParamsMap['ab_'+assetID+'_scaleToFit'],
                stretchAssetToFit = playerParamsMap['ab_'+assetID+'_stretchToFit'],
				responsiveAd = 0; // when responsiveAd = 1, then asset height and width will be set to 100% 
            									if(assetFitToScreen){
				fitToScreenID[self.matchLayoutDim][self.activeSceneID]['assetID'] = assetID;
			}
			if(!disableClickThrough){
				assetParamQueryStr = addParameter(assetParamQueryStr,["clickThroughURL=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360","clickTagURL="+assetClickTagURL]);
							}else{
				assetParamQueryStr =removeParameter(assetParamQueryStr,["clickTagURL","clickThroughURL"]);
							}
						if(assetIconGlowColor != null && assetIconGlowColor != ""){
				self.iconGlowEffect(assetID);
			}
						if(assetIconFileType == "flash"){
									if(hasFlash || orgHasFlash || !assetFallbackType){
						var obj = {};
						obj.id = assetID + 'PlaceHolder';
						obj.src = assetURL;
						obj.width = assetWidth;
						obj.height = assetHeight;
						obj.params = {'movie' : assetURL, 
									  'wmode' : 'transparent',
									  'allowScriptAccess' : 'always',
									  'flashvars' : 'assetId='+assetID+'&eventId='+assetEventType+'&'+assetParamQueryStr
									 };
						componentElementStr = createSWF(obj);
					}
								assetIconBgColor = (assetIconBgColor.search("#") == -1) ? ("#"+assetIconBgColor) : assetIconBgColor
				componentElementStr = '<div id='+assetID+' class="components" style="background:'+assetIconBgColor+'">'+componentElementStr+'</div>';
				if(this.enableFallback && assetFallbackType != null){
					if(assetFallbackType == "image"){
						assetIconFileType = "image";
						assetURL = assetFallbackImgURL;
					}else if(assetFallbackType == "html5" || assetFallbackType == "swiffy"){
						assetIconFileType = "custom-html-widget-file";
						assetURL = assetFallbackImgURL;
					}else if(assetFallbackType == "widget"){
						assetIconFileType = "custom-widget";
						componentElementStr = "";
						assetURL = assetFallbackWidgetSrc;
					}else if(assetFallbackType == "widget-url"){
						assetIconFileType = "custom-html-widget-file";
						componentElementStr = "";
						assetURL = assetFallbackWidgetURL;
					}else if(assetFallbackType == "widget-src"){
						assetIconFileType = "custom-widget";
						componentElementStr = "";
						assetURL = assetFallbackWidgetSrc;
					}
					if(assetIconBgTransparent && (assetIconFileType == "custom-html-widget-file")){
						assetURL = "/jivox/serverAPIs/getTransparentSwiffy.php?url="+assetURL;
					}
				}
				if(!hasFlash && !orgHasFlash && !assetFallbackType){
					componentElementStr = "";
				}
			}
			if(assetIconFileType == "image" && assetType != "asset-video"){
				componentElementStr = '<img id="'+assetID+'" src="'+assetURL+'" />';
			}
			if(assetIconFileType == "custom-html-widget-file"){
				var baseURL = assetURL;
				assetURL += "?externalWg=1&"+removeParameter(paramQueryStr,["versionId"])+"&assetID="+assetID+"&isMobile=&externalStartEventId="+externalStartEventId;
				var iframeAssetURL = (assetData && assetWidgetData) ? "about:blank" : 'about:blank';
				componentElementStr = '<iframe id="'+assetID+'"  src="'+iframeAssetURL+'"  marginwidth="0" marginheight="0" frameborder="0" scrolling="no" allowtransparency="true"'+
										'style="visibility:hidden" onload="this.style.visibility=\'visible\';">';
			}
									if(!assetFitToScreen){
				$(componentElementStr).appendTo('#'+this.activeSceneID);				
				
			}else{
					fitToscreen(componentElementStr);				
			}
						if(assetIconFileType == "custom-html-widget-file"){
									renderExtHTMLFile(assetURL,assetID,baseURL,assetData,assetWidgetData);
							}
						if(assetIconFileType == "custom-js-widget-file" || assetIconFileType == "custom-widget" || assetIconFileType == "text-widget"){
				componentElementStr = '<iframe id="'+assetID+'" frameborder="0" scrolling="no" allowtransparency="true"'+
										'style="visibility:hidden;"></iframe>';
				$(componentElementStr).appendTo('#'+this.activeSceneID);
				var widgetStr = "";
				if(assetIconFileType == "custom-js-widget-file"){
					widgetStr = '<body><script src="'+assetURL+'"><\/script></body>';
				}
				if(assetIconFileType == "custom-widget"){
					var widgetParamInfo = getWidgetParamStr(assetID);
					widgetStr = '<head><script>'+widgetParamInfo+'<\/script>';
											widgetStr += '<script id="jvxWidget" src = "'+jivoxWidget+'"><\/script>';
									
					widgetStr += '<style>'+self.getStyeleCW()+'</style></head>';
					widgetStr += '<body>'+assetURL+'</body>';
					
				}
								var widgetIframeRef = document.getElementById(assetID);
				attachEventListener(widgetIframeRef, "load", function(){ widgetIframeRef.style.visibility = 'visible'; }, false);
				var widgetFrameWindow = widgetIframeRef.contentWindow || widgetIframeRef.contentDocument;
				widgetFrameWindow.document.open('text/html', 'replace');
				widgetFrameWindow.document.write(widgetStr);
				widgetFrameWindow.document.close();
			}
			if(isWrapperForAssetReq(assetID)){
												componentElementStr = '<div id="'+assetID+'wrapper" style="position:absolute;left:'+assetLeft+'px;top:'+assetTop+'px;width:'+assetWidth+'px;height:'+assetHeight+'px;z-index:'+assetLayerID+'"></div>';
				$(componentElementStr).appendTo('#'+this.activeSceneID);
			}
						self.setHoverIcon({assetID:assetID,options:options,icon:assetURL,assetDetailsJSON:assetDetailsJSON});
			if(self.assetHasInteractionOnEvent(assetID,"hover")){
				self.setTimerOnHover(assetID);
			}
			self.postSettingRenderComponent(assetID);
					}
		
                
		if(scaleAssetToFit == 1){
                        if(assetType == "asset-video" || assetIconFileType == "external-video"){
                $('#'+assetID).css({width:'100%',height:assetHeight,'top':'0','left':'0'});
            } else {
                $('#'+assetID).css({width:'100%',height:'auto','top':'0','left':'0'});
            }
		}
		if(stretchAssetToFit == 1 || responsiveAd == 1){
			$('#'+assetID).css({width:'100%',height:'100%','top':'0','left':'0'});
		}	
				
	}catch(e){
			}
						assetVariantReportingQueue.push(assetID);
				},
	postSettingRenderComponent: function(assetID){
		var disableClickThrough = Number(getRequiredAssetDetail(assetID,"disableClickThrough")),
			interactionData = getRequiredJSON("interactions",assetID),
			assetIconFileType = getRequiredAssetDetail(assetID,"iconFileType");
		if(disableClickThrough){
			$("#"+assetID).css({"cursor":"auto"});
					}
		if(interactionData){
			$("#"+assetID).css({"cursor":"pointer"});
		}
		
	},
	getStyeleCW: function(){
		return "body{padding:0;margin:0;}";
	},
		iconGlowEffect: function(assetID){
					var assetInteraction = getRequiredJSON('interactions',assetID),
				customAssetID = "customAsset."+assetID,
				assetDetailsJSON = assetsDetailedJSON[customAssetID],
				assetIconGlowColor = assetDetailsJSON['iconGlowColor'];
			if($('#glowStyleContainer').length == 0){
				$("<style type='text/css' id='glowStyleContainer'></style>").appendTo("head");
			}
			glowClass = '.shadowGlow'+assetID+'{box-shadow: 0 0 3px 3px '+assetIconGlowColor+';-moz-box-shadow: 0 0 3px 3px '+assetIconGlowColor+';-webkit-box-shadow: 0 0 3px 3px '+assetIconGlowColor+';/*-ms-filter: "progid:DXImageTransform.Microsoft.Glow(Strength=3,Color='+assetIconGlowColor+')";filter: progid:DXImageTransform.Microsoft.Glow(Strength=3, Color='+assetIconGlowColor+');*/}';

		try{
				$('#glowStyleContainer').append(glowClass);
		}catch(e){ 				glowClass = document.getElementById('glowStyleContainer').styleSheet.cssText + glowClass;
				document.getElementById('glowStyleContainer').styleSheet.cssText = glowClass;									
		}
			window.setTimeout(function(assetID){
				$("#"+assetID).on({"mouseover":function(){
					$(this).addClass('shadowGlow' + assetID);
				},"mouseout":function(){
					$(this).removeClass('shadowGlow' + assetID);
				}});
			},1,assetID);
			},
	setHoverIcon: function(o){
		var hoverIcon = checkIsDataAva(o.assetDetailsJSON, 'hoverIcon'),
		    hoverEffect = checkIsDataAva(o.assetDetailsJSON, 'hoverEffect'),
			hoverOpacity = checkIsDataAva(o.assetDetailsJSON, 'hoverOpacity');
		if(!validateVal(hoverIcon) && !validateVal(hoverEffect) && !validateVal(hoverOpacity)){
			return;
		}
		var assetOpacity = checkIsDataAva(o.options,"opacity");
 		o.hoverIcon = getValueWithDefault(hoverIcon,o.icon);
		o.hoverEffect = getValueWithDefault(hoverEffect,null);
		o.assetOpacity = getValueWithDefault(assetOpacity,1);
		o.hoverOpacity = getValueWithDefault(hoverOpacity,o.assetOpacity);
		if(o.assetOpacity != 1){
			$("#"+o.assetID).css({"opacity":o.assetOpacity});
		}
		if(o.icon != o.hoverIcon){
			$("<img />").attr("src",o.hoverIcon);
		}
		if(o.hoverEffect == "fade"){
			(function(o){
				if(o.icon == o.hoverIcon){
					$("#"+o.assetID).hover(function(){
						$(this).stop().animate({opacity:o.hoverOpacity}, 250,function(){
						});
					},function(){
						$(this).stop().animate({opacity:o.assetOpacity}, 250,function(){
						});
					});
				}else{
					$("#"+o.assetID).hover(function(){
						$(this).stop().animate({opacity:0.3}, 250,function(){
							$(this).attr('src',o.hoverIcon).animate({opacity:o.hoverOpacity},250);
						});
					},function(){
						$(this).stop().animate({opacity:0.3},250, function(){
							$(this).attr('src',o.icon).animate({opacity:o.assetOpacity},250);
						});
					});
				}
			})(o);
		}else if(!o.hoverEffect || o.hoverEffect == "none"){
			(function(o){
				$("#"+o.assetID).hover(function(){
					$(this).attr('src',o.hoverIcon).css({"opacity":o.hoverOpacity});
				},function(){
					$(this).attr('src',o.icon).css({"opacity":o.assetOpacity});;
				});
			})(o);
		}
	},
	assetMouseOverCallback: function(assetID){
		this.invokeInteractions(assetID);
	},
	assetClickCallback: function(assetID){
		this.invokeInteractions(assetID);                  
	},
	disableEvent: function(obj){
		var retVal = false,
			assetID = obj.assetID;
		if((obj.assetEventType != "click") && (!assetID.search("scene-") || !obj.assetInteractionsData )){
			retVal = true;
		}
		if(getRequiredAssetDetail(assetID,"iconFileType") == "flash" && hasFlash && getRequiredAssetDetail(assetID,"clickHandler") != "system"){
			retVal = true;
		}
		if((obj.assetEventType == "click") && (assetID == "scrollDownArrow" || assetID == "scrollUpArrow")){
			retVal = true;
		}
				return retVal;
	},
	assetHasEventInteractionSet: function(obj){
		var retVal = false,
			assetEventType = obj.assetEventType,
			assetInteractionsData = obj.assetInteractionsData,
			srcEvent = null;
		$.each(assetInteractionsData, function(index, data){
			srcEvent = data['srcEvent'];
			if((srcEvent == assetEventType) || (srcEvent == "mouseover" && assetEventType == "mouseout")){
				retVal = true;
			}
		});
		return retVal;
	},
	assetInteractionHandler: function(event){              		var self = layoutObj,
			eventSrc = event.target || event.srcElement,
			assetEventType = event.type,
			assetID = eventSrc.id.replace("wrapper","").replace("PlaceHolder",""),
			assetInteractionsData = getRequiredJSON('interactions',assetID),
			options = getRequiredJSON('components',assetID),
			mouseHoverTime = options.hasOwnProperty("mouseHoverTime") ? options["mouseHoverTime"] : 0,
			obj = {assetID:assetID,assetEventType:assetEventType,assetInteractionsData:assetInteractionsData,event:event};
				self.invokeInteractsAndTrans(obj);
	},
	invokeInteractsAndTrans: function(obj){
				if(obj.assetEventType == "click" || typeof obj.assetEventType == "undefined"){
			doAssetVariantReporting("click", obj.assetID);
		}
				if(layoutObj.disableEvent(obj)) return;
		var assetID = obj.assetID,
			assetEventType = obj.assetEventType;
		if(isNeedClickThrough(assetID,assetEventType)){
			layoutObj.openClickThrough('',obj.event);
			clickedOnInteraction();
			return;
		}
					if(!layoutObj.assetHasEventInteractionSet(obj)) return;
				if(assetEventType == "click") clickedOnInteraction(); 
		if(typeof assetEventType == "undefined") assetEventType = "click";
		layoutObj.invokeInteractions(assetID,assetEventType);
		layoutObj.invokedTransitions(assetID,assetEventType);
		eventMsg(assetID+"."+assetEventType);
	},
	setTimerOnHover: function(assetID){
				var self = layoutObj,
			assetData = getRequiredJSON('components',assetID),
			options = assetData.hasOwnProperty("options") ? assetData["options"] : 0,
			mouseHoverTime = options && options.hasOwnProperty("mouseHoverTime") && !isMobile ? options["mouseHoverTime"] : 0;
		$("#"+assetID).hover(function(){
			self.assetHoverTimer[assetID] = setTimeout(function(){
				layoutObj.invokeInteractions(assetID,"hover");
				layoutObj.invokedTransitions(assetID,"hover");
			},mouseHoverTime*1000);
		},function(){
			clearTimeout(self.assetHoverTimer[assetID]);
		});
		return true;
	},
	clearTimeOnHover: function(){
		for(var key in layoutObj.assetHoverTimer){
			clearTimeout(layoutObj.assetHoverTimer[key]);
		}
	},
	invokeInteractions: function(assetID,assetEventType,noTracker){
		var assetInteractionsData = getRequiredJSON('interactions',assetID),
			eventBasedJSON = [],
			srcEvent,
			destObject,
			options,
			trackAsClickThrough=0,
			assetDestAction,
			eventType = (!isVideoElement(assetID) && assetID.search("scene-") == -1) ? getRequiredAssetDetail(assetID,'eventType') : "";
		$.each(assetInteractionsData, function(index, data) {
			srcEvent = data['srcEvent'];
			destObject = data['destObject'];
			assetDestAction = data['destAction'];
			if(srcEvent == assetEventType){
				eventBasedJSON.push(data);
				options = (data.hasOwnProperty('options')) ? data['options'] : undefined;
				if(typeof options != 'undefined' && trackAsClickThrough == 0){
					trackAsClickThrough = options.hasOwnProperty('trackAsClickThrough') ? options['trackAsClickThrough'] : 0;
				}
			}
		});
		$.each(eventBasedJSON,function(index, data){
						if(data['destAction'] == 'openExpansion'){
				postMsgToParent("changeExpandEventTohover:"+assetEventType);
			}
			layoutObj.doInteraction(data);
		});
				if(eventBasedJSON.length && !layoutObj.hasOpenORCloseExpansion(assetID,assetEventType) && (typeof noTracker == "undefined" || noTracker) && assetEventType.indexOf("mouseover") == -1 && assetEventType .indexOf("mouseout") == -1 && assetEventType .indexOf(".click") == -1 && assetDestAction != 'openClickThrough'){
			eventType = getEventIdOnType(eventType,assetEventType);
			var addnlEvtParam = "";
						var clickUrl = getRequiredAssetDetail(destObject,'icon');
			clickUrl = clickUrl ? encodeURIComponent(clickUrl) : "";
			if(clickUrl)
				addnlEvtParam = '/es_clickUrl=' + clickUrl;
						if(trackAsClickThrough == 1){
				addnlEvtParam += "/es_fireEvent=" + (parseInt(eventType) + 700);
				fireTracker(eventType, addnlEvtParam);
				fireViewableEvent();
			}else{
				var self = layoutObj;
				if(self.assetHasInteractionOnDestAction(assetID,"skipAd")){
					fireTracker(45);
				}else{
					fireTracker(eventType, addnlEvtParam);
				}
			}
		}
			},
	hasOpenORCloseExpansion: function(assetID,assetEventType){
		var retVal = false,
			assetInteractionsData = getRequiredJSON('interactions',assetID),
			srcEvent = null;
		$.each(assetInteractionsData,function(index, data){
			srcEvent = data['srcEvent'];
			if(srcEvent == assetEventType && (data['destAction'] == "openExpansion" || data['destAction'] == "closeExpansion")){
				retVal = true;
			}
		});
		return retVal;
	},
	assetHasInteractionOnEvent: function(assetID,assetEventType){
		var retVal = false,
			assetInteractionsData = getRequiredJSON('interactions',assetID),
			srcEvent = null;
		$.each(assetInteractionsData,function(index, data){
			srcEvent = data['srcEvent'];
			if(srcEvent == assetEventType){
				retVal = true;
			}
		});
		return retVal;
	},
	assetHasInteractionOnDestAction: function(assetID,destActionType){
		var retVal = false,
			assetInteractionsData = getRequiredJSON('interactions',assetID),
			srcEvent = null;
		$.each(assetInteractionsData,function(index, data){
			srcEvent = data['destAction'];
			if(srcEvent == destActionType){
				retVal = true;
			}
		});
		return retVal;
	},
	postMsgSkipAdToParent: function(assetIDHasSkip){
		var self = this;
		if(self.assetHasInteractionOnEvent(assetIDHasSkip,"click") && self.assetHasInteractionOnDestAction(assetIDHasSkip,"skipAd")){
			postMsgToParent("skipStateChaged");
		}
	},
	doInteraction: function(obj){
		var destAction = obj['destAction'],
			destObject = obj['destObject'],
			assetDetailsJSON = null,
			url = null,
			destObjOption = checkIsDataAva(getRequiredJSON("components",destObject),"options"),
			trackAsClickThrough;
			if(obj.hasOwnProperty('options')){
				trackAsClickThrough = obj['options'].hasOwnProperty('trackAsClickThrough') ? obj['options']['trackAsClickThrough'] : 0;
			}else{
				trackAsClickThrough = 0;
			}
		if(destAction == "show"){
			if(!$("#"+destObject).length){
				this.renderComponent(destObject);
				if(checkIsDataAva(destObjOption,"appearanceEffects")){
					deactivateAsset(destObject);
				}
			}
			if(!hasAppearEffect(destObject)){
				activateAsset(destObject);
				if(checkIsDataAva(destObjOption,"modal") == 1){
					if(self.modelInitiaterAssetID != assetID){
						self.modelInitiaterAssetID = assetID;
						deactivateModelLayer();
					}
					activateModelLayer(destObject);
				}
			}
		}else if(destAction == "hide"){
			if(!checkIsDataAva(destObjOption,"disappearanceEffects")){
				deactivateAsset(destObject);
			}
		}else if(destAction == "animate"){

		}else if(destAction == "switchScene"){
			this.invokeSceneSwitch(obj);
		}else if(destAction == "openExpansion" || destAction == "closeExpansion"){
			if(destAction == "openExpansion"){
				expansionOpen = true;
			}else{
				expansionOpen = false;
			}
			layoutObj.deActiveScene({animPause:0});
						openClickThrough();
					}else if(destAction == "open"){
			layoutObj.openURLInteraction(destObject, trackAsClickThrough);
		}else if(destAction == "play"){
					}else if(destAction == "pause"){
					}else if(destAction == "mute"){
					}else if(destAction == "unmute"){
					}else if(destAction == "openClickThrough"){
			openClickThrough();
		}else if(destAction == "skipAd"){
			pauseAllVideos();
						postMsgToParent("player."+destAction);
		}else if(destAction == "initiate"){
			if(getRequiredAssetDetail(destObject,"type")=="asset-video"){
							}else{
				reloadAsset(destObject);
			}
					}
		this.msgConfiguredInWidget(obj);
	},
	openURLInteraction: function(assetID,trackAsClickThrough){
		var url = getRequiredAssetDetail(assetID,"externalPostURL"),
			eventType = getRequiredAssetDetail(assetID,"eventType"),
			icon = getRequiredAssetDetail(assetID,"iconFileType");
		url = (!url) ? getRequiredAssetDetail(assetID,"icon") : url;
		var shareMsg = getRequiredAssetDetail(assetID,"shareMsg");
		url += (shareMsg != null && shareMsg != "") ? "&text="+shareMsg : "";
		var externalTrackerData = externalTrackerForEvent(eventType);
		if(externalTrackerData){
			url = externalTrackerData['trackerURL'];
		}
        		url = urlFormat(url);
					if(trackAsClickThrough == 1){
								url = (validateVal(cMacro) && (url.indexOf(cMacro) == -1)) ? cMacro+encodeURIComponent(url): url;
							}
				window.open(url);
	},
	msgConfiguredInWidget: function(obj){
		var destAction = obj['destAction'],
			destObject = obj['destObject'],
			iconWidgetType = Number(getRequiredAssetDetail(destObject,"iconWidgetType"));
		if(getRequiredAssetDetail(destObject,"iconFileType") != "custom-widget" || !$("#"+destObject).length) return;
		if((iconWidgetType == "" || !iconWidgetType)){
			try{
				$("#"+destObject)[0].contentWindow.receiveMsgOnWidgetConfig(destAction);
			}catch(e){}
		}
	},
	invokedTransitions: function(assetID,eventType){           	},
  		hideTransitionElement: function(assetID){
		var needToDoTransition = true;
		needToDoTransition = (typeof $("#"+assetID).data("animInitiateBy") != "undefined" && $("#"+assetID).data("animInitiateBy") != assetID ) ? false : true;
		if(needToDoTransition){
			deactivateAsset(assetID);
		}
	},
	assetHasShowHideTransition: function(obj,sourceID){
		var self = this,
			transitionOutTime = obj.transitionOutTime,
			transitionMode = obj.transitionMode,
        	assetID = obj.assetID,
        	object = {},
        	sourceID = typeof sourceID != "undefined" ? sourceID : null;
		this.transitionTimersArray[this.transitionTimersArray.length] = window.setTimeout(function(data,sourceID){
			obj.assetID = data.assetID;
			obj.displayMode = "hide";
			obj.transitionMode = data.transitionMode;
			if(self.isNeedToDoTransition(obj.assetID,"hide",sourceID)){
				self.doThisAssetTransition(obj);
			}
		},transitionOutTime*1000,{assetID:assetID,transitionMode:transitionMode},sourceID);
	},
		isSceneAssetsLoaded: function(sceneID){
		bgInlineEmpty(sceneID);
		if(sceneID == "scene-1") eventMsg(sceneID+".sceneInitialised");
		if(sceneID != "scene-1"){
							$("#loader,#mask").show();
							
		} 
		var iframeLoaded = 0,
			imgLoaded = 0,
			totalIframe = $("#"+sceneID+" iframe").size(),
			totalImage = $("#"+sceneID+" img").size();
		$("#"+sceneID+" iframe").each(function(){
			if($(this)[0].contentWindow.document.readyState == 'complete'){
				iframeLoaded++;
			} else {
				$(this).load(function(){
					if($(this).attr("src") == "about:blank" ){
						var currentFrame = $(this)[0];
						var currentFrameWin = currentFrame.contentWindow;
						if(currentFrameWin && currentFrameWin.jvxWidgetLoaded){ 							iframeLoaded++;
						}
					}	
					else{
						iframeLoaded++;
					}
				}).error(function(){
					iframeLoaded++;
				});
			}
		});
					$("#"+sceneID+" img").one("load").each(function() {
				$(this).load(function(){
					imgLoaded++;
				}).error(function(){
					imgLoaded++;
				});
				if(this.complete) $(this).load();
			});
				
		var checkLoader = setInterval(function(){
			if(totalIframe <= iframeLoaded  && totalImage <= imgLoaded){
				clearInterval(checkLoader);
									$("#loader,#mask").hide();
									sceneLoaded();
				eventMsg(sceneID+".sceneAssetsLoaded");
			}
		},100);
	},
	invokeSceneSwitch: function(obj){
	try{
		var speed = 1000,
			self = this,
			currentSceneID = this.activeSceneID,
			nextSceneID = obj['destObject'],
			switchSceneMode = obj['options']['switchSceneMode'],
			slideDirection = null,
			dimArr = this.matchLayoutDim.split("x");
		if(!self.isSceneSwitchAnimComplete) return;
		self.isSceneSwitchAnimComplete = false;
		self.deActiveScene();
		self.activeSceneID = nextSceneID;
		self.addSceneID(currentSceneID);
		self.removeSceneID(nextSceneID);
		layoutObj.loadRenderLayoutComponent(nextSceneID);
		this.activeScene(nextSceneID);
		self.removeSceneID(currentSceneID);
		var curr_fitToScreen = layoutObj.getFitToSceneID(currentSceneID),
			next_fitToScreen = layoutObj.getFitToSceneID(nextSceneID);
		if($("#scenesContainer #"+next_fitToScreen).length) $("#scenesContainer #"+next_fitToScreen).css({"margin-top":"5000px"});
		curr_fitToScreen += currentSceneID + "ft";
		next_fitToScreen += nextSceneID + "ft";
		if(switchSceneMode == "immediate"){
			self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
					    $("#"+nextSceneID).css({"visibility":"visible", "top" : '0px', "left":"0px", "opacity":"1"});
								}else if(switchSceneMode == "fade" || switchSceneMode == "move"){
			$('#'+currentSceneID).css({"visibility":"visible","top":"0px","left":"0px"}).animate({opacity:'0'},speed,function(){
					self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
			});
					    $("#"+nextSceneID).css({"visibility":"visible", "top" : '0px', "left":"0px", "top":"0px","opacity":"0"})
		        				.animate({opacity:'1'},speed,function(){
											
								});
					}else if(switchSceneMode == "slide"){
			slideDirection = obj['options']['sceneSlideDirection'];
			if(slideDirection == "top"){
				$('#'+currentSceneID).animate({top:'-'+dimArr[1]+'px'},speed,function(){
					self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
				});
						        $("#"+nextSceneID).css({"visibility":"visible", "top" : ''+dimArr[1]+'px', "left":"0px", "opacity":"1"})
		        				.animate({top:'0px'},speed,function(){
																	});	
			 
							}else if(slideDirection == "bottom"){
				$('#'+currentSceneID).animate({top:''+dimArr[1]+'px'},speed,function(){
					self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
				});
						        $("#"+nextSceneID).css({"visibility":"visible", "top" : '-'+dimArr[1]+'px', "left":"0px", "opacity":"1"})
		        				.animate({top:'0px'},speed,function(){
																	});
							}else if(slideDirection == "left"){
				$('#'+currentSceneID).css({"top":"0px"}).animate({left:'-'+dimArr[0]+'px'},speed,function(){
					self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
				});
						        $("#"+nextSceneID).css({"visibility":"visible", "left" : ''+dimArr[0]+'px', "top":"0px", "opacity":"1"})
		        				.animate({left:'0px'},speed,function(){
																	});
							}else if(slideDirection == "right"){
				$('#'+currentSceneID).css({"top":"0px"}).animate({left:''+dimArr[0]+'px'},speed,function(){
					self.onSceneSwitchAnimComplete(currentSceneID,nextSceneID);
				});
						        $("#"+nextSceneID).css({"visibility":"visible", "left" : '-'+dimArr[0]+'px', "top":"0px", "opacity":"1"})
		        				.animate({left:'0px'},speed,function(){
																	});
							}
		}
	 }catch(e){
	 }
	},
	onSceneSwitchAnimComplete: function(currentSceneID,nextSceneID){
		var self = layoutObj;
		self.isSceneSwitchAnimComplete = true;
				$("#"+currentSceneID).css({"visibility":"hidden","opacity":"0","top":"500000px"});
		self.addSceneID(currentSceneID);
		self.filmStripArrowHandling(nextSceneID);
	},
	removeSceneID: function(sceneID){
		var comp_ID;
		$('#'+sceneID).children().each(function(){
			comp_ID = $(this).attr("id");
    	    if(comp_ID != undefined){
				comp_ID = comp_ID.replace(sceneID,"");
		    	$(this).attr("id",comp_ID);
		    }
		});
		$("#"+sceneID+" div > object").each(function(){
			$(this).attr("id", $(this).attr("id").replace(sceneID,""));
			$(this).attr("name", $(this).attr("name").replace(sceneID,""));
		});
	},
	addSceneID: function(sceneID){
		var comp_ID;
		$('#'+sceneID).children().each(function(){
			comp_ID = $(this).attr("id");
    	    if(comp_ID != undefined){
		    	$(this).attr("id",comp_ID+sceneID);
		    }
		});
		$("#"+sceneID+" div > object").each(function(){
			$(this).attr("id",$(this).attr("id")+sceneID);
			$(this).attr("name",$(this).attr("name")+sceneID);
	  	});
	},
	getFitToSceneID: function(sceneID){
		var fitToScreenAssetID = fitToScreenID[layoutObj.matchLayoutDim].hasOwnProperty(sceneID) ? fitToScreenID[layoutObj.matchLayoutDim][sceneID]['assetID'] : null;
		return fitToScreenAssetID;
	},
	deActiveScene: function(o){
		var animPause = (checkIsDataAva(o,"animPause")) ? o.animPause : 1;
				deactivateModelLayer();
		eventMsg(this.activeSceneID+".sceneUnloaded");
		var assetComponentJSON = getRequiredJSON('components');
		if(animPause){
			this.pauseTransiton();
			for(var assetID in assetComponentJSON){
				$("#"+assetID).stop().velocity('stop',true).css({"transform":"","left":"","top":"","opacity":""});
			}
		}
	},
	activeScene: function(sceneID){
				var assetComponentJSON = getRequiredJSON('components');
		var options;
		for(var assetID in assetComponentJSON){
			if(!hasAppearEffect(assetID)){
								activateAsset(assetID);
			}
			options = (assetComponentJSON[assetID].hasOwnProperty('options') && assetComponentJSON[assetID]['options']) ? assetComponentJSON[assetID]['options'] : false;
			if(options && options.hasOwnProperty('initVisible') && !INT(options['initVisible'])){
								removeAsset(assetID);
							}
			if(options.hasOwnProperty('transitionOutTime')){	
				if($("#"+assetID).length) $("#"+assetID).data("animInitiateBy",assetID);	
			}; 
			if(options.hasOwnProperty('transitionTime')){ 	
				deactivateAsset(assetID);	
				if($("#"+assetID).length) $("#"+assetID).data("animInitiateBy",assetID);
			}
		}
				if(!layoutObj.isSceneInitialized){
			layoutObj.sceneRevisited();
		}else{
			eventMsg(sceneID+".sceneInitialised");
		}
	},
	pauseTransiton: function(){
		if(!this.transitionTimersArray.length) return;
		for(var timer in this.transitionTimersArray){
			clearTimeout(this.transitionTimersArray[timer]);
		}
	},
			filmStripArrowHandling: function(nextSceneID){
			}
}
var layoutObj = new Layout();
			//If there is no adUnitId in playerParams or bUnitId or eUnitId.(Mostly for mobile adUnit)
	layoutObj.matchLayoutDim = layoutObj.findMatchLayoutDim();		//Added this for snowblaze ph-2 to get the dimension of rendered ad soon after layout is initialized incase of adUnitId and dimension not available to include in the evs calls.
		recordEvent(66, '/es_et=' + creativeResolveElapseTime);
							var addnlParam = "/c_Auctionid=ABAjH0i1VZJ1q96Rb_J6YQzuX5n4/c_dv360_source_url=https%3A%2F%2Fwww.w3schools.com%2Fcss%2Fcss_boxmodel.asp/clickMacro=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ij/cacheMacro=1751006552849734/pageUrl=https%3A%2F%2F9c9616ddc64049079f426fb3b4733aae.safeframe.googlesyndication.com%2Fsafeframe%2F1-0-45%2Fhtml%2Fcontainer.html";
							recordEvent(77, addnlParam);
						function dyTrackers(){
						if(dynamicJSONData && dynamicJSONData.hasOwnProperty("trackers") && dynamicJSONData.trackers.hasOwnProperty("1") && dynamicJSONData.trackers['1'].length>0){
				var clickTrackers = dynamicJSONData['trackers']['1'];
				for(var key in clickTrackers){
					var DYclickTrackers = {
						"eventId" : "1",
						"placementId" : "3d372812",
						"trackerType" : "2",
						"trackerURL" : clickTrackers[key],
					}
				trackersAllJSON.push(DYclickTrackers);
				}
			}
						if(dynamicJSONData && dynamicJSONData.hasOwnProperty("trackers")){
			if(dynamicJSONData.trackers.hasOwnProperty("60") && dynamicJSONData.trackers['60'].length>0){
				var data = dynamicJSONData['trackers']['60'];
				for(var key in data){
					getRequest(data[key],1);
				}
			}
						if(dynamicJSONData.trackers.hasOwnProperty("60_scr") && dynamicJSONData.trackers['60_scr'].length > 0){
				var data = dynamicJSONData['trackers']['60_scr'];
				for(var key in data){
					getRequest(data[key],1,'script');
				}
			}
				
		}
			}
		var clickTrackers = [];
	var trackersAllJSONLen = trackersAllJSON.length;
	for(var i=0; i<trackersAllJSONLen; i++){
		value = trackersAllJSON[i];
		if(value['eventId'] == '1'){
			if(value['trackerType'] == 2 && value['appendClicksForSecTrackers'] != true){						clickTrackers.push(encodeURIComponent(value['trackerURL']));
			}
		}
	}
	if(clickTrackers.length > 0) {
		window.parent.postMessage('jvx_685e3d5a15742:clickTrackers:'+ (clickTrackers) , "*");
	}
layoutObj.init();
		
			function fireExternalTrackers(trackerURL){
			var scriptEl = document.createElement('script');							scriptEl.setAttribute('src', trackerURL);
			document.body.appendChild(scriptEl);
		}
		function fireViewabilityTrackers() {									var moatTrackersJSON = [],
			trackersAllJSONValue = null;
		if(trackersAllJSON.length > 0) {
			for(var i=0; i<trackersAllJSON.length; i++){
				trackersAllJSONValue = trackersAllJSON[i];
				if(trackersAllJSONValue['eventId'] == 76){
																if(trackersAllJSONValue['trackerType'] == 7){
							fireExternalTrackers(trackersAllJSONValue.trackerURL);
						}
										}
			}
					}
	}
	fireViewabilityTrackers();

// dynamicDataKey stores changes for creative-asset-variant => ROI
function getDynamicAssetData(assetID){
     	 if(typeof(dynamicJSONData) != 'undefined'){
	  if(dynamicJSONData.hasOwnProperty('asset-data') && dynamicJSONData['asset-data'].hasOwnProperty(assetID)){
		   for(var key in  dynamicJSONData['asset-data'][assetID]){
			   // The Asset transformation data, the type will be object. Eg: "asset101":{"jvx_image_1":{"url":"https://jivoxdevuploads.s3.amazonaws.com/as/files/44939/fit-css.png", ...}}
				var assetVal = dynamicJSONData['asset-data'][assetID][key],
					assetType = typeof assetVal,
			    	urlFromAssetData = assetType === 'object' ? assetVal?.url : assetVal,
					isImageURL = false;

				if(key != '_reporting-keys') {
					isImageURL = urlFromAssetData ? checkIsImageURL(urlFromAssetData) : null;	//Feed case, if any cell is empty it returns false in boolean type
					if(isImageURL) {
						var encodedSpaceInUrl = urlFromAssetData.replace(/ /g, '%20');
						if(assetType === 'object') {
							assetVal['url'] = encodedSpaceInUrl;
						} else {
							assetVal = encodedSpaceInUrl;
						}
					}
				}
			    dynamicJSONData['asset-data'] [assetID][key] = assetVal;
		   }
	   return dynamicJSONData['asset-data'] [assetID];
	  }else{
	   return {};
	  }
	 } else {
	  return {};
	 }
}
function checkIsImageURL(url) {
    return(url.match(/\.(jpeg|jpg|gif|png|svg)$/) != null);
}
function renderExtHTMLFile(asseturl,assetID,iconURL,assetData,assetWidgetData){
	var assetDynamicData = getDynamicAssetData(assetID);
		if(assetDynamicData.hasOwnProperty('icon')){
		assetData = assetWidgetData = null;
	}
	var obj = {},
		url = asseturl;
		baseURL = iconURL.substr(0,iconURL.lastIndexOf("/")+1),
		appendStr = null,
		widgetParamInfo = getWidgetParamStr(assetID);
	appendStr = '<base href="'+baseURL+'" /><script>'+widgetParamInfo+'<\/script>';
	obj.appendStr = appendStr;
	obj.assetID = assetID;
	obj.url = url;
	obj.baseURL = baseURL;
	if(assetData && assetWidgetData){
		obj.widgetStr = assetData;
		renderExtHTMLFileAsAsset(obj);
		return;
	}

		
	(function(obj){
			$.ajax({
			type: "GET",
			url: obj.url,
			crossDomain: true,
			success: function(widgetStr){
				obj.widgetStr = widgetStr;
				renderExtHTMLFileAsAsset(obj);
			},
			error: function(){
				$("#"+obj.assetID).attr("src",obj.url);
			}
		});
		}(obj));
}
function renderExtHTMLFileAsAsset(obj) {
    var widgetStr = obj.widgetStr;
	    var index = widgetStr.indexOf("<head>"),
        appendStr = obj.appendStr,
        assetID = obj.assetID;
			if(widgetStr.search("jivoxWidgetApiV2.js") == -1 && widgetStr.search("jivoxWidgetApiV2.min.js") == -1){
			appendStr += '<script id="jvxWidget" src = "'+jivoxWidget+'"><\/script>';
		}
	    if (index != -1) {
        index += 6;
        widgetStr = widgetStr.substr(0, index) + appendStr + widgetStr.substr(index, widgetStr.length - 1);
    } else {
        index = widgetStr.indexOf("<html>");
        index += 6;
        widgetStr = widgetStr.substr(0, index) + '<head>' + appendStr + '</head>' + widgetStr.substr(index, widgetStr.length - 1);
    }

		var widgetIframeRef = document.getElementById(assetID);
    attachEventListener(widgetIframeRef, "load", function() {
        widgetIframeRef.style.visibility = 'visible';
		    }, false);

	$("#" + assetID).attr("extFilePath", obj.url);
    var widgetFrameWindow = widgetIframeRef.contentWindow || widgetIframeRef.contentDocument;
    widgetFrameWindow.document.open('text/html', 'replace');
    widgetFrameWindow.document.write(widgetStr);
    widgetFrameWindow.document.close();
}
attachEventListener(window, 'message', receiveMessage, false);
function handleAssetVariantQueue(){
	var assetVariantLength = assetVariantReportingQueue.length;
		if(assetVariantLength > 0){
			for(var assetVariant = 0; assetVariant < assetVariantLength; assetVariant++){
				doAssetVariantReporting("impression",assetVariantReportingQueue[assetVariant]);
			}
			assetVariantReportingQueue = [];
		}
}
function fireTrackersAndEvents(){
	fireImpressionTrackers();
				recordEvent(60, addnlParam);
			dyTrackers();
	handleAssetVariantQueue();
}
function receiveMessage(e){
	if(typeof e.data != "string"){
		return;
	}
		var s = e.data.split(':', 10);
		if(s && s.length >= 2){
		var msg = s[1];
		switch(msg){
						case "omidSupported":		// to check Whether placement is omid supported or not
				if(s[2] == "false"){
					fireTrackersAndEvents();
				}
				break;
			case "omidImpressionSignal":
				if(!omidImprReceived){
					omidImprReceived = true;
					window.parent.postMessage('jvx_685e3d5a15742:clearOmidMsgHandler:1', "*");
					fireTrackersAndEvents();
				}
				break;	
									case "openExpansion":
				expansionOpen = true;
				activateDefaultScene();
				eventMsg("openExpansion");
				eventMsg(layoutObj.activeSceneID+".openExpansion");
			    break;
			case "closeExpansion":
				expansionOpen = false;
				layoutObj.deActiveScene();
				eventMsg("closeExpansion");
				eventMsg(layoutObj.activeSceneID+".closeExpansion");
			    break;
			case "closeExpansionComplete":
				shiftToDefaultScene();
				postMsgToAllFrame("closeExpansionComplete");
				eventMsg("closeExpansionComplete");
				break;
			case "openExpansionComplete":
				postMsgToAllFrame("openExpansionComplete");
				eventMsg("openExpansionComplete");
				break;
			case "reRenderLayout":
				postMsgToAllFrame("orientationChange");
				layoutObj.onOrientationChange();
				eventMsg("orientationChange");
				eventMsg(layoutObj.activeSceneID+"orientationChange");
				break;
			case "clickThroughFromAdChoice":
				preSettinOnWO();
				break;
						case "pauseInteraction":
				eventMsg("pauseInteraction");
				break;
                
					}
	}
}

function postMsgToAllFrame(msg){
	}
function postMsgToParent(msg){
	window.parent.postMessage('jvx_685e3d5a15742:'+msg, "*");
}
function shiftToDefaultScene(){
	var currentSceneID = layoutObj.activeSceneID,
		nextSceneID = 'scene-1',
		self = layoutObj;
	self.deActiveScene(currentSceneID);
	$('#'+currentSceneID).css({"visibility":"hidden","top":"500000px","left":"0px","opacity":"0"})
	self.addSceneID(currentSceneID);
	self.activeSceneID = nextSceneID;
	self.removeSceneID(nextSceneID);
	$("#"+nextSceneID).css({"visibility":"visible", "top" : '0px', "left":"0px", "opacity":"1"});
}
function activateDefaultScene(){
	var nextSceneID = 'scene-1',
		self = layoutObj;
	self.activeSceneID = nextSceneID;
	self.loadRenderLayoutComponent(nextSceneID);
	self.activeScene(nextSceneID);
}
function INT(str){
	return parseInt(str,10);
}
function openClickThrough(url,e){
	layoutObj.openClickThrough(url,e);
}
function loadCmacro(){
	layoutObj.loadCmacro();
}
function openURL(url){
	window.open(urlFormat(url));
}
function getUnitType(){
	return ("banner" == "banner" ) ? "base" : "expansion"; 
}
function showAsset(assetID,initiater){
	if(assetID == undefined) return;
	if($("#" + assetID).length && $("#"+assetID).css("margin-top") == "0px"){
		return;
	}
	initiater = (initiater == undefined) ? assetID : initiater;
	var self = layoutObj,
		assetInfo = getRequiredJSON("components",assetID),
		options = checkIsDataAva(assetInfo,"options");
	self.renderComponent(assetID);
		if(!hasAppearEffect(assetID)){
		activateAsset(assetID);
	}
    }
function hideAsset(assetID,initiater){
	var self = layoutObj;
	if(typeof assetID == "undefined") return;
	var initiater = (typeof initiater == "undefined") ? assetID : initiater;
	var assetInfo = getRequiredJSON("components",assetID),
		options = assetInfo.hasOwnProperty("options") ? assetInfo["options"] : null;
	if(!validateVal(options)){
		deactivateAsset(assetID);
		return;
	}
    }
function removeAsset(assetID){
	if(assetID == undefined) return;
	if($("#"+assetID).length) $("#"+assetID).remove();
	if($(assetHasWrapper(assetID)).length) $(assetHasWrapper(assetID)).remove();
}
function invokeAsset(assetID,assetEventType,fireEvent){
	var self = layoutObj;
	if(typeof assetEventType == "undefined") assetEventType = "click";
	if(typeof fireEvent == "undefined"){ 
		var fireEvent = 1;
	}else{
		fireEvent = Number(fireEvent);
	}
	self.invokeInteractions(assetID,assetEventType,fireEvent);
	self.invokedTransitions(assetID,assetEventType);
}
function invokeAnim(assetID,animID){
	var o = {initiater:assetID,assetID:assetID,animID:animID};
	layoutObj.doThisAnim(o);
}
function reloadAsset(assetID){
	removeAsset(assetID);
	layoutObj.renderComponent(assetID);
}
function getElementStr(obj){
try{
	var self = layoutObj,
		assetID = obj.assetID;
	if(!self.checkForWebMobileOnly(assetID)) return;
	var layoutAssetInfo = getRequiredJSON('components',assetID),
		customAssetID = "customAsset."+assetID,
		assetDetailsJSON = assetsDetailedJSON[customAssetID],
		assetIconFileType = assetDetailsJSON['iconFileType'],
		assetURL = assetDetailsJSON['icon'],
		assetType = assetDetailsJSON['type'],
		assetData = assetDetailsJSON['data'],
		assetLeft = typeof obj.left == undefined ? 0 : obj.left,
		assetTop = typeof obj.top == undefined ? 0 : obj.top,
		assetWidth = obj.width,
		assetHeight = obj.height,
		assetEventType = assetDetailsJSON['eventType'],
		assetFallbackType = assetDetailsJSON['fallbackType'],
		assetFallbackImgURL = assetDetailsJSON['fallbackImgURL'],
		assetFallbackWidgetURL = assetDetailsJSON['fallbackWidgetURL'],
		assetFallbackWidgetSrc = assetDetailsJSON['fallbackWidgetSrc'],
		componentElementStr = "",
		assetClickHandler = assetDetailsJSON['clickHandler'],
		assetIconGlowColor = assetDetailsJSON['iconGlowColor'],
		assetIconParamString = assetDetailsJSON['iconParamString'],
		assetClickTagURL = getParameterValue(assetIconParamString,"clickThroughURL"),
		assetIconBgTransparent = Number(assetDetailsJSON['isIconBgTransparent']),
		assetIconBgColor = (assetIconBgTransparent && assetIconBgTransparent != null) ? "transparent" : assetDetailsJSON['iconBgColor'],
		assetWmode = assetIconBgTransparent ? "transparent" : "",
		disableClickThrough = assetDetailsJSON.hasOwnProperty('disableClickThrough') ? Number(assetDetailsJSON['disableClickThrough']) : 0,
		adlnParam = typeof obj.adlnParam != "undefined" ? obj.adlnParam : "",
		assetParamQueryStr = paramQueryStr +"&"+ assetIconParamString + adlnParam;
				if(!disableClickThrough){
			assetParamQueryStr = addParameter(assetParamQueryStr,["clickThroughURL=https://googleads.g.doubleclick.net/dbm/clk?sa=L&ai=CekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA&ae=1&num=1&cid=CAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ&sig=AOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA&client=ca-pub-4276969157128104&dbm_c=AKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA&cry=1&dbm_d=AKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA&adurl=https%3A%2F%2Fflights.cathaypacific.com%2Fdestinations%2Fredirect%3Fedition%3Den_LK%26orig%3DCMB%26dest%3DPEK%26tc%3Dco%26utm_medium%3DDISPLAY%26utm_campaign%3D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%26utm_content%3DALWAYSON_PROSPECTING-V1%26utm_term%3DEN_LK%26utm_source%3DGBL-DV360","clickTagURL="+assetClickTagURL]);
					}else{
			assetParamQueryStr =removeParameter(assetParamQueryStr,["clickTagURL","clickThroughURL"]);
					}
				if(assetIconFileType == "flash"){
							if(hasFlash){
					var obj = {};
					obj.id = assetID + 'PlaceHolder';
					obj.src = assetURL;
					obj.width = assetWidth;
					obj.height = assetHeight;
					obj.params = {'movie' : assetURL, 
								  'wmode' : 'transparent',
								  'allowScriptAccess' : 'always',
								  'flashvars' : 'assetId='+assetID+'&eventId='+assetEventType+'&'+assetParamQueryStr
								 };
					componentElementStr = createSWF(obj);
				}
						assetIconBgColor = (assetIconBgColor.search("#") == -1) ? ("#"+assetIconBgColor) : assetIconBgColor
			componentElementStr = '<div id='+assetID+' class="components" style="background:'+assetIconBgColor+'">'+componentElementStr+'</div>';
			if(self.enableFallback){
				if(assetFallbackType == "image"){
					assetIconFileType = "image";
					assetURL = assetFallbackImgURL;
				}else if(assetFallbackType == "html5" || assetFallbackType == "swiffy"){
					assetIconFileType = "custom-html-widget-file";
					assetURL = assetFallbackImgURL;
				}else if(assetFallbackType == "widget"){
					assetIconFileType = "custom-widget";
					componentElementStr = "";
					assetURL = assetFallbackWidgetSrc;
				}else if(assetFallbackType == "widget-url"){
					assetIconFileType = "custom-html-widget-file";
					componentElementStr = "";
					assetURL = assetFallbackWidgetURL;
				}else if(assetFallbackType == "widget-src"){
					assetIconFileType = "custom-widget";
					componentElementStr = "";
					assetURL = assetFallbackWidgetSrc;
				}
				if(assetIconBgTransparent && (assetIconFileType == "custom-html-widget-file")){
					assetURL = "/jivox/serverAPIs/getTransparentSwiffy.php?url="+assetURL;
				}
			}
		}
		if(assetIconFileType == "image" && assetType != "asset-video"){
			componentElementStr = '<img id="'+assetID+'" src="'+assetURL+'" />';
		}
		if(assetIconFileType == "custom-html-widget-file"){
			assetURL += "?"+removeParameter(paramQueryStr,["versionId"])+"&assetID="+assetID+"&isMobile=";
			componentElementStr = '<iframe id="'+assetID+'" marginwidth="0" marginheight="0" src="'+assetURL+'" frameborder="0" scrolling="no" allowtransparency="true"'+
									'style="visibility:hidden" onload="this.style.visibility=\'visible\';">';
		}
				return componentElementStr;
}catch(e){
	}
}
function closeBase(){
	window.parent.postMessage('jvx_685e3d5a15742:closeBase', "*");
}
 // end of adHasVideo check
function getFlashMovieObject(movieName){
	if(!hasFlash){
		var obj = document.getElementById(movieName);
		if(obj){
			return obj;
		}
	}else{
		if (window.document[movieName]){
		  return window.document[movieName];
		}
		if(navigator.appName.indexOf("Microsoft Internet")==-1){
			if (document.embeds && document.embeds[movieName])
				return document.embeds[movieName];
			else
				 return document.getElementById(movieName);
		}else{
			return document.getElementById(movieName);
		}
	}
}
function isVideoElement(assetID){
	return (videoAssetsInScene.hasOwnProperty(layoutObj.activeSceneID) && videoAssetsInScene[layoutObj.activeSceneID].hasOwnProperty(assetID)) ? true : false;
}
function isAssetActive(assetID){
	return ($("#"+assetID).css("margin-top") == "0px") ? true : false;
}

function settingForSynMsg(){
	attachEventListener(window, "storage", listenSyncMsg, false);
	attachEventListener(window, "storage", listenInvokeB2E, false);
	attachEventListener(window, "storage", listenEventB2E, false);
}
settingForSynMsg();
function saveSyncMsg(msg){
	var synObj = {};
	synObj.msg = msg;
	synObj = JSON.stringify(synObj);
	sessionStorage.setItem("syncMsg", synObj);
}
function listenSyncMsg(e){
		var data = sessionStorage.getItem("syncMsg");
	if(isJson(data)){
		data = JSON.parse(data);
		var msg = (data && data.hasOwnProperty("msg")) ? data['msg'] : null;
		if(msg){
			handleMsg(msg);
		}
	}
}
function listenInvokeB2E(e){
	if(e.key.indexOf("invokeB2E_"+objectName+"_") == -1) return;
	var eventSrc = e.target || e.srcElement;
	if(eventSrc.objectName != objectName){
		return;
	}
	var key = e.key.replace("invokeB2E_"+objectName+"_",""),
		value = e.newValue.replace("_invokeB2E",""),
		lenIframe = $("iframe[id*=asset]").length;
	if(lenIframe){
		for(var loopVar = 0; loopVar<lenIframe; loopVar++){
			try{
				$("iframe[id*=asset]")[loopVar].contentWindow.window[key](value);
			}catch(e){
				$("iframe[id*=asset]")[loopVar].contentWindow.postMessage('layoutWidgetListner:invokeB2E:'+key+":"+value, "*");
			}
		}
	}
}
function invokeBaseMethod(key,value){ 
	saveKeyValueOnStorage({key:key,value:value,uniqueKey:"invokeB2E"}); 
}
function invokeExpMethod(key,value){ 
	saveKeyValueOnStorage({key:key,value:value,uniqueKey:"invokeB2E"});
}
function saveKeyValueOnStorage(obj){
	var value = typeof obj.value == "undefined" ? "" : obj.value,
		key = typeof obj.key == "undefined" ? "" : obj.key,
		uniqueKey = obj.uniqueKey;
	if(typeof Storage != "undefined"){
		var stored_data = sessionStorage.getItem(uniqueKey+"_jvx_685e3d5a15742_"+key);
		if(stored_data == value){
			sessionStorage.setItem(uniqueKey+"_jvx_685e3d5a15742_"+key,value+"_"+uniqueKey);
		}else{
			sessionStorage.setItem(uniqueKey+"_jvx_685e3d5a15742_"+key, value);
		}
	}
}
function isJson(str) {
    try{ JSON.parse(str); }catch(e){ return false; }
    return true;
}
function raiseEventOnBase(msg){ saveKeyValueOnStorage({key:msg,uniqueKey:"raiseB2E"}); }
function raiseEventOnExp(msg){ saveKeyValueOnStorage({key:msg,uniqueKey:"raiseB2E"}); }
function listenEventB2E(e){
	var eventSrc = e.target || e.srcElement;
	if(eventSrc.objectName != objectName){
		return;
	}
	var key = e.key.replace("raiseB2E_"+objectName+"_","");
	notifyEventFramework(key);
}
function raiseEvent(msg){
	eventMsg(msg);
	handleMsg(msg);
}
function raiseAllEventsInHistory(){
	$.each(eventHistory, function(index,value) {
		notifyEventFramework(value);
	});
}
function clearAllEventsInHistory(){
	eventHistory = [];
}
function eventMsg(msg){
	var dotIndex = msg.indexOf("."),
		assetID = (dotIndex != -1) ? msg.substr(0,dotIndex) : null;
	if(assetID && (isVideoElement(assetID) || assetID.search("scene-") != -1)) {
		handleMsg(msg);
	}
	if(msg.search("sceneUnloaded")!= -1) clearAllEventsInHistory();
	if(msg.search("sceneAssetsLoaded")!= -1){
		raiseAllEventsInHistory();
		clearAllEventsInHistory();
	}else{
		if($.inArray(msg,eventHistory) == -1){
			eventHistory[eventHistory.length] = msg;
			if($("#loader").css("display") != "none") return;
		}
	}
		notifyEventFramework(msg);
	
}
function modifyEventMsgText(msg){
	var dotIndex = msg.indexOf("."),
		assetID = (dotIndex != -1) ? msg.substr(0,dotIndex) : null,
		eventTypeStr = msg.substr(dotIndex+1,msg.length-1),
		retVal = "";
	eventTypeStr = (eventTypeStr == "click") ? "clicked" : 
				   (eventTypeStr.search("COMPLETE") != -1) ? eventTypeStr.toLowerCase() : eventTypeStr;
	retVal = (assetID == null) ? msg : (assetID+"."+eventTypeStr);
	return retVal;
}
function notifyEventFramework(msg){
	if(typeof msg == "undefined" || msg == "" || msg == null){
		return;
	}
		msg = modifyEventMsgText(msg);
	$('#eventHandler').trigger(msg, ['event', msg]);
	var lenIframe = $("iframe[id*=asset]").length;
	// adding things to handle primary player, if exists
	if($("iframe[id=player]").length){
		$("iframe[id=player]")[0].contentWindow.postMessage('layoutWidgetListner:eventListner:raiseEvent:'+msg, "*");
	}
	try{
		for(var loopVar = 0; loopVar<lenIframe; loopVar++){
            $("iframe[id*=custom]")[loopVar].contentWindow.eventListner(msg);
		}
	}catch(e){
	      if($("iframe[id*=asset]").length){
		  for(var loopVar = 0; loopVar<lenIframe; loopVar++){
		  	$("iframe[id*=asset]")[loopVar].contentWindow.postMessage('layoutWidgetListner:eventListner:raiseEvent:'+msg, "*");
		  }
		}
	}
}
function handleMsg(msg){
	var dotIndex = msg.indexOf("."),
		assetID = msg.substr(0,dotIndex),
		eventTypeStr = msg.substr(dotIndex+1,msg.length-1),
		assetEventType = eventTypeStr.search("pauseClicked") != -1 ? "paused" : 
						 eventTypeStr.search("playClicked") != -1 ? "playing" :	eventTypeStr,
		interctionsJSON = getRequiredJSON("interactions",assetID),
		interactionJSON = getRequiredInteraction(interctionsJSON,["srcEvent",assetEventType]),
		tempAssetEventType = assetEventType.toUpperCase(); 	switch(tempAssetEventType){
		case "CLICKMODELCLOSEBTN":
			handleClickModelCloseBtnMsg(msg);
		break;
	}
			layoutObj.invokeInteractions(assetID,assetEventType);
	layoutObj.invokedTransitions(assetID,assetEventType);
}
function handleClickModelCloseBtnMsg(){
	}
function anyModelAssetIsActive(assetID){
	var retVal = false;
	var sceneModelAssets = layoutObj.activeModelAssetIDs[layoutObj.activeSceneID];
	for(var asset in sceneModelAssets){
		if(assetID == asset) continue;
		if(isAssetActive(asset)) retVal = true;
	}
	return retVal;
}
attachEventListener(window, 'message', receiveAPIMessage, false);
function receiveAPIMessage(e)
{
	if(typeof e.data != "string"){
		return;
	}
		var s = e.data.split(':', 10);
	if(s[0] == 'jvx_685e3d5a15742') s.shift();
	if(s && s.length >= 2 )
	{
		var apiMethod =  s[1]; 						if(s[0] == 'jvxAPI'){
			if(s[2] != undefined){
				if(s[1] == "openClickThrough" || s[1] == "openURL" || s[1] == "recordEventByName" || s[1] == "trackDCMClick"){
					s[2] = decodeURIComponent(s[2]);
				}
				var sParam = s.splice(2,s.length-2);
				window[apiMethod].apply(this,sParam);
			}else{
				window[apiMethod]();
			}
		}else if(s[0] == 'jvxAPIGetData'){
			var reqData = null;
			if(s[2] != undefined){
				var sParam = s.splice(2,s.length-2);
				reqData = window[apiMethod].apply(this,sParam);
			}else{
				reqData = window[apiMethod]();
			}
			var lenIframe = $("iframe[id*=asset]").length;
			if(lenIframe){
			  for(var loopVar = 0; loopVar<lenIframe; loopVar++){
			  	$("iframe[id*=asset]")[loopVar].contentWindow.postMessage('layoutWidgetListner:eventListner'+':'+apiMethod+':'+reqData, "*");
			  }
			}
		}
	}
}
function getAssetInteractionDetails(asstetIds){
	var scenesRef = getRequiredJSON(creativeUnitType)[layoutDimArr.join('x')]['scenes'];
		var interactionsObj = {};
		for(var a in scenesRef){
			interactionsObj[a]= (scenesRef[a].hasOwnProperty('interactions')) ? scenesRef[a]['interactions'] : {};
		}
		var arguments = JSON.parse(decodeURIComponent(asstetIds));
		var assetId = "";
		for (key in arguments) {
			assetId += String(arguments[key])+",";
		}
		assetId = assetId.substring(0,assetId.length-1);
		assetId = (assetId !== "undefined" && assetId !== "" && assetId !== " " && assetId !== undefined)? assetId.split(",") : [];
		var allInteractionAssets={};
		if(assetId.length > 0){
			for(var a in interactionsObj){
				var subset={};
				for(var i=0; i < assetId.length; i++){
					if(interactionsObj[a].hasOwnProperty(assetId[i])){
						subset[assetId[i]] = interactionsObj[a][assetId[i]];
					}
				}
				allInteractionAssets[a]=subset;
			}
		}else{
			allInteractionAssets = interactionsObj;
		}
		return encodeURIComponent(JSON.stringify(allInteractionAssets[layoutObj.activeSceneID]));
}
function invokeMethodOnLoad(methodName,param1){
	var checkForLoad = setInterval(function(){
		if($("#loader").css("display") == "none"){
			clearInterval(checkForLoad);
			if(param1 != undefined){
				eval("methodName(param1)");
			}else{
				eval("methodName()");
			}
		}
	},100);
}
function preSettinOnWO(){
	layoutObj.clearTimeOnHover();
	}
	var oldWindowOpen = window.open;
    window.open = function(url, sName, sFeatures, bReplace) {
    	preSettinOnWO();
        oldWindowOpen(url);
    };
function corToCenterAlignOnWindow(objWidth,objHeight){
	var objX =  ($(window).width() - objWidth) / 2 ;
	var objY =  ($(window).height() - objHeight) / 2 ;
	return [objX,objY];
}
function findCorToCenterAlign(assetDimArr){
	var cord = [];
		assetWidth = Number(assetDimArr[0]),
		assetHeight = Number(assetDimArr[1]);
	cord[0] = (layoutObj.layoutWidth - assetWidth)/2;
	cord[1] = (layoutObj.layoutHeight - assetHeight)/2;
	return cord;
}
function splitStrToArr(str){
	return str.replace('[',"").replace(']',"").split(",");
}
function isAssetInLayout(assetID){
	return getRequiredJSON("components",assetID);
}
function isAssetAnInteraction(assetID){
	var iconFileType = getRequiredAssetDetail(assetID,"iconFileType"),
		retVal = false;
	if(iconFileType == "url" || iconFileType == "fbshare" || iconFileType == "gplusshare" || iconFileType =="twittershare"){
		retVal = true;
	}
	return retVal;
	}
function postDYDataToExtWidget(data){
	var lenIframe = $("iframe[id*=asset]").length;
	if($("iframe[id*=asset]").length){
		for(var i = 0; i<lenIframe; i++){
			$("iframe[id*=asset]")[i].contentWindow.postMessage('layoutWidgetListner:resolveDynDataURL:'+resolveDynDataURL, "*");
			$("iframe[id*=asset]")[i].contentWindow.postMessage('layoutWidgetListner:evalDynRulesCarousel:'+evalDynRulesCarousel, "*");
			$("iframe[id*=asset]")[i].contentWindow.postMessage('layoutWidgetListner:dynamicData:'+encodeURIComponent(JSON.stringify(data)), "*");
		}
	}
}
function sceneLoaded(){
	window.parent.postMessage('jvx_685e3d5a15742:' + 'sceneLoaded', "*");
			postDYDataToExtWidget(dynamicJSONData['data']);
				$("#"+layoutObj.activeSceneID).css({'cursor':'pointer'});
			doCSSReflow();
}
function doCSSReflow(){
	setTimeout(function(){
		document.body.style.position = "relative";
		document.body.offsetHeight;
		document.body.style.position = "";
	},2000);
}
function centerAlignSceneCnt(){
	var centerSceneXY = [0,0],
		layoutArr = layoutObj.matchLayoutDim.split("x");
	centerSceneXY = corToCenterAlignOnWindow(Number(layoutArr[0]),Number(layoutArr[1]));	
			centerSceneXY[0] = (centerSceneXY[0] < 0 ) ? 0 : centerSceneXY[0];
	centerSceneXY[1] = (centerSceneXY[1] < 0 ) ? 0 : centerSceneXY[1];
		var centerAlignStyle = {'position':'absolute','left':centerSceneXY[0],'top':centerSceneXY[1]};	
	$('#scenesContainer').css(centerAlignStyle);
}
function jqueryAvailable(){
		}
function fitToscreen(componentElementStr){
		componentElementStr = (componentElementStr.replace("<img", "<div")).replace("/>", "><div>");
    var assetID = fitToScreenID[layoutObj.matchLayoutDim][layoutObj.activeSceneID]['assetID'],
		tempID = assetID+layoutObj.activeSceneID+"ft";
	if(!$("#"+tempID).length){
		$(componentElementStr).insertBefore($("#scenesContainer"));
	}
	$("#"+assetID).attr({"id":tempID});
	cssForFitToScreen(tempID);
}
function bgInlineEmpty(ID){
	$("#"+ID).css({"background":""});
	document.getElementById(ID).style.backgroundImage="";
	document.getElementById(ID).style.backgroundColor="";
	document.getElementById(ID).style.backgroundRepeat="";
}
function cssForFitToScreen(assetID){
	var cssStyle = "#"+assetID+"{position:absolute;left:0;top:0;width:100%;height:100%;background: transparent url('"+$("#"+assetID).attr("src")+"') no-repeat center; }";
	$('head').append('<style>'+cssStyle+'<\/style>');
	invokeMethodOnLoad(function(){
		$("#"+layoutObj.activeSceneID).css({"background":"transparent"});
	});
	$("#"+assetID).removeAttr("src").unbind("click").on("click",function(){
		openClickThrough();
	});
}
function resizeFitToScreenImage(assetID){
	fitToScreenID[layoutObj.matchLayoutDim][layoutObj.activeSceneID]['assetID'] = assetID;
	$("#"+assetID+layoutObj.activeSceneID+"ft").show();
	doCSSReflow();
}
function fitToScreenCopyToBody(assetID){
	var tempID = assetID+layoutObj.activeSceneID+"ft";
	if($("#"+assetID).length){
		$("#"+assetID).clone().insertBefore($("#scenesContainer"));
		$("#"+assetID).attr({"id":tempID});
		$("#scenesContainer #"+assetID).css({"margin-top":"5000px"});
		cssForFitToScreen(tempID);
	}
}
function cancelEvent(e){
	if (!e) var e = window.event;
	e.cancelBubble = true;
	if (e.stopPropagation) e.stopPropagation();        
}
function mouseoverMinTimeDone(){
	clearInterval(sceneRotateInterval);
	clearTimeout(UIRTimer);
}
function replaceHTML(asset_ID, data, targetElemID){
	try{
		if(asset_ID == "self"){
			var appendElemID = (targetElemID == undefined) ? assetID : targetElemID;
			var appendElem = document.getElementById(appendElemID) ? document.getElementById(appendElemID) : document.body;
			appendElem.innerHTML = data;
		}else{
			var assetHTML = document.getElementById(asset_ID);
			var appendAssestElem = assetHTML.contentDocument.getElementById(targetElemID) ? assetHTML.contentDocument.getElementById(targetElemID) : assetHTML.contentDocument.body;
			appendAssestElem.innerHTML = data;
		}
			
	}catch(e){
		assetHTML.contentWindow.postMessage('layoutWidgetListner:replaceHTML:'+data+':'+targetElemID, "*");
	}
}
function appendHTML(asset_ID, data, targetElemID){
	try{
		if(asset_ID == "self"){
			var appendElemID = (targetElemID == undefined) ? assetID : targetElemID;
			var appendElem = document.getElementById(appendElemID) ? document.getElementById(appendElemID) : document.body;
			appendElem.innerHTML += data;
		}else{
			var assetHTML = document.getElementById(asset_ID);
			var appendAssestElem = assetHTML.contentDocument.getElementById(targetElemID) ? assetHTML.contentDocument.getElementById(targetElemID) : assetHTML.contentDocument.body;
			appendAssestElem.innerHTML += data;
		}
			
	}catch(e){
		assetHTML.contentWindow.postMessage('layoutWidgetListner:appendHTML:'+data+':'+targetElemID, "*");
	}
}

function trackDCMClick(clickUrl,creativeVariantDCM){
	//Function definition will be available only when $isDynamic and $dcm params are set
	}


</script><div id="eventHandler" style="position:absolute; top:-1000px; left:-1000px;"></div><div id="mask" style="display: none;"></div><div id="closeBtnModel"></div><div id="scenesContainer"><div id="scene-1" style="display: block; visibility: visible; top: 0px; left: 0px; opacity: 1; cursor: pointer;"><iframe id="asset103" src="./saved_resource.html" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" allowtransparency="true" style="visibility: visible; margin: 0px;" onload="this.style.visibility=&#39;visible&#39;;" extfilepath="https://assets.jivox.com/assets/widgets/2025/4/a76754z67fd313d44bc0/1/160x600_EN/HTML_M.html?externalWg=1&amp;adUnitType=19&amp;campaignId=181754&amp;base=1&amp;creativeUnitType=19&amp;adUnitId=1900&amp;isDynamic=1&amp;objectName=jvx_685e3d5a15742&amp;clickThroughURL=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360&amp;serverURL=https://as.jivox.com&amp;placementId=3d372812&amp;clickTag=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fdbm%2Fclk%3Fsa%3DL%26ai%3DCekFjWD1eaMbuM-j3z7sPoMHk8AXf6_KpfqLsn-X_Esur8-X1ChABII69nhxgkansBKABveLD3ijIAQmpAngfOaRJGYE-qAMByAObBKoEpQJP0MnnrkqRrrtWEIRBBI0NNxLuz7OGc_yqscsOmrqbzhHwIsXtvNbH56QHLun88W7RqwF0UBX_vnAGTNsoOFvIbVQUyq4EzxNVwPddTLZwUHOz55Kjecn7ZjLWDESfBj1T7XuN1miXarq29CcSnevOMXQRFR8RSFRItyMWI5ELyMiQDSKvyDhAtS0__wNc02vG44D3eESctuKapXfl2fx9xhvc2WaVzOOiBhVK4zbs_fpQD63YrWOmlyQUww_2z7_X1tl97QWKVY4MeKclN28PSnx9OoOYwc1I19U6rPrIUpoVTTvxGn936fFMxlRFjNEIMKg5lI59AjPbAXLs6twxVz2UNwEUoK-mITWF4TY6H9j1Z2zm7Lhv0l0FPDd-waISsbDA3cAE87bPhJUF4AQDiAX8kfnWUpAGAaAGTYAHvZqUvgOIBwGQBwKoB6a-G6gHzM6xAqgH89EbqAeW2BuoB6qbsQKoB47OG6gHk9gbqAfw4BuoB-6WsQKoB_6esQKoB6--sQKoB9XJG6gH2baxAqgHmgaoB_-esQKoB9-fsQKoB_jCsQKoB_vCsQKoB-fXsQLYBwDSCCwIABACGJ0BMgEAOhKf0ICAgIAEgMCAgICgqIACqAFIvf3BOlijx8_c_5COA_IIG2FkeC1zdWJzeW4tNjQxODE5ODcwMjU1NjkzN4AKA5gLAcgLAYAMAaoNAkxL4g0TCI7j0Nz_kI4DFej7cwEdoCAZXuoNEwjhwtLc_5COAxXo-3MBHaAgGV7wDQGwE7nJ-RzQEwDYEw3YFAHQFQHKFgIKAPgWAYAXAbIXNBgCKjAvMjIxNTI3MTgvc3dzLWhiLy93M3NjaG9vbHMuY29tLy93aWRlX3NreXNjcmFwZXKyGAkSAqBPGE0iAQA%26ae%3D1%26num%3D1%26cid%3DCAQSVQDZpuyztmXr4EGYyOcahaKo1h13MOzuZPQhR3REkxTF5sfey3QbbTAWHQNM2bZyYPcBNV7tegicReW75IOug-4eFBYhA3v_zv57EgZWOIA0UZTzThIYAQ%26sig%3DAOD64_0koH4SkMz3n4PZ4fmFwEXj0eWZVA%26client%3Dca-pub-4276969157128104%26dbm_c%3DAKAmf-BpfNZK19Ip3x3RFEpMp40dgS_h3120Vo0mg3nSe_MjEdN7A-y4ztqnLCxRkRvfl079CBLf2_vUexRHGkHU2PfZ95NYVwRDdNmKBlQznNggc-QI_uBOvPFJeQgfBGBZ3yKyVLh92VCtTAInWy5gAES-g5bX1EafOEPnTqjJYISdXMnBSjHtzojsomzOE7ZvISDOJ37OPkj9YY5LUmuAesO_AZcqfA%26cry%3D1%26dbm_d%3DAKAmf-B3XUMP3wqUrtClu9wzriPa6tEPraCIcMqzKoThdqEwPx1wkQo1CxkUXdUqjptzEHz3i6txSY3w7YOxh8szleLk3DG6bgu_eFXqRt_-IRMD7lC58HhdHvLX86LAjj4wkPFN0ZUTfByz6Ja2Blynd1cRcdbvDtLg5Bne1qqN4OH4Wk4ItNAU_WrdQKfjG1aTltrtzLESVQXBvOQzvQDi7aBPmBEckhLQOy5slWnFDhh4R8aNMC2aB8pRPvDF5JhIMdZj9vqTkK0AlWirmZ2YUUWSNaJDnK7NMjk9902bZGassK1bErwaTDkLVCGRRCMsYQgKemipOKsyFq2YnKIHOwPEtXJcWo06GBuQcass2NtWeL8t6VijwZrbWKQ1rscNja-zHUIv34hMvQwk82k_J0EYqEVOjB4LscLVjdoHWQHzNhf0wBM1UDaykwll4QBImP0BnCIzElQvlXJmbVY1I87fKOENjfGELgdPAlVbZWEYPSYDR5xHsfdIp2ZivOEBSJdv7BHS9PTGiLOanAD5uk-FVFFu3a__NEZvCbTjZJvomcJyfgJdKp8U1Wu4i0FDFZkDfX_KNIRrePuyf6K0U9cDmbjwRZilzQ4C2_m4duUKUmTELKpWEr1qAqjX4XItPNmYcgL7REgO0QflAePoRTaamxG3BA%26adurl%3Dhttps%253A%252F%252Fflights.cathaypacific.com%252Fdestinations%252Fredirect%253Fedition%253Den_LK%2526orig%253DCMB%2526dest%253DPEK%2526tc%253Dco%2526utm_medium%253DDISPLAY%2526utm_campaign%253D20231115-WW-PROGRAMMATIC_PROSPECTING_JIVOX_DCO%2526utm_content%253DALWAYSON_PROSPECTING-V1%2526utm_term%253DEN_LK%2526utm_source%253DGBL-DV360&amp;reportingURL=https://evs.jivox.com&amp;jvxSessionId=1751006554.7785&amp;siteId=674dd6df7af248b&amp;isCampaign=1&amp;es_pId=3d372812&amp;ap_DataSignal1=22194047228&amp;ap_DataSignal3=AOjeLNEAAABpCmEKDAgAFQAAAAAdAAAAABIMCAAVAAAAAB0AAAAAIhQI_JH51lKoAr6k3tEDsAKaiafmA0AB0gIqGAAiEwjG-tPc_5COAxXo-3MBHaAgGV4oATABOKLsn-X_EkACSAJYiIEgENO-8poCo-UdOdA_k7pJRO1xpuJp2w&amp;ap_DataSignal2=GBL-DV360&amp;jvxUUId=uODhprlrJeHU&amp;es_cgName=CP_Travel%3ADV360%7CLK_Behavioural_China_China%7CChina_EN_v3&amp;es_segName=DV360_EN&amp;assetID=asset103&amp;isMobile=&amp;externalStartEventId=10400"></iframe></div></div><div id="loader" class="jvx_685e3d5a15742loadingSpinner" style="width: 22px; height: 22px; display: none;"></div><iframe id="iframe_716185117228" name="iframe_716185117228" data-dv-frm="716185117228" width="0" height="0" src="./saved_resource(1).html" style="display: none;"></iframe><script src="./dvtp_src.js.download"></script>
<!-- Jivox � 2025 -->


</body></html>